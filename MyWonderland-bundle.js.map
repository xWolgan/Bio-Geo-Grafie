{
  "version": 3,
  "sources": ["../node_modules/earcut/src/earcut.js", "../node_modules/@wonderlandengine/components/dist/8thwall-camera.js", "../node_modules/@wonderlandengine/components/dist/anchor.js", "../node_modules/@wonderlandengine/components/dist/utils/webxr.js", "../node_modules/@wonderlandengine/components/dist/cursor-target.js", "../node_modules/@wonderlandengine/components/dist/cursor.js", "../node_modules/gl-matrix/esm/common.js", "../node_modules/gl-matrix/esm/mat3.js", "../node_modules/gl-matrix/esm/mat4.js", "../node_modules/gl-matrix/esm/quat.js", "../node_modules/gl-matrix/esm/vec3.js", "../node_modules/gl-matrix/esm/vec4.js", "../node_modules/gl-matrix/esm/quat2.js", "../node_modules/@wonderlandengine/components/dist/hit-test-location.js", "../node_modules/@wonderlandengine/components/dist/debug-object.js", "../node_modules/@wonderlandengine/components/dist/device-orientation-look.js", "../node_modules/@wonderlandengine/components/dist/finger-cursor.js", "../node_modules/@wonderlandengine/components/dist/fixed-foveation.js", "../node_modules/@wonderlandengine/components/dist/hand-tracking.js", "../node_modules/@wonderlandengine/components/dist/howler-audio-listener.js", "../node_modules/@wonderlandengine/spatial-audio/dist/audio-source.js", "../node_modules/@wonderlandengine/spatial-audio/dist/audio-listener.js", "../node_modules/@wonderlandengine/spatial-audio/dist/audio-manager.js", "../node_modules/@wonderlandengine/spatial-audio/dist/audio-players.js", "../node_modules/@wonderlandengine/components/dist/howler-audio-source.js", "../node_modules/@wonderlandengine/components/dist/image-texture.js", "../node_modules/@wonderlandengine/components/dist/utils/utils.js", "../node_modules/@wonderlandengine/components/dist/mouse-look.js", "../node_modules/@wonderlandengine/components/dist/player-height.js", "../node_modules/@wonderlandengine/components/dist/target-framerate.js", "../node_modules/@wonderlandengine/components/dist/teleport.js", "../node_modules/@wonderlandengine/components/dist/trail.js", "../node_modules/@wonderlandengine/components/dist/two-joint-ik-solver.js", "../node_modules/@wonderlandengine/components/dist/video-texture.js", "../node_modules/@wonderlandengine/components/dist/vr-mode-active-switch.js", "../node_modules/@wonderlandengine/components/dist/plane-detection.js", "../node_modules/@wonderlandengine/components/dist/vrm.js", "../node_modules/@wonderlandengine/components/dist/wasd-controls.js", "../node_modules/@wonderlandengine/components/dist/input-profile.js", "../node_modules/@wonderlandengine/components/dist/orbital-camera.js", "../js/ambient-audio.js", "../js/extended-wasd-controls.js", "../js/interactive-object.js", "../js/light-fade-controller.js", "../js/opacity-controller.js", "../js/video-wall-tiled.js", "../js/vr-teleport-wrapper.js", "../js/sky-sphere-controller-v2.js", "../js/index.js"],
  "sourcesContent": ["'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\n/**\n * 8thwall camera component.\n * @deprecated Use the components in https://github.com/WonderlandEngine/wonderland-ar-tracking instead.\n */\nclass ARCamera8thwall extends Component {\n    static TypeName = '8thwall-camera';\n    deprecated;\n}\n__decorate([\n    property.bool(true)\n], ARCamera8thwall.prototype, \"deprecated\", void 0);\nexport { ARCamera8thwall };\n//# sourceMappingURL=8thwall-camera.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Emitter } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\nvar tempVec3 = new Float32Array(3);\nvar tempQuat = new Float32Array(4);\n/**\n * Sets the location of the object to the location of an XRAnchor\n *\n * Create anchors using the `Anchor.create()` static function.\n *\n * Example for use with cursor:\n * ```js\n * cursorTarget.onClick.add((object, cursor, originalEvent) => {\n *     /* Only events in XR will have a frame attached *\\/\n *     if(!originalEvent.frame) return;\n *     Anchor.create(anchorObject, {uuid: id, persist: true}, originalEvent.frame);\n * });\n * ```\n */\nclass Anchor extends Component {\n    static TypeName = 'anchor';\n    /* Static management of all anchors */\n    static #anchors = [];\n    persist = false;\n    /** Unique identifier to load a persistent anchor from, or empty/null if unknown */\n    uuid = null;\n    /** The xrAnchor, if created */\n    xrAnchor = null;\n    /** Emits events when the anchor is created either by being restored or newly created */\n    onCreate = new Emitter();\n    /** Whether the anchor is currently being tracked */\n    visible = false;\n    /** Emits an event when this anchor starts tracking */\n    onTrackingFound = new Emitter();\n    /** Emits an event when this anchor stops tracking */\n    onTrackingLost = new Emitter();\n    /** XRFrame to use for creating the anchor */\n    xrFrame = null;\n    /** XRHitTestResult to use for creating the anchor */\n    xrHitResult = null;\n    /** Retrieve all anchors of the current scene */\n    static getAllAnchors() {\n        return Anchor.#anchors;\n    }\n    static #addAnchor(anchor) {\n        Anchor.#anchors.push(anchor);\n    }\n    static #removeAnchor(anchor) {\n        const index = Anchor.#anchors.indexOf(anchor);\n        if (index < 0)\n            return;\n        Anchor.#anchors.splice(index, 1);\n    }\n    /**\n     * Create a new anchor\n     *\n     * @param o Object to attach the component to\n     * @param params Parameters for the anchor component\n     * @param frame XRFrame to use for anchor cration, if null, will use the current frame if available\n     * @param hitResult Optional hit-test result to create the anchor with\n     * @returns Promise for the newly created anchor component\n     */\n    static create(o, params, frame, hitResult) {\n        const a = o.addComponent(Anchor, { ...params, active: false });\n        if (a === null)\n            return null;\n        a.xrHitResult = hitResult ?? null;\n        a.xrFrame = frame ?? null;\n        a.onCreate.once(() => ((a.xrFrame = null), (a.xrHitResult = null)));\n        a.active = true;\n        return a.onCreate.promise();\n    }\n    #getFrame() {\n        return this.xrFrame || this.engine.xr.frame;\n    }\n    async #createAnchor() {\n        if (!this.#getFrame().createAnchor) {\n            throw new Error(\"Cannot create anchor - anchors not supported, did you enable the 'anchors' WebXR feature?\");\n        }\n        if (this.xrHitResult) {\n            if (this.xrHitResult.createAnchor === undefined) {\n                throw new Error('Requested anchor on XRHitTestResult, but WebXR hit-test feature is not available.');\n            }\n            return this.xrHitResult.createAnchor();\n        }\n        else {\n            this.object.getTranslationWorld(tempVec3);\n            tempQuat.set(this.object.rotationWorld);\n            const rotation = tempQuat;\n            const anchorPose = new XRRigidTransform({ x: tempVec3[0], y: tempVec3[1], z: tempVec3[2] }, { x: rotation[0], y: rotation[1], z: rotation[2], w: rotation[3] });\n            return this.#getFrame()?.createAnchor(anchorPose, this.engine.xr.currentReferenceSpace);\n        }\n    }\n    #onAddAnchor(anchor) {\n        if (!anchor)\n            return;\n        if (this.persist) {\n            if (anchor.requestPersistentHandle !== undefined) {\n                anchor.requestPersistentHandle().then((uuid) => {\n                    this.uuid = uuid;\n                    this.#onCreate(anchor);\n                    Anchor.#addAnchor(this);\n                });\n                return;\n            }\n            else {\n                console.warn('anchor: Persistent anchors are not supported by your client. Ignoring persist property.');\n            }\n        }\n        this.#onCreate(anchor);\n    }\n    #onRestoreAnchor(anchor) {\n        this.#onCreate(anchor);\n    }\n    #onCreate(anchor) {\n        this.xrAnchor = anchor;\n        this.onCreate.notify(this);\n    }\n    start() {\n        if (this.uuid && this.engine.xr) {\n            this.persist = true;\n            if (this.engine.xr.session.restorePersistentAnchor === undefined) {\n                console.warn('anchor: Persistent anchors are not supported by your client. Ignoring persist property.');\n            }\n            this.engine.xr.session.restorePersistentAnchor(this.uuid).then(this.#onRestoreAnchor.bind(this));\n        }\n        else if (this.#getFrame()) {\n            this.#createAnchor().then(this.#onAddAnchor.bind(this));\n        }\n        else {\n            throw new Error('Anchors can only be created during the XR frame in an active XR session');\n        }\n    }\n    update() {\n        if (!this.xrAnchor || !this.engine.xr)\n            return;\n        /* We need to use the actual frame from the draw callback here */\n        const pose = this.engine.xr.frame.getPose(this.xrAnchor.anchorSpace, this.engine.xr.currentReferenceSpace);\n        const visible = !!pose;\n        if (visible != this.visible) {\n            this.visible = visible;\n            (visible ? this.onTrackingFound : this.onTrackingLost).notify(this);\n        }\n        if (pose) {\n            setXRRigidTransformLocal(this.object, pose.transform);\n        }\n    }\n    onDestroy() {\n        Anchor.#removeAnchor(this);\n    }\n}\n__decorate([\n    property.bool(false)\n], Anchor.prototype, \"persist\", void 0);\n__decorate([\n    property.string()\n], Anchor.prototype, \"uuid\", void 0);\nexport { Anchor };\n//# sourceMappingURL=anchor.js.map", "const tempVec = new Float32Array(3);\nconst tempQuat = new Float32Array(4);\nexport function setXRRigidTransformLocal(o, transform) {\n    const r = transform.orientation;\n    tempQuat[0] = r.x;\n    tempQuat[1] = r.y;\n    tempQuat[2] = r.z;\n    tempQuat[3] = r.w;\n    const t = transform.position;\n    tempVec[0] = t.x;\n    tempVec[1] = t.y;\n    tempVec[2] = t.z;\n    o.resetPositionRotation();\n    o.setRotationLocal(tempQuat);\n    o.translateLocal(tempVec);\n}\n//# sourceMappingURL=webxr.js.map", "import { Component, Emitter } from '@wonderlandengine/api';\n/**\n * Click/hover/move/button target for [cursor](#cursor).\n *\n * To trigger code when clicking, hovering, unhovering, moving cursor, pressing\n * cursor button or releasing cursor button, use `.addClickFunction(f)`,\n * `.addHoverFunction(f)`, `.addUnHoverFunction(f)`,\n * `.addMoveFunction(f)`, `.addDownFunction(f)` and\n * `.addUpFunction(f)` respectively with any `function f() {}`.\n *\n * To call members on a different component, you can set up a cursor target like\n * so:\n *\n * ```js\n * start: function() {\n *   let target = this.object.addComponent('cursor-target');\n *   target.onClick.add(this.onClick.bind(this));\n * },\n * onClick: function() {\n *   console.log(this.object.name, \"was clicked!\");\n * }\n * ```\n * **Functions:**\n *\n * ```js\n * const target = this.object.getComponent(CursorTarget);\n * const callback = function(object, cursorComponent) {};\n *\n * target.onHover.add(callback);\n * target.onHover.remove(callback);\n *\n * target.onUnHover.add(callback);\n * target.onUnHover.remove(callback);\n *\n * target.onClick.add(callback);\n * target.onClick.remove(callback);\n *\n * target.onMove.add(callback);\n * target.onMove.remove(callback);\n *\n * target.onDown.add(callback);\n * target.onDown.remove(callback);\n *\n * target.onUp.add(callback);\n * target.onUp.remove(callback);\n * ```\n *\n * **Requirements:**\n * - a `collision` component to be attached to the same object.\n *\n * See [Animation Example](/showcase/animation).\n */\nclass CursorTarget extends Component {\n    static TypeName = 'cursor-target';\n    static Properties = {};\n    /** Emitter for events when the target is hovered */\n    onHover = new Emitter();\n    /** Emitter for events when the target is unhovered */\n    onUnhover = new Emitter();\n    /** Emitter for events when the target is clicked */\n    onClick = new Emitter();\n    /** Emitter for events when the cursor moves on the target */\n    onMove = new Emitter();\n    /** Emitter for events when the user pressed the select button on the target */\n    onDown = new Emitter();\n    /** Emitter for events when the user unpressed the select button on the target */\n    onUp = new Emitter();\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onHover.add(f);\n     */\n    addHoverFunction(f) {\n        this.onHover.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onHover.remove(f);\n     */\n    removeHoverFunction(f) {\n        this.onHover.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onUnhover.add(f);\n     */\n    addUnHoverFunction(f) {\n        this.onUnhover.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onUnhover.remove(f);\n     */\n    removeUnHoverFunction(f) {\n        this.onUnhover.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    this.onClick.add(f);\n     */\n    addClickFunction(f) {\n        this.onClick.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onClick.remove(f);\n     */\n    removeClickFunction(f) {\n        this.onClick.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onMove.add(f);\n     */\n    addMoveFunction(f) {\n        this.onMove.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onMove.remove(f);\n     */\n    removeMoveFunction(f) {\n        this.onMove.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onDown.add(f);\n     */\n    addDownFunction(f) {\n        this.onDown.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onDown.remove(f);\n     */\n    removeDownFunction(f) {\n        this.onDown.remove(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onUp.add(f);\n     */\n    addUpFunction(f) {\n        this.onUp.add(f);\n    }\n    /**\n     * @deprecated Use the emitter instead.\n     *\n     * @example\n     *    component.onUp.remove(f);\n     */\n    removeUpFunction(f) {\n        this.onUp.remove(f);\n    }\n}\nexport { CursorTarget };\n//# sourceMappingURL=cursor-target.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, InputComponent, ViewComponent, Emitter, } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { vec3, mat4 } from 'gl-matrix';\nimport { CursorTarget } from './cursor-target.js';\nimport { HitTestLocation } from './hit-test-location.js';\nconst tempVec = new Float32Array(3);\nconst ZERO = [0, 0, 0];\n/** Global target for {@link Cursor} */\nclass CursorTargetEmitters {\n    /** Emitter for events when the target is hovered */\n    onHover = new Emitter();\n    /** Emitter for events when the target is unhovered */\n    onUnhover = new Emitter();\n    /** Emitter for events when the target is clicked */\n    onClick = new Emitter();\n    /** Emitter for events when the cursor moves on the target */\n    onMove = new Emitter();\n    /** Emitter for events when the user pressed the select button on the target */\n    onDown = new Emitter();\n    /** Emitter for events when the user unpressed the select button on the target */\n    onUp = new Emitter();\n}\n/**\n * 3D cursor for desktop/mobile/VR.\n *\n * Implements a ray-casting cursor into the scene. To react to\n * clicking/hover/unhover/cursor down/cursor up/move use a\n * [cursor-target](#cursor-target).\n *\n * For VR, the ray is cast in direction of\n * [this.object.getForward()](/jsapi/object/#getforward). For desktop and mobile, the\n * forward vector is inverse-projected to account for where on screen the user clicked.\n *\n * `.globalTarget` can be used to call callbacks for all objects, even those that\n * do not have a cursor target attached, but match the collision group.\n *\n * `.hitTestTarget` can be used to call callbacks WebXR hit test results,\n *\n * See [Animation Example](/showcase/animation).\n */\nclass Cursor extends Component {\n    static TypeName = 'cursor';\n    /* Dependencies is deprecated, but we keep it here for compatibility\n     * with 1.0.0-rc2 until 1.0.0 is released */\n    static Dependencies = [HitTestLocation];\n    static onRegister(engine) {\n        engine.registerComponent(HitTestLocation);\n    }\n    _collisionMask = 0;\n    _onDeactivateCallbacks = [];\n    _input = null;\n    _origin = new Float32Array(3);\n    _cursorObjScale = new Float32Array(3);\n    _direction = new Float32Array(3);\n    _projectionMatrix = new Float32Array(16);\n    _viewComponent = null;\n    _isDown = false;\n    _lastIsDown = false;\n    _arTouchDown = false;\n    _lastPointerPos = new Float32Array(2);\n    _lastCursorPosOnTarget = new Float32Array(3);\n    _hitTestLocation = null;\n    _hitTestObject = null;\n    _onSessionStartCallback = null;\n    /**\n     * Whether the cursor (and cursorObject) is visible, i.e. pointing at an object\n     * that matches the collision group\n     */\n    visible = true;\n    /** Currently hovered object */\n    hoveringObject = null;\n    /** CursorTarget component of the currently hovered object */\n    hoveringObjectTarget = null;\n    /** Whether the cursor is hovering reality via hit-test */\n    hoveringReality = false;\n    /**\n     * Global target lets you receive global cursor events on any object.\n     */\n    globalTarget = new CursorTargetEmitters();\n    /**\n     * Hit test target lets you receive cursor events for \"reality\", if\n     * `useWebXRHitTest` is set to `true`.\n     *\n     * @example\n     * ```js\n     * cursor.hitTestTarget.onClick.add((hit, cursor) => {\n     *     // User clicked on reality\n     * });\n     * ```\n     */\n    hitTestTarget = new CursorTargetEmitters();\n    /** World position of the cursor */\n    cursorPos = new Float32Array(3);\n    /** Collision group for the ray cast. Only objects in this group will be affected by this cursor. */\n    collisionGroup = 1;\n    /** (optional) Object that visualizes the cursor's ray. */\n    cursorRayObject = null;\n    /** Axis along which to scale the `cursorRayObject`. */\n    cursorRayScalingAxis = 2;\n    /** (optional) Object that visualizes the cursor's hit location. */\n    cursorObject = null;\n    /** Handedness for VR cursors to accept trigger events only from respective controller. */\n    handedness = 0;\n    /** Object that has an input component. */\n    inputObject = null;\n    /** Object that has a view component. */\n    viewObject = null;\n    /** Mode for raycasting, whether to use PhysX or simple collision components */\n    rayCastMode = 0;\n    /** Maximum distance for the cursor's ray cast. */\n    maxDistance = 100;\n    /** Whether to set the CSS style of the mouse cursor on desktop */\n    styleCursor = true;\n    /**\n     * Use WebXR hit-test if available.\n     *\n     * Attaches a hit-test-location component to the cursorObject, which will be used\n     * by the cursor to send events to the hitTestTarget with HitTestResult.\n     */\n    useWebXRHitTest = false;\n    _onViewportResize = () => {\n        if (!this._viewComponent)\n            return;\n        /* Projection matrix will change if the viewport is resized, which will affect the\n         * projection matrix because of the aspect ratio. */\n        mat4.invert(this._projectionMatrix, this._viewComponent.projectionMatrix);\n    };\n    start() {\n        this._collisionMask = 1 << this.collisionGroup;\n        if (this.handedness == 0) {\n            const inputCompObj = this.inputObject || this.object;\n            const inputComp = inputCompObj.getComponent(InputComponent);\n            if (!inputComp) {\n                console.warn('cursor component on object', this.object.name, 'was configured with handedness \"input component\", ' +\n                    'but object has no input component.');\n            }\n            else {\n                this.handedness = inputComp.handedness || 'none';\n                this._input = inputComp;\n            }\n        }\n        else {\n            this.handedness = ['left', 'right', 'none'][this.handedness - 1];\n        }\n        const viewObject = this.viewObject || this.object;\n        this._viewComponent = viewObject.getComponent(ViewComponent);\n        if (this.useWebXRHitTest) {\n            this._hitTestObject = this.engine.scene.addObject(this.object);\n            this._hitTestLocation =\n                this._hitTestObject.addComponent(HitTestLocation, {\n                    scaleObject: false,\n                }) ?? null;\n        }\n        this._onSessionStartCallback = this.setupVREvents.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this._onSessionStartCallback);\n        this.engine.onResize.add(this._onViewportResize);\n        this._setCursorVisibility(true);\n        /* If this object also has a view component, we will enable inverse-projected mouse clicks,\n         * otherwise just use the objects transformation */\n        if (this._viewComponent != null) {\n            const canvas = this.engine.canvas;\n            const onClick = this.onClick.bind(this);\n            const onPointerMove = this.onPointerMove.bind(this);\n            const onPointerDown = this.onPointerDown.bind(this);\n            const onPointerUp = this.onPointerUp.bind(this);\n            canvas.addEventListener('click', onClick);\n            canvas.addEventListener('pointermove', onPointerMove);\n            canvas.addEventListener('pointerdown', onPointerDown);\n            canvas.addEventListener('pointerup', onPointerUp);\n            this._onDeactivateCallbacks.push(() => {\n                canvas.removeEventListener('click', onClick);\n                canvas.removeEventListener('pointermove', onPointerMove);\n                canvas.removeEventListener('pointerdown', onPointerDown);\n                canvas.removeEventListener('pointerup', onPointerUp);\n            });\n        }\n        this._onViewportResize();\n    }\n    _setCursorRayTransform(hitPosition) {\n        if (!this.cursorRayObject)\n            return;\n        const dist = vec3.dist(this._origin, hitPosition);\n        this.cursorRayObject.setPositionLocal([0.0, 0.0, -dist / 2]);\n        if (this.cursorRayScalingAxis != 4) {\n            /* Scale only the requested axis, relative to the original scaling */\n            tempVec.fill(1);\n            tempVec[this.cursorRayScalingAxis] = dist / 2;\n            this.cursorRayObject.setScalingLocal(tempVec);\n        }\n    }\n    _setCursorVisibility(visible) {\n        if (this.visible == visible)\n            return;\n        this.visible = visible;\n        if (!this.cursorObject)\n            return;\n        if (visible) {\n            this.cursorObject.setScalingWorld(this._cursorObjScale);\n        }\n        else {\n            this.cursorObject.getScalingWorld(this._cursorObjScale);\n            this.cursorObject.scaleLocal([0, 0, 0]);\n        }\n    }\n    update() {\n        /* If in VR, set the cursor ray based on object transform */\n        /* Since Google Cardboard tap is registered as arTouchDown without a gamepad, we need to check for gamepad presence */\n        if (this.engine.xr &&\n            this._arTouchDown &&\n            this._input &&\n            this.engine.xr.session.inputSources[0].handedness === 'none' &&\n            this.engine.xr.session.inputSources[0].gamepad) {\n            /* WebXR AR input */\n            const p = this.engine.xr.session.inputSources[0].gamepad.axes;\n            /* Screenspace Y is inverted */\n            this._direction[0] = p[0];\n            this._direction[1] = -p[1];\n            this._direction[2] = -1.0;\n            this.applyTransformAndProjectDirection();\n        }\n        else if (this.engine.xr && this._input && this._input.xrInputSource) {\n            /* WebXR VR input */\n            this._direction[0] = 0;\n            this._direction[1] = 0;\n            this._direction[2] = -1.0;\n            this.applyTransformToDirection();\n        }\n        else if (this._viewComponent) {\n            /* Apply potentially changed transform to last stored pointer\n             * position */\n            this.updateDirection();\n        }\n        this.rayCast(null, this.engine.xr?.frame);\n        if (this.cursorObject) {\n            if (this.hoveringObject &&\n                (this.cursorPos[0] != 0 || this.cursorPos[1] != 0 || this.cursorPos[2] != 0)) {\n                this._setCursorVisibility(true);\n                this.cursorObject.setPositionWorld(this.cursorPos);\n                this._setCursorRayTransform(this.cursorPos);\n            }\n            else {\n                this._setCursorVisibility(false);\n            }\n        }\n    }\n    /* Returns the hovered cursor target, if available */\n    notify(event, originalEvent) {\n        const target = this.hoveringObject;\n        if (target) {\n            const cursorTarget = this.hoveringObjectTarget;\n            if (cursorTarget)\n                cursorTarget[event].notify(target, this, originalEvent ?? undefined);\n            this.globalTarget[event].notify(target, this, originalEvent ?? undefined);\n        }\n    }\n    hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent) {\n        /* Old API version does not return null for objects[0] if no hit */\n        const hit = !this.hoveringReality && rayHit.hitCount > 0 ? rayHit.objects[0] : null;\n        if (hit) {\n            if (!this.hoveringObject || !this.hoveringObject.equals(hit)) {\n                /* Unhover previous, if exists */\n                if (this.hoveringObject) {\n                    this.notify('onUnhover', originalEvent);\n                }\n                /* Hover new object */\n                this.hoveringObject = hit;\n                this.hoveringObjectTarget = this.hoveringObject.getComponent(CursorTarget);\n                if (this.styleCursor)\n                    this.engine.canvas.style.cursor = 'pointer';\n                this.notify('onHover', originalEvent);\n            }\n        }\n        else if (this.hoveringObject) {\n            /* Previously hovering object, now hovering nothing */\n            this.notify('onUnhover', originalEvent);\n            this.hoveringObject = null;\n            this.hoveringObjectTarget = null;\n            if (this.styleCursor)\n                this.engine.canvas.style.cursor = 'default';\n        }\n        if (this.hoveringObject) {\n            /* onDown/onUp for object */\n            if (this._isDown !== this._lastIsDown) {\n                this.notify(this._isDown ? 'onDown' : 'onUp', originalEvent);\n            }\n            /* onClick for object */\n            if (doClick)\n                this.notify('onClick', originalEvent);\n        }\n        else if (this.hoveringReality) {\n            /* onDown/onUp for hit test */\n            if (this._isDown !== this._lastIsDown) {\n                (this._isDown ? this.hitTestTarget.onDown : this.hitTestTarget.onUp).notify(hitTestResult, this, originalEvent ?? undefined);\n            }\n            /* onClick for hit test */\n            if (doClick)\n                this.hitTestTarget.onClick.notify(hitTestResult, this, originalEvent ?? undefined);\n        }\n        /* onMove */\n        if (hit) {\n            if (this.hoveringObject) {\n                this.hoveringObject.transformPointInverseWorld(tempVec, this.cursorPos);\n            }\n            else {\n                tempVec.set(this.cursorPos);\n            }\n            if (!vec3.equals(this._lastCursorPosOnTarget, tempVec)) {\n                this.notify('onMove', originalEvent);\n                this._lastCursorPosOnTarget.set(tempVec);\n            }\n        }\n        else if (this.hoveringReality) {\n            if (!vec3.equals(this._lastCursorPosOnTarget, this.cursorPos)) {\n                this.hitTestTarget.onMove.notify(hitTestResult, this, originalEvent ?? undefined);\n                this._lastCursorPosOnTarget.set(this.cursorPos);\n            }\n        }\n        else {\n            this._lastCursorPosOnTarget.set(this.cursorPos);\n        }\n        this._lastIsDown = this._isDown;\n    }\n    /**\n     * Setup event listeners on session object\n     * @param s WebXR session\n     *\n     * Sets up 'select' and 'end' events.\n     */\n    setupVREvents(s) {\n        if (!s)\n            console.error('setupVREvents called without a valid session');\n        /* Because we remove the callback in .active and another component might\n         * deactivate the cursor during onXRSessionStart, we make sure the cursor\n         * really is active when we run this */\n        if (!this.active)\n            return;\n        /* If in VR, one-time bind the listener */\n        const onSelect = this.onSelect.bind(this);\n        s.addEventListener('select', onSelect);\n        const onSelectStart = this.onSelectStart.bind(this);\n        s.addEventListener('selectstart', onSelectStart);\n        const onSelectEnd = this.onSelectEnd.bind(this);\n        s.addEventListener('selectend', onSelectEnd);\n        this._onDeactivateCallbacks.push(() => {\n            if (!this.engine.xr)\n                return;\n            s.removeEventListener('select', onSelect);\n            s.removeEventListener('selectstart', onSelectStart);\n            s.removeEventListener('selectend', onSelectEnd);\n        });\n        /* After AR session was entered, the projection matrix changed */\n        this._onViewportResize();\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this._onSessionStartCallback);\n        this.engine.onResize.remove(this._onViewportResize);\n        this._setCursorVisibility(false);\n        if (this.hoveringObject)\n            this.notify('onUnhover', null);\n        if (this.cursorRayObject)\n            this.cursorRayObject.setScalingLocal(ZERO);\n        /* Ensure all event listeners are removed */\n        for (const f of this._onDeactivateCallbacks)\n            f();\n        this._onDeactivateCallbacks.length = 0;\n    }\n    onDestroy() {\n        this._hitTestObject?.destroy();\n    }\n    /** 'select' event listener */\n    onSelect(e) {\n        if (e.inputSource.handedness != this.handedness)\n            return;\n        this.rayCast(e, e.frame, true);\n    }\n    /** 'selectstart' event listener */\n    onSelectStart(e) {\n        this._arTouchDown = true;\n        if (e.inputSource.handedness == this.handedness) {\n            this._isDown = true;\n            this.rayCast(e, e.frame);\n        }\n    }\n    /** 'selectend' event listener */\n    onSelectEnd(e) {\n        this._arTouchDown = false;\n        if (e.inputSource.handedness == this.handedness) {\n            this._isDown = false;\n            this.rayCast(e, e.frame);\n        }\n    }\n    /** 'pointermove' event listener */\n    onPointerMove(e) {\n        /* Don't care about secondary pointers */\n        if (!e.isPrimary)\n            return;\n        this.updateMousePos(e);\n        this.rayCast(e, null);\n    }\n    /** 'click' event listener */\n    onClick(e) {\n        this.updateMousePos(e);\n        this.rayCast(e, null, true);\n    }\n    /** 'pointerdown' event listener */\n    onPointerDown(e) {\n        /* Don't care about secondary pointers or non-left clicks */\n        if (!e.isPrimary || e.button !== 0)\n            return;\n        this.updateMousePos(e);\n        this._isDown = true;\n        this.rayCast(e);\n    }\n    /** 'pointerup' event listener */\n    onPointerUp(e) {\n        /* Don't care about secondary pointers or non-left clicks */\n        if (!e.isPrimary || e.button !== 0)\n            return;\n        this.updateMousePos(e);\n        this._isDown = false;\n        this.rayCast(e);\n    }\n    /**\n     * Update mouse position in non-VR mode and raycast for new position\n     * @returns @ref RayHit for new position.\n     */\n    updateMousePos(e) {\n        this._lastPointerPos[0] = e.clientX;\n        this._lastPointerPos[1] = e.clientY;\n        this.updateDirection();\n    }\n    updateDirection() {\n        const bounds = this.engine.canvas.getBoundingClientRect();\n        /* Get direction in normalized device coordinate space from mouse position */\n        const left = this._lastPointerPos[0] / bounds.width;\n        const top = this._lastPointerPos[1] / bounds.height;\n        this._direction[0] = left * 2 - 1;\n        this._direction[1] = -top * 2 + 1;\n        this._direction[2] = -1.0;\n        this.applyTransformAndProjectDirection();\n    }\n    applyTransformAndProjectDirection() {\n        /* Reverse-project the direction into view space */\n        vec3.transformMat4(this._direction, this._direction, this._projectionMatrix);\n        vec3.normalize(this._direction, this._direction);\n        this.applyTransformToDirection();\n    }\n    applyTransformToDirection() {\n        this.object.transformVectorWorld(this._direction, this._direction);\n        this.object.getPositionWorld(this._origin);\n    }\n    rayCast(originalEvent, frame = null, doClick = false) {\n        const rayHit = this.rayCastMode == 0\n            ? this.engine.scene.rayCast(this._origin, this._direction, this._collisionMask)\n            : this.engine.physics.rayCast(this._origin, this._direction, this._collisionMask, this.maxDistance);\n        let hitResultDistance = Infinity;\n        let hitTestResult = null;\n        if (this._hitTestLocation?.visible) {\n            this._hitTestObject.getPositionWorld(this.cursorPos);\n            hitResultDistance = vec3.distance(this.object.getPositionWorld(tempVec), this.cursorPos);\n            hitTestResult = this._hitTestLocation?.getHitTestResults(frame)[0];\n        }\n        let hoveringReality = false;\n        if (rayHit.hitCount > 0) {\n            const d = rayHit.distances[0];\n            if (hitResultDistance >= d) {\n                /* Override cursorPos set by hit test location */\n                this.cursorPos.set(rayHit.locations[0]);\n            }\n            else {\n                hoveringReality = true;\n            }\n        }\n        else if (hitResultDistance < Infinity) {\n            /* cursorPos already set */\n        }\n        else {\n            this.cursorPos.fill(0);\n        }\n        if (hoveringReality && !this.hoveringReality) {\n            this.hitTestTarget.onHover.notify(hitTestResult, this);\n        }\n        else if (!hoveringReality && this.hoveringReality) {\n            this.hitTestTarget.onUnhover.notify(hitTestResult, this);\n        }\n        this.hoveringReality = hoveringReality;\n        this.hoverBehaviour(rayHit, hitTestResult, doClick, originalEvent);\n        return rayHit;\n    }\n}\n__decorate([\n    property.int(1)\n], Cursor.prototype, \"collisionGroup\", void 0);\n__decorate([\n    property.object()\n], Cursor.prototype, \"cursorRayObject\", void 0);\n__decorate([\n    property.enum(['x', 'y', 'z', 'none'], 'z')\n], Cursor.prototype, \"cursorRayScalingAxis\", void 0);\n__decorate([\n    property.object()\n], Cursor.prototype, \"cursorObject\", void 0);\n__decorate([\n    property.enum(['input component', 'left', 'right', 'none'], 'input component')\n], Cursor.prototype, \"handedness\", void 0);\n__decorate([\n    property.object()\n], Cursor.prototype, \"inputObject\", void 0);\n__decorate([\n    property.object()\n], Cursor.prototype, \"viewObject\", void 0);\n__decorate([\n    property.enum(['collision', 'physx'], 'collision')\n], Cursor.prototype, \"rayCastMode\", void 0);\n__decorate([\n    property.float(100)\n], Cursor.prototype, \"maxDistance\", void 0);\n__decorate([\n    property.bool(true)\n], Cursor.prototype, \"styleCursor\", void 0);\n__decorate([\n    property.bool(false)\n], Cursor.prototype, \"useWebXRHitTest\", void 0);\nexport { Cursor };\n//# sourceMappingURL=cursor.js.map", "/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== \"undefined\" ? Float32Array : Array;\nexport var RANDOM = Math.random;\nexport var ANGLE_ORDER = \"zyx\";\n\n/**\n * Symmetric round\n * see https://www.npmjs.com/package/round-half-up-symmetric#user-content-detailed-background\n *\n * @param {Number} a value to round\n */\nexport function round(a) {\n  if (a >= 0) return Math.round(a);\n  return a % 0.5 === 0 ? Math.floor(a) : Math.round(a);\n}\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\nvar radian = 180 / Math.PI;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Convert Radian To Degree\n *\n * @param {Number} a Angle in Radians\n */\nexport function toDegree(a) {\n  return a * radian;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a          The first number to test.\n * @param {Number} b          The second number to test.\n * @param {Number} tolerance  Absolute or relative tolerance (default glMatrix.EPSILON)\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n  var tolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : EPSILON;\n  return Math.abs(a - b) <= tolerance * Math.max(1, Math.abs(a), Math.abs(b));\n}", "import * as glMatrix from \"./common.js\";\n\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n      a02 = a[2],\n      a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n  return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3 | null} out, or null if source matrix is not invertible\n */\nexport function invert(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20;\n\n  // Calculate the determinant\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function adjoint(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  var b00 = b[0],\n    b01 = b[1],\n    b02 = b[2];\n  var b10 = b[3],\n    b11 = b[4],\n    b12 = b[5];\n  var b20 = b[6],\n    b21 = b[7],\n    b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a10 = a[3],\n    a11 = a[4],\n    a12 = a[5],\n    a20 = a[6],\n    a21 = a[7],\n    a22 = a[8],\n    x = v[0],\n    y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a10 = a[3],\n    a11 = a[4],\n    a12 = a[5],\n    a20 = a[6],\n    a21 = a[7],\n    a22 = a[8],\n    s = Math.sin(rad),\n    c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n  var x = v[0],\n    y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n    c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\nexport function fromQuat(out, q) {\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2] + a[3] * a[3] + a[4] * a[4] + a[5] * a[5] + a[6] * a[6] + a[7] * a[7] + a[8] * a[8]);\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3],\n    a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7],\n    a8 = a[8];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n    var a12 = a[6],\n      a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4 | null} out, or null if source matrix is not invertible\n */\nexport function invert(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n  out[0] = a11 * b11 - a12 * b10 + a13 * b09;\n  out[1] = a02 * b10 - a01 * b11 - a03 * b09;\n  out[2] = a31 * b05 - a32 * b04 + a33 * b03;\n  out[3] = a22 * b04 - a21 * b05 - a23 * b03;\n  out[4] = a12 * b08 - a10 * b11 - a13 * b07;\n  out[5] = a00 * b11 - a02 * b08 + a03 * b07;\n  out[6] = a32 * b02 - a30 * b05 - a33 * b01;\n  out[7] = a20 * b05 - a22 * b02 + a23 * b01;\n  out[8] = a10 * b10 - a11 * b08 + a13 * b06;\n  out[9] = a01 * b08 - a00 * b10 - a03 * b06;\n  out[10] = a30 * b04 - a31 * b02 + a33 * b00;\n  out[11] = a21 * b02 - a20 * b04 - a23 * b00;\n  out[12] = a11 * b07 - a10 * b09 - a12 * b06;\n  out[13] = a00 * b09 - a01 * b07 + a02 * b06;\n  out[14] = a31 * b01 - a30 * b03 - a32 * b00;\n  out[15] = a20 * b03 - a21 * b01 + a22 * b00;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b0 = a00 * a11 - a01 * a10;\n  var b1 = a00 * a12 - a02 * a10;\n  var b2 = a01 * a12 - a02 * a11;\n  var b3 = a20 * a31 - a21 * a30;\n  var b4 = a20 * a32 - a22 * a30;\n  var b5 = a21 * a32 - a22 * a31;\n  var b6 = a00 * b5 - a01 * b4 + a02 * b3;\n  var b7 = a10 * b5 - a11 * b4 + a12 * b3;\n  var b8 = a20 * b2 - a21 * b1 + a22 * b0;\n  var b9 = a30 * b2 - a31 * b1 + a32 * b0;\n\n  // Calculate the determinant\n  return a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  // Cache only the current line of the second matrix\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n  return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n    y = axis[1],\n    z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11];\n\n  // Construct the elements of the rotation matrix\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n    y = axis[1],\n    z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *     let quatMat = mat4.create();\n *     mat4.fromQuat(quatMat, quat);\n *     mat4.multiply(dest, dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3],\n    ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw;\n  //Only scale if it makes sense\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion parameter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n  return out;\n}\n\n/**\n * Decomposes a transformation matrix into its rotation, translation\n * and scale components. Returns only the rotation component\n * @param  {quat} out_r Quaternion to receive the rotation component\n * @param  {vec3} out_t Vector to receive the translation vector\n * @param  {vec3} out_s Vector to receive the scaling factor\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @returns {quat} out_r\n */\nexport function decompose(out_r, out_t, out_s, mat) {\n  out_t[0] = mat[12];\n  out_t[1] = mat[13];\n  out_t[2] = mat[14];\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out_s[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out_s[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out_s[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  var is1 = 1 / out_s[0];\n  var is2 = 1 / out_s[1];\n  var is3 = 1 / out_s[2];\n  var sm11 = m11 * is1;\n  var sm12 = m12 * is2;\n  var sm13 = m13 * is3;\n  var sm21 = m21 * is1;\n  var sm22 = m22 * is2;\n  var sm23 = m23 * is3;\n  var sm31 = m31 * is1;\n  var sm32 = m32 * is2;\n  var sm33 = m33 * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out_r[3] = 0.25 * S;\n    out_r[0] = (sm23 - sm32) / S;\n    out_r[1] = (sm31 - sm13) / S;\n    out_r[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out_r[3] = (sm23 - sm32) / S;\n    out_r[0] = 0.25 * S;\n    out_r[1] = (sm12 + sm21) / S;\n    out_r[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out_r[3] = (sm31 - sm13) / S;\n    out_r[0] = (sm12 + sm21) / S;\n    out_r[1] = 0.25 * S;\n    out_r[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out_r[3] = (sm12 - sm21) / S;\n    out_r[0] = (sm31 + sm13) / S;\n    out_r[1] = (sm23 + sm32) / S;\n    out_r[2] = 0.25 * S;\n  }\n  return out_r;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *     let quatMat = mat4.create();\n *     mat4.fromQuat(quatMat, quat);\n *     mat4.multiply(dest, dest, quatMat);\n *     mat4.scale(dest, dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *     mat4.translate(dest, dest, origin);\n *     let quatMat = mat4.create();\n *     mat4.fromQuat(quatMat, quat);\n *     mat4.multiply(dest, dest, quatMat);\n *     mat4.scale(dest, dest, scale)\n *     mat4.translate(dest, dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    var nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\nexport var perspective = perspectiveNO;\n\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    var nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\nexport var ortho = orthoNO;\n\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} target Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n    eyey = eye[1],\n    eyez = eye[2],\n    upx = up[0],\n    upy = up[1],\n    upz = up[2];\n  var z0 = eyex - target[0],\n    z1 = eyey - target[1],\n    z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n  var x0 = upy * z2 - upz * z1,\n    x1 = upz * z0 - upx * z2,\n    x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2] + a[3] * a[3] + a[4] * a[4] + a[5] * a[5] + a[6] * a[6] + a[7] * a[7] + a[8] * a[8] + a[9] * a[9] + a[10] * a[10] + a[11] * a[11] + a[12] * a[12] + a[13] * a[13] + a[14] * a[14] + a[15] * a[15]);\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  var a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7];\n  var a8 = a[8],\n    a9 = a[9],\n    a10 = a[10],\n    a11 = a[11];\n  var a12 = a[12],\n    a13 = a[13],\n    a14 = a[14],\n    a15 = a[15];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  var b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7];\n  var b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11];\n  var b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n\n/**\n * Quaternion in the format XYZW\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n  return rad;\n}\n\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bx = b[0],\n    by = b[1],\n    bz = b[2],\n    bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bx = Math.sin(rad),\n    bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var by = Math.sin(rad),\n    bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bz = Math.sin(rad),\n    bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\nexport function calculateW(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\nexport function exp(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\nexport function ln(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bx = b[0],\n    by = b[1],\n    bz = b[2],\n    bw = b[3];\n  var omega, cosom, sinom, scale0, scale1;\n\n  // calc cosine\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  // adjust signs (if necessary)\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  }\n  // calculate coefficients\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  // calculate final values\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0;\n\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n  return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z using the provided intrinsic order for the conversion.\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x Angle to rotate around X axis in degrees.\n * @param {Number} y Angle to rotate around Y axis in degrees.\n * @param {Number} z Angle to rotate around Z axis in degrees.\n * @param {'xyz'|'xzy'|'yxz'|'yzx'|'zxy'|'zyx'} order Intrinsic order for conversion, default is zyx.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, x, y, z) {\n  var order = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : glMatrix.ANGLE_ORDER;\n  var halfToRad = Math.PI / 360;\n  x *= halfToRad;\n  z *= halfToRad;\n  y *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  switch (order) {\n    case \"xyz\":\n      out[0] = sx * cy * cz + cx * sy * sz;\n      out[1] = cx * sy * cz - sx * cy * sz;\n      out[2] = cx * cy * sz + sx * sy * cz;\n      out[3] = cx * cy * cz - sx * sy * sz;\n      break;\n    case \"xzy\":\n      out[0] = sx * cy * cz - cx * sy * sz;\n      out[1] = cx * sy * cz - sx * cy * sz;\n      out[2] = cx * cy * sz + sx * sy * cz;\n      out[3] = cx * cy * cz + sx * sy * sz;\n      break;\n    case \"yxz\":\n      out[0] = sx * cy * cz + cx * sy * sz;\n      out[1] = cx * sy * cz - sx * cy * sz;\n      out[2] = cx * cy * sz - sx * sy * cz;\n      out[3] = cx * cy * cz + sx * sy * sz;\n      break;\n    case \"yzx\":\n      out[0] = sx * cy * cz + cx * sy * sz;\n      out[1] = cx * sy * cz + sx * cy * sz;\n      out[2] = cx * cy * sz - sx * sy * cz;\n      out[3] = cx * cy * cz - sx * sy * sz;\n      break;\n    case \"zxy\":\n      out[0] = sx * cy * cz - cx * sy * sz;\n      out[1] = cx * sy * cz + sx * cy * sz;\n      out[2] = cx * cy * sz + sx * sy * cz;\n      out[3] = cx * cy * cz - sx * sy * sz;\n      break;\n    case \"zyx\":\n      out[0] = sx * cy * cz - cx * sy * sz;\n      out[1] = cx * sy * cz + sx * cy * sz;\n      out[2] = cx * cy * sz - sx * sy * cz;\n      out[3] = cx * cy * cz + sx * sy * sz;\n      break;\n    default:\n      throw new Error('Unknown angle order ' + order);\n  }\n  return out;\n}\n\n/**\n * Returns a string representation of a quaternion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nexport var clone = vec4.clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nexport var fromValues = vec4.fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport var copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport var set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport var add = vec4.add;\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport var scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport var dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\nexport var lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport var length = vec4.length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nexport var squaredLength = vec4.squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport var normalize = vec4.normalize;\n\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport var exactEquals = vec4.exactEquals;\n\n/**\n * Returns whether or not the quaternions point approximately to the same direction.\n *\n * Both quaternions are assumed to be unit length.\n *\n * @param {ReadonlyQuat} a The first unit quaternion.\n * @param {ReadonlyQuat} b The second unit quaternion.\n * @returns {Boolean} True if the quaternions are equal, false otherwise.\n */\nexport function equals(a, b) {\n  return Math.abs(vec4.dot(a, b)) >= 1 - glMatrix.EPSILON;\n}\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();", "import * as glMatrix from \"./common.js\";\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n\n/**\n * symmetric round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n  out[0] = glMatrix.round(a[0]);\n  out[1] = glMatrix.round(a[1]);\n  out[2] = glMatrix.round(a[2]);\n  return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2];\n  var bx = b[0],\n    by = b[1],\n    bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function slerp(out, a, b, t) {\n  var angle = Math.acos(Math.min(Math.max(dot(a, b), -1), 1));\n  var sinTotal = Math.sin(angle);\n  var ratioA = Math.sin((1 - t) * angle) / sinTotal;\n  var ratioB = Math.sin(t * angle) / sinTotal;\n  out[0] = ratioA * a[0] + ratioB * b[0];\n  out[1] = ratioA * a[1] + ratioB * b[1];\n  out[2] = ratioA * a[2] + ratioB * b[2];\n  return out;\n}\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n  scale = scale === undefined ? 1.0 : scale;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q normalized quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n  // Fast Vector Rotation using Quaternions by Robert Eisele\n  // https://raw.org/proof/vector-rotation-using-quaternions/\n\n  var qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3];\n  var vx = a[0],\n    vy = a[1],\n    vz = a[2];\n\n  // t = q x v\n  var tx = qy * vz - qz * vy;\n  var ty = qz * vx - qx * vz;\n  var tz = qx * vy - qy * vx;\n\n  // t = 2t\n  tx = tx + tx;\n  ty = ty + ty;\n  tz = tz + tz;\n\n  // v + w t + q x t\n  out[0] = vx + qw * tx + qy * tz - qz * ty;\n  out[1] = vy + qw * ty + qz * tx - qx * tz;\n  out[2] = vz + qw * tz + qx * ty - qy * tx;\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2];\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    bx = b[0],\n    by = b[1],\n    bz = b[2],\n    mag = Math.sqrt((ax * ax + ay * ay + az * az) * (bx * bx + by * by + bz * bz)),\n    cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport var sub = subtract;\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport var div = divide;\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport var dist = distance;\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport var sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n    if (!stride) {\n      stride = 3;\n    }\n    if (!offset) {\n      offset = 0;\n    }\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n\n/**\n * symmetric round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n  out[0] = glMatrix.round(a[0]);\n  out[1] = glMatrix.round(a[1]);\n  out[2] = glMatrix.round(a[2]);\n  out[3] = glMatrix.round(a[3]);\n  return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} out the receiving vector\n * @param {ReadonlyVec4} u the first vector\n * @param {ReadonlyVec4} v the second vector\n * @param {ReadonlyVec4} w the third vector\n * @returns {vec4} result\n */\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n    B = v[0] * w[2] - v[2] * w[0],\n    C = v[0] * w[3] - v[3] * w[0],\n    D = v[1] * w[2] - v[2] * w[1],\n    E = v[1] * w[3] - v[3] * w[1],\n    F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, scale) {\n  scale = scale === undefined ? 1.0 : scale;\n\n  // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n  var v1, v2, v3, v4;\n  var s1, s2;\n  var rand;\n  rand = glMatrix.RANDOM();\n  v1 = rand * 2 - 1;\n  v2 = (4 * glMatrix.RANDOM() - 2) * Math.sqrt(rand * -rand + rand);\n  s1 = v1 * v1 + v2 * v2;\n  rand = glMatrix.RANDOM();\n  v3 = rand * 2 - 1;\n  v4 = (4 * glMatrix.RANDOM() - 2) * Math.sqrt(rand * -rand + rand);\n  s2 = v3 * v3 + v4 * v4;\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q normalized quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n  // Fast Vector Rotation using Quaternions by Robert Eisele\n  // https://raw.org/proof/vector-rotation-using-quaternions/\n\n  var qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3];\n  var vx = a[0],\n    vy = a[1],\n    vz = a[2];\n\n  // t = q x v\n  var tx = qy * vz - qz * vy;\n  var ty = qz * vx - qx * vz;\n  var tz = qx * vy - qy * vx;\n\n  // t = 2t\n  tx = tx + tx;\n  ty = ty + ty;\n  tz = tz + tz;\n\n  // v + w t + q x t\n  out[0] = vx + qw * tx + qy * tz - qz * ty;\n  out[1] = vy + qw * ty + qz * tx - qx * tz;\n  out[2] = vz + qw * tz + qx * ty - qy * tx;\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport var sub = subtract;\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport var div = divide;\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport var dist = distance;\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport var sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n    if (!stride) {\n      stride = 4;\n    }\n    if (!offset) {\n      offset = 0;\n    }\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n\n/**\n * Dual Quaternion<br>\n * Format: [real, dual]<br>\n * Quaternion format: XYZW<br>\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\n * @module quat2\n */\n\n/**\n * Creates a new identity dual quat\n *\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\n */\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n  dq[3] = 1;\n  return dq;\n}\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat2} a dual quaternion to clone\n * @returns {quat2} new dual quaternion\n * @function\n */\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n\n/**\n * Creates a new dual quat initialized with the given values\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} new dual quaternion\n * @function\n */\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n\n/**\n * Creates a new dual quat from the given values (quat and translation)\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component (translation)\n * @param {Number} y2 Y component (translation)\n * @param {Number} z2 Z component (translation)\n * @returns {quat2} new dual quaternion\n * @function\n */\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n    ay = y2 * 0.5,\n    az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n\n/**\n * Creates a dual quat from a quaternion and a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q a normalized quaternion\n * @param {ReadonlyVec3} t translation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n    ay = t[1] * 0.5,\n    az = t[2] * 0.5,\n    bx = q[0],\n    by = q[1],\n    bz = q[2],\n    bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Creates a dual quat from a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyVec3} t translation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n\n/**\n * Creates a dual quat from a quaternion\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q the quaternion\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n\n/**\n * Creates a new dual quat from a matrix (4x4)\n *\n * @param {quat2} out the dual quaternion\n * @param {ReadonlyMat4} a the matrix\n * @returns {quat2} dual quat receiving operation result\n * @function\n */\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n\n/**\n * Copy the values from one dual quat to another\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the source dual quaternion\n * @returns {quat2} out\n * @function\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n\n/**\n * Set a dual quat to the identity dual quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @returns {quat2} out\n */\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n\n/**\n * Set the components of a dual quat to the given values\n *\n * @param {quat2} out the receiving quaternion\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} out\n * @function\n */\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n\n/**\n * Gets the real part of a dual quat\n * @param  {quat} out real part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} real part\n */\nexport var getReal = quat.copy;\n\n/**\n * Gets the dual part of a dual quat\n * @param  {quat} out dual part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} dual part\n */\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n\n/**\n * Set the real component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the real part\n * @returns {quat2} out\n * @function\n */\nexport var setReal = quat.copy;\n\n/**\n * Set the dual component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the dual part\n * @returns {quat2} out\n * @function\n */\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n\n/**\n * Gets the translation of a normalized dual quat\n * @param  {vec3} out translation\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\n * @return {vec3} translation\n */\nexport function getTranslation(out, a) {\n  var ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7],\n    bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n\n/**\n * Translates a dual quat by the given vector\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {quat2} out\n */\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n    ay1 = a[1],\n    az1 = a[2],\n    aw1 = a[3],\n    bx1 = v[0] * 0.5,\n    by1 = v[1] * 0.5,\n    bz1 = v[2] * 0.5,\n    ax2 = a[4],\n    ay2 = a[5],\n    az2 = a[6],\n    aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n\n/**\n * Rotates a dual quat around the X axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3],\n    ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7],\n    ax1 = ax * bw + aw * bx + ay * bz - az * by,\n    ay1 = ay * bw + aw * by + az * bx - ax * bz,\n    az1 = az * bw + aw * bz + ax * by - ay * bx,\n    aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n\n/**\n * Rotates a dual quat around the Y axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3],\n    ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7],\n    ax1 = ax * bw + aw * bx + ay * bz - az * by,\n    ay1 = ay * bw + aw * by + az * bx - ax * bz,\n    az1 = az * bw + aw * bz + ax * by - ay * bx,\n    aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n\n/**\n * Rotates a dual quat around the Z axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3],\n    ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7],\n    ax1 = ax * bw + aw * bx + ay * bz - az * by,\n    ay1 = ay * bw + aw * by + az * bx - ax * bz,\n    az1 = az * bw + aw * bz + ax * by - ay * bx,\n    aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n\n/**\n * Rotates a dual quat by a given quaternion (a * q)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @returns {quat2} out\n */\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3],\n    ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n\n/**\n * Rotates a dual quat by a given quaternion (q * a)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @returns {quat2} out\n */\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3],\n    bx = a[0],\n    by = a[1],\n    bz = a[2],\n    bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n\n/**\n * Rotates a dual quat around a given axis. Does the normalisation automatically\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @param {Number} rad how far the rotation should be\n * @returns {quat2} out\n */\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n  var axisLength = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n    ay1 = a[1],\n    az1 = a[2],\n    aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Adds two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n * @function\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n\n/**\n * Multiplies two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n */\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n    ay0 = a[1],\n    az0 = a[2],\n    aw0 = a[3],\n    bx1 = b[4],\n    by1 = b[5],\n    bz1 = b[6],\n    bw1 = b[7],\n    ax1 = a[4],\n    ay1 = a[5],\n    az1 = a[6],\n    aw1 = a[7],\n    bx0 = b[0],\n    by0 = b[1],\n    bz0 = b[2],\n    bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n\n/**\n * Alias for {@link quat2.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Scales a dual quat by a scalar number\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the dual quat to scale\n * @param {Number} b amount to scale the dual quat by\n * @returns {quat2} out\n * @function\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n\n/**\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\n *\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport var dot = quat.dot;\n\n/**\n * Performs a linear interpolation between two dual quats's\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat2} out\n */\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n\n/**\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\n * @returns {quat2} out\n */\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n\n/**\n * Calculates the conjugate of a dual quat\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\n * @returns {quat2} out\n */\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n\n/**\n * Calculates the length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate length of\n * @returns {Number} length of a\n * @function\n */\nexport var length = quat.length;\n\n/**\n * Alias for {@link quat2.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Calculates the squared length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nexport var squaredLength = quat.squaredLength;\n\n/**\n * Alias for {@link quat2.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Normalize a dual quat\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quaternion to normalize\n * @returns {quat2} out\n * @function\n */\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n  return out;\n}\n\n/**\n * Returns a string representation of a dual quaternion\n *\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\n * @returns {String} string representation of the dual quat\n */\nexport function str(a) {\n  return \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\n}\n\n/**\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat2} a the first dual quaternion.\n * @param {ReadonlyQuat2} b the second dual quaternion.\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n\n/**\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat2} a the first dual quat.\n * @param {ReadonlyQuat2} b the second dual quat.\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3],\n    a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Emitter } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\n/**\n * Sets up a [WebXR Device API \"Hit Test\"](https://immersive-web.github.io/hit-test/)\n * and places the object to the hit location.\n *\n * **Requirements:**\n *  - Specify `'hit-test'` in the required or optional features on the AR button in your html file.\n *    See [Wastepaperbin AR](/showcase/wpb-ar) as an example.\n */\nclass HitTestLocation extends Component {\n    static TypeName = 'hit-test-location';\n    tempScaling = new Float32Array(3);\n    visible = false;\n    xrHitTestSource = null;\n    /** Reference space for creating the hit test when the session starts */\n    xrReferenceSpace = null;\n    /**\n     * For maintaining backwards compatibility: Whether to scale the object to 0 and back.\n     * @deprecated Use onHitLost and onHitFound instead.\n     */\n    scaleObject = true;\n    /** Emits an event when the hit test switches from visible to invisible */\n    onHitLost = new Emitter();\n    /** Emits an event when the hit test switches from invisible to visible */\n    onHitFound = new Emitter();\n    onSessionStartCallback = null;\n    onSessionEndCallback = null;\n    start() {\n        this.onSessionStartCallback = this.onXRSessionStart.bind(this);\n        this.onSessionEndCallback = this.onXRSessionEnd.bind(this);\n        if (this.scaleObject) {\n            this.tempScaling.set(this.object.scalingLocal);\n            this.object.scale([0, 0, 0]);\n            this.onHitLost.add(() => {\n                this.tempScaling.set(this.object.scalingLocal);\n                this.object.scale([0, 0, 0]);\n            });\n            this.onHitFound.add(() => {\n                this.object.scalingLocal.set(this.tempScaling);\n                this.object.setDirty();\n            });\n        }\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.add(this.onSessionEndCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);\n    }\n    update() {\n        const wasVisible = this.visible;\n        if (this.xrHitTestSource) {\n            const frame = this.engine.xrFrame;\n            if (!frame)\n                return;\n            let hitTestResults = frame.getHitTestResults(this.xrHitTestSource);\n            if (hitTestResults.length > 0) {\n                let pose = hitTestResults[0].getPose(this.engine.xr.currentReferenceSpace);\n                this.visible = !!pose;\n                if (pose) {\n                    setXRRigidTransformLocal(this.object, pose.transform);\n                }\n            }\n            else {\n                this.visible = false;\n            }\n        }\n        /* Emit events for visible state change */\n        if (this.visible != wasVisible) {\n            (this.visible ? this.onHitFound : this.onHitLost).notify(this);\n        }\n    }\n    getHitTestResults(frame = this.engine.xr?.frame ?? null) {\n        if (!frame)\n            return [];\n        /* May happen if the hit test source couldn't be created */\n        if (!this.xrHitTestSource)\n            return [];\n        return frame.getHitTestResults(this.xrHitTestSource);\n    }\n    onXRSessionStart(session) {\n        if (session.requestHitTestSource === undefined) {\n            console.error('hit-test-location: hit test feature not available. Deactivating component.');\n            this.active = false;\n            return;\n        }\n        session\n            .requestHitTestSource({\n            space: this.xrReferenceSpace ??\n                this.engine.xr.referenceSpaceForType('viewer'),\n        })\n            .then((hitTestSource) => {\n            this.xrHitTestSource = hitTestSource;\n        })\n            .catch(console.error);\n    }\n    onXRSessionEnd() {\n        if (!this.xrHitTestSource)\n            return;\n        this.xrHitTestSource.cancel();\n        this.xrHitTestSource = null;\n    }\n}\n__decorate([\n    property.bool(true)\n], HitTestLocation.prototype, \"scaleObject\", void 0);\nexport { HitTestLocation };\n//# sourceMappingURL=hit-test-location.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { quat2 } from 'gl-matrix';\n/**\n * Prints some limited debug information about the object.\n *\n * Information consists of: This object's name, an object parameter's name,\n * the object's world translation, world transform and local transform.\n *\n * Mainly used by engine developers for debug purposes or as example code.\n */\nclass DebugObject extends Component {\n    static TypeName = 'debug-object';\n    /** A second object to print the name of */\n    obj = null;\n    start() {\n        let origin = new Float32Array(3);\n        quat2.getTranslation(origin, this.object.transformWorld);\n        console.log('Debug object:', this.object.name);\n        console.log('Other object:', this.obj?.name);\n        console.log('\\ttranslation', origin);\n        console.log('\\ttransformWorld', this.object.transformWorld);\n        console.log('\\ttransformLocal', this.object.transformLocal);\n    }\n}\n__decorate([\n    property.object()\n], DebugObject.prototype, \"obj\", void 0);\nexport { DebugObject };\n//# sourceMappingURL=debug-object.js.map", "import { Component } from '@wonderlandengine/api';\n/**\n * Function to convert a Euler in YXZ order to a quaternion\n */\nfunction quatFromEulerYXZDeg(out, x, y, z) {\n    const halfToRad = (0.5 * Math.PI) / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n    const c1 = Math.cos(x);\n    const c2 = Math.cos(y);\n    const c3 = Math.cos(z);\n    const s1 = Math.sin(x);\n    const s2 = Math.sin(y);\n    const s3 = Math.sin(z);\n    out[0] = s1 * c2 * c3 + c1 * s2 * s3;\n    out[1] = c1 * s2 * c3 - s1 * c2 * s3;\n    out[2] = c1 * c2 * s3 - s1 * s2 * c3;\n    out[3] = c1 * c2 * c3 + s1 * s2 * s3;\n}\n/**\n * Retrieve device orientation from a mobile device and set the object's\n * orientation accordingly.\n *\n * Useful for magic window experiences.\n */\nclass DeviceOrientationLook extends Component {\n    static TypeName = 'device-orientation-look';\n    static Properties = {};\n    rotationX = 0;\n    rotationY = 0;\n    lastClientX = -1;\n    lastClientY = -1;\n    /* Initialize device orientation with Identity Quaternion */\n    deviceOrientation = [0, 0, 0, 1];\n    screenOrientation = 0;\n    _origin = [0, 0, 0];\n    onActivate() {\n        this.screenOrientation = window.innerHeight > window.innerWidth ? 0 : 90;\n        window.addEventListener('deviceorientation', this.onDeviceOrientation);\n        window.addEventListener('orientationchange', this.onOrientationChange, false);\n    }\n    onDeactivate() {\n        window.removeEventListener('deviceorientation', this.onDeviceOrientation);\n        window.removeEventListener('orientationchange', this.onOrientationChange);\n    }\n    update() {\n        /* Don't use device orientation in VR */\n        if (this.engine.xr)\n            return;\n        this.object.getPositionLocal(this._origin);\n        this.object.resetTransform();\n        if (this.screenOrientation != 0) {\n            this.object.rotateAxisAngleDegLocal([0, 0, -1], this.screenOrientation);\n        }\n        this.object.rotateLocal([-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)]);\n        this.object.rotateLocal(this.deviceOrientation);\n        this.object.translateLocal(this._origin);\n    }\n    onDeviceOrientation = (e) => {\n        let alpha = e.alpha ?? 0;\n        let beta = e.beta ?? 0;\n        let gamma = e.gamma ?? 0;\n        quatFromEulerYXZDeg(this.deviceOrientation, beta, alpha, -gamma);\n    };\n    onOrientationChange = () => {\n        this.screenOrientation =\n            window.screen?.orientation.angle ?? window.orientation ?? 0;\n    };\n}\nexport { DeviceOrientationLook };\n//# sourceMappingURL=device-orientation-look.js.map", "import { CollisionComponent, Component } from '@wonderlandengine/api';\nimport { CursorTarget } from './cursor-target.js';\n/**\n * Enables interaction with cursor-targets through collision overlaps,\n * e.g. on the tip of a finger on a tracked hand.\n *\n * **Requirements:**\n *  - A collision component (usually a sphere with `0.05` radius) on the same object\n *\n * @since 0.8.5\n */\nclass FingerCursor extends Component {\n    static TypeName = 'finger-cursor';\n    lastTarget = null;\n    tip;\n    start() {\n        const collisionComponent = this.object.getComponent(CollisionComponent);\n        if (!collisionComponent) {\n            throw new Error(`Finger-cursor component on object '${this.object.name}' requires a collision component to work properly.`);\n        }\n        this.tip = collisionComponent;\n    }\n    update() {\n        const overlaps = this.tip.queryOverlaps();\n        let overlapFound = null;\n        for (let i = 0; i < overlaps.length; ++i) {\n            const o = overlaps[i].object;\n            const target = o.getComponent(CursorTarget);\n            if (target) {\n                if (!target.equals(this.lastTarget)) {\n                    target.onHover.notify(o, this);\n                    target.onClick.notify(o, this);\n                }\n                overlapFound = target;\n                break;\n            }\n        }\n        if (!overlapFound) {\n            if (this.lastTarget)\n                this.lastTarget.onUnhover.notify(this.lastTarget.object, this);\n            this.lastTarget = null;\n            return;\n        }\n        else {\n            this.lastTarget = overlapFound;\n        }\n    }\n}\nexport { FingerCursor };\n//# sourceMappingURL=finger-cursor.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\n/**\n * Applies [fixed foveation](https://www.w3.org/TR/webxrlayers-1/#dom-xrcompositionlayer-fixedfoveation)\n * once a WebXR session is started\n *\n * Fixed foveation reduces shading cost at the periphery by rendering at lower resolutions at the\n * edges of the users vision.\n */\nclass FixedFoveation extends Component {\n    static TypeName = 'fixed-foveation';\n    /** Amount to apply from 0 (none) to 1 (full) */\n    fixedFoveation;\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.setFixedFoveation);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.setFixedFoveation);\n    }\n    setFixedFoveation = () => {\n        this.engine.xr.baseLayer.fixedFoveation = this.fixedFoveation;\n    };\n}\n__decorate([\n    property.float(0.5)\n], FixedFoveation.prototype, \"fixedFoveation\", void 0);\nexport { FixedFoveation };\n//# sourceMappingURL=fixed-foveation.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, MeshComponent, } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { vec3, quat } from 'gl-matrix';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\nconst ORDERED_JOINTS = [\n    'wrist',\n    'thumb-metacarpal',\n    'thumb-phalanx-proximal',\n    'thumb-phalanx-distal',\n    'thumb-tip',\n    'index-finger-metacarpal',\n    'index-finger-phalanx-proximal',\n    'index-finger-phalanx-intermediate',\n    'index-finger-phalanx-distal',\n    'index-finger-tip',\n    'middle-finger-metacarpal',\n    'middle-finger-phalanx-proximal',\n    'middle-finger-phalanx-intermediate',\n    'middle-finger-phalanx-distal',\n    'middle-finger-tip',\n    'ring-finger-metacarpal',\n    'ring-finger-phalanx-proximal',\n    'ring-finger-phalanx-intermediate',\n    'ring-finger-phalanx-distal',\n    'ring-finger-tip',\n    'pinky-finger-metacarpal',\n    'pinky-finger-phalanx-proximal',\n    'pinky-finger-phalanx-intermediate',\n    'pinky-finger-phalanx-distal',\n    'pinky-finger-tip',\n];\nconst invTranslation = vec3.create();\nconst invRotation = quat.create();\nconst tempVec0 = vec3.create();\nconst tempVec1 = vec3.create();\n/**\n * Easy hand tracking through the WebXR Device API\n * [\"Hand Input\" API](https://immersive-web.github.io/webxr-hand-input/).\n *\n * Allows displaying hands either as sphere-joints or skinned mesh.\n *\n * To react to grabbing, use `this.isGrabbing()`. For other gestures, refer\n * to `this.joints` - an array of [Object3D](/jsapi/object3d) and use the joint\n * indices listed [in the WebXR Hand Input specification](https://immersive-web.github.io/webxr-hand-input/#skeleton-joints-section).\n *\n * It is often desired to use either hand tracking or controllers, not both.\n * This component provides `deactivateChildrenWithoutPose` to hide the hand\n * tracking visualization if no pose is available and `controllerToDeactivate`\n * for disabling another object once a hand tracking pose *is* available.\n * Outside of XR sessions, tracking or controllers are neither enabled nor disabled\n * to play well with the [vr-mode-active-switch](#vr-mode-active-switch) component.\n *\n * **Requirements:**\n *  - To use hand-tracking, enable \"joint tracking\" in `chrome://flags` on\n *    Oculus Browser for Oculus Quest/Oculus Quest 2.\n *\n * See [Hand Tracking Example](/showcase/hand-tracking).\n */\nclass HandTracking extends Component {\n    static TypeName = 'hand-tracking';\n    /** Handedness determining whether to receive tracking input from right or left hand */\n    handedness = 0;\n    /** (optional) Mesh to use to visualize joints */\n    jointMesh = null;\n    /** Material to use for display. Applied to either the spawned skinned mesh or the joint spheres. */\n    jointMaterial = null;\n    /** (optional) Skin to apply tracked joint poses to. If not present,\n     * joint spheres will be used for display instead. */\n    handSkin = null;\n    /** Deactivate children if no pose was tracked */\n    deactivateChildrenWithoutPose = true;\n    /** Controller objects to activate including children if no pose is available */\n    controllerToDeactivate = null;\n    init() {\n        this.handedness = ['left', 'right'][this.handedness];\n    }\n    joints = {};\n    session = null;\n    /* Whether last update had a hand pose */\n    hasPose = false;\n    _childrenActive = true;\n    start() {\n        if (!('XRHand' in window)) {\n            console.warn('WebXR Hand Tracking not supported by this browser.');\n            this.active = false;\n            return;\n        }\n        if (this.handSkin) {\n            const skin = this.handSkin;\n            const jointIds = skin.jointIds;\n            /* Map the wrist */\n            this.joints[ORDERED_JOINTS[0]] = this.engine.wrapObject(jointIds[0]);\n            /* Index in ORDERED_JOINTS that we are mapping to our joints */\n            /* Skip thumb0 joint, start at thumb1 */\n            for (let j = 0; j < jointIds.length; ++j) {\n                const joint = this.engine.wrapObject(jointIds[j]);\n                /* tip joints are only needed for joint rendering, so we skip those while mapping */\n                this.joints[joint.name] = joint;\n            }\n            /* If we have a hand skin, no need to spawn the joints-based one */\n            return;\n        }\n        /* Spawn joints */\n        const jointObjects = this.engine.scene.addObjects(ORDERED_JOINTS.length, this.object, ORDERED_JOINTS.length);\n        for (let j = 0; j < ORDERED_JOINTS.length; ++j) {\n            const joint = jointObjects[j];\n            joint.addComponent(MeshComponent, {\n                mesh: this.jointMesh,\n                material: this.jointMaterial,\n            });\n            this.joints[ORDERED_JOINTS[j]] = joint;\n            joint.name = ORDERED_JOINTS[j];\n        }\n    }\n    update(dt) {\n        if (!this.engine.xr)\n            return;\n        this.hasPose = false;\n        if (this.engine.xr.session.inputSources) {\n            for (let i = 0; i < this.engine.xr.session.inputSources.length; ++i) {\n                const inputSource = this.engine.xr.session.inputSources[i];\n                if (!inputSource?.hand || inputSource?.handedness != this.handedness)\n                    continue;\n                const wristSpace = inputSource.hand.get('wrist');\n                if (wristSpace) {\n                    const p = this.engine.xr.frame.getJointPose(wristSpace, this.engine.xr.currentReferenceSpace);\n                    if (p) {\n                        setXRRigidTransformLocal(this.object, p.transform);\n                    }\n                }\n                this.object.getRotationLocal(invRotation);\n                quat.conjugate(invRotation, invRotation);\n                this.object.getPositionLocal(invTranslation);\n                /* There is a bone 'wrist', but it just sits on the root\n                 * object. It could have an initial transform we want to\n                 * clear for skinning, though. */\n                this.joints['wrist'].resetTransform();\n                /* Wrist is already handled, so start at 1 */\n                for (let j = 0; j < ORDERED_JOINTS.length; ++j) {\n                    const jointName = ORDERED_JOINTS[j];\n                    const joint = this.joints[jointName];\n                    if (!joint)\n                        continue;\n                    let jointPose = null;\n                    const jointSpace = inputSource.hand.get(jointName);\n                    if (jointSpace) {\n                        jointPose = this.engine.xr.frame.getJointPose(jointSpace, this.engine.xr.currentReferenceSpace);\n                    }\n                    if (jointPose) {\n                        this.hasPose = true;\n                        joint.resetPositionRotation();\n                        joint.translateLocal([\n                            jointPose.transform.position.x - invTranslation[0],\n                            jointPose.transform.position.y - invTranslation[1],\n                            jointPose.transform.position.z - invTranslation[2],\n                        ]);\n                        joint.rotateLocal(invRotation);\n                        joint.rotateObject([\n                            jointPose.transform.orientation.x,\n                            jointPose.transform.orientation.y,\n                            jointPose.transform.orientation.z,\n                            jointPose.transform.orientation.w,\n                        ]);\n                        if (!this.handSkin) {\n                            /* Last joint radius of each finger is null */\n                            const r = jointPose.radius || 0.007;\n                            joint.setScalingLocal([r, r, r]);\n                        }\n                    }\n                }\n            }\n        }\n        if (!this.hasPose && this._childrenActive) {\n            this._childrenActive = false;\n            if (this.deactivateChildrenWithoutPose) {\n                this.setChildrenActive(false);\n            }\n            if (this.controllerToDeactivate) {\n                this.controllerToDeactivate.active = true;\n                this.setChildrenActive(true, this.controllerToDeactivate);\n            }\n        }\n        else if (this.hasPose && !this._childrenActive) {\n            this._childrenActive = true;\n            if (this.deactivateChildrenWithoutPose) {\n                this.setChildrenActive(true);\n            }\n            if (this.controllerToDeactivate) {\n                this.controllerToDeactivate.active = false;\n                this.setChildrenActive(false, this.controllerToDeactivate);\n            }\n        }\n    }\n    setChildrenActive(active, object) {\n        object = object || this.object;\n        const children = object.children;\n        for (const o of children) {\n            o.active = active;\n            this.setChildrenActive(active, o);\n        }\n    }\n    isGrabbing() {\n        this.joints['index-finger-tip'].getPositionLocal(tempVec0);\n        this.joints['thumb-tip'].getPositionLocal(tempVec1);\n        return vec3.sqrDist(tempVec0, tempVec1) < 0.001;\n    }\n}\n__decorate([\n    property.enum(['left', 'right'])\n], HandTracking.prototype, \"handedness\", void 0);\n__decorate([\n    property.mesh()\n], HandTracking.prototype, \"jointMesh\", void 0);\n__decorate([\n    property.material()\n], HandTracking.prototype, \"jointMaterial\", void 0);\n__decorate([\n    property.skin()\n], HandTracking.prototype, \"handSkin\", void 0);\n__decorate([\n    property.bool(true)\n], HandTracking.prototype, \"deactivateChildrenWithoutPose\", void 0);\n__decorate([\n    property.object()\n], HandTracking.prototype, \"controllerToDeactivate\", void 0);\nexport { HandTracking };\n//# sourceMappingURL=hand-tracking.js.map", "import { Component, Type } from '@wonderlandengine/api';\nimport { AudioListener } from '@wonderlandengine/spatial-audio';\n/**\n * Deprecated audio listener based on [Howler.js](https://howlerjs.com/).\n * @deprecated Use AudioListener (audio-listener) instead.\n */\nclass HowlerAudioListener extends AudioListener {\n    static TypeName = 'howler-audio-listener';\n}\nexport { HowlerAudioListener };\n//# sourceMappingURL=howler-audio-listener.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Emitter } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { _audioContext, AudioListener, _unlockAudioContext } from './audio-listener.js';\nimport { AudioChannel, PlayState } from './audio-manager.js';\nimport { MIN_RAMP_TIME, MIN_VOLUME } from './audio-players.js';\nexport var PanningType;\n(function (PanningType) {\n    PanningType[PanningType[\"None\"] = 0] = \"None\";\n    PanningType[PanningType[\"Regular\"] = 1] = \"Regular\";\n    PanningType[PanningType[\"Hrtf\"] = 2] = \"Hrtf\";\n})(PanningType || (PanningType = {}));\n/**\n * Constants\n */\nconst posVec = new Float32Array(3);\nconst oriVec = new Float32Array(3);\nconst distanceModels = ['linear', 'exponential', 'inverse'];\nconst bufferCache = new Map();\n/**\n * Loads the given audio into a AudioBuffer.\n *\n * @param source Path to the file that should be decoded\n * @returns A Promise that fulfills once the audio is decoded\n */\nexport async function loadAudio(source) {\n    const response = await fetch(source);\n    const arrayBuffer = await response.arrayBuffer();\n    const buffer = await _audioContext.decodeAudioData(arrayBuffer);\n    return buffer;\n}\n/**\n * Adds the specified file to cache.\n * @param source Path to the file that should be added to cache.\n * @warning This is for internal use only, use at own risk!\n */\nasync function addBufferToCache(source) {\n    let audio;\n    if (bufferCache.has(source)) {\n        audio = bufferCache.get(source);\n        audio.referenceCount += 1;\n    }\n    else {\n        audio = {\n            referenceCount: 1,\n            buffer: loadAudio(source), // Delay await until bufferCache is set, to avoid subsequent calls with same source to start decoding\n        };\n        bufferCache.set(source, audio);\n    }\n    return await audio.buffer;\n}\n/**\n * Removes the specified file from cache.\n *\n * @param source Path to the file that should be evicted from cache.\n * @warning This is for internal use only, use at own risk!\n */\nfunction removeBufferFromCache(source) {\n    if (!bufferCache.has(source)) {\n        return;\n    }\n    const audioFile = bufferCache.get(source);\n    if (audioFile.referenceCount > 1) {\n        audioFile.referenceCount -= 1;\n    }\n    else {\n        bufferCache.delete(source);\n    }\n}\n/**\n * Represents an audio src in the Wonderland Engine, allowing playback of audio files.\n */\nexport class AudioSource extends Component {\n    /**\n     * The type name for this component.\n     */\n    static TypeName = 'audio-source';\n    static onRegister(engine) {\n        engine.registerComponent(AudioListener);\n    }\n    /** Path to the audio file that should be played. */\n    src;\n    /**\n     * Volume of the audio source.\n     *\n     * @remarks This will only take effect audio that has not started playing yet. Is the audio already playing, use\n     * setVolumeDuringPlayback()\n     * @see setVolumeDuringPlayback\n     */\n    volume;\n    /** Whether to loop the sound. */\n    loop;\n    /** Whether to autoplay the sound. */\n    autoplay;\n    /**\n     * Select the panning method.\n     *\n     * @warning Enabling HRTF (Head-Related Transfer Function) is computationally more intensive than regular panning!\n     */\n    spatial;\n    /**\n     * Set this property if the object will never move.\n     * Disabling position updates each frame saves CPU time.\n     */\n    isStationary;\n    /** The distance model used for spatial audio. */\n    distanceModel;\n    /** The maximum distance for audio falloff. */\n    maxDistance;\n    /** The reference distance for audio falloff. */\n    refDistance;\n    /** The rolloff factor for audio falloff. */\n    rolloffFactor;\n    /** The inner angle of the audio cone. */\n    coneInnerAngle;\n    /** The outer angle of the audio cone. */\n    coneOuterAngle;\n    /** The outer gain of the audio cone. */\n    coneOuterGain;\n    /**\n     * The emitter will notify all subscribers when a state change occurs.\n     * @see PlayState\n     */\n    emitter = new Emitter();\n    _pannerOptions = {};\n    _buffer;\n    _pannerNode = new PannerNode(_audioContext);\n    _audioNode = new AudioBufferSourceNode(_audioContext);\n    _isPlaying = false;\n    _time = 0;\n    _gainNode = new GainNode(_audioContext);\n    /**\n     * Initializes the audio src component.\n     * If `autoplay` is enabled, the audio will start playing as soon as the file is loaded.\n     */\n    async start() {\n        this._gainNode.connect(_audioContext.destination);\n        if (this.src !== '') {\n            this._buffer = await addBufferToCache(this.src);\n            this.emitter.notify(PlayState.Ready);\n            if (this.autoplay) {\n                this.play();\n            }\n        }\n    }\n    setAudioChannel(am, channel) {\n        this.stop();\n        switch (channel) {\n            case AudioChannel.Music:\n                this._gainNode.disconnect();\n                this._gainNode.connect(am['_musicGain']);\n                break;\n            case AudioChannel.Sfx:\n                this._gainNode.disconnect();\n                this._gainNode.connect(am['_sfxGain']);\n                break;\n            case AudioChannel.Master:\n                this._gainNode.disconnect();\n                this._gainNode.connect(am['_masterGain']);\n                break;\n            default:\n                return;\n        }\n    }\n    /**\n     * Plays the audio associated with this audio src.\n     *\n     * @param buffer Optional parameter that will set the raw audio buffer that should be played. Defaults to internal audio buffer that is set with given audio path.\n     * @remarks Is this audio-source currently playing, playback will be restarted.\n     */\n    async play(buffer = this._buffer) {\n        if (this._isPlaying) {\n            this.stop();\n        }\n        else if (_audioContext.state === 'suspended') {\n            await _unlockAudioContext();\n        }\n        this._gainNode.gain.value = this.volume;\n        this._audioNode.buffer = buffer;\n        this._audioNode.loop = this.loop;\n        if (!this.spatial) {\n            this._audioNode.connect(this._gainNode);\n        }\n        else {\n            this._updateSettings();\n            /* PannerNodes can't be reused, as they will play at their last position for a short period */\n            this._pannerNode = new PannerNode(_audioContext, this._pannerOptions);\n            this._audioNode.connect(this._pannerNode).connect(this._gainNode);\n        }\n        this._audioNode.onended = () => this.stop();\n        this._audioNode.start();\n        this._isPlaying = true;\n        if (!this.isStationary) {\n            this.update = this._update.bind(this);\n        }\n        this.emitter.notify(PlayState.Playing);\n    }\n    /**\n     * Stops the audio associated with this audio src.\n     */\n    stop() {\n        if (!this._isPlaying)\n            return;\n        this._isPlaying = false;\n        this._audioNode.onended = null;\n        this._audioNode.stop();\n        this.update = undefined;\n        this._audioNode.disconnect();\n        this._pannerNode.disconnect();\n        this._audioNode = new AudioBufferSourceNode(_audioContext);\n        this.emitter.notify(PlayState.Stopped);\n    }\n    /**\n     * Checks if the audio src is currently playing.\n     */\n    get isPlaying() {\n        return this._isPlaying;\n    }\n    /**\n     * Changes the volume during playback.\n     * @param v Volume that source should have.\n     * @param t Optional parameter that specifies the time it takes for the volume to reach its specified value in\n     * seconds (Default is 0).\n     */\n    setVolumeDuringPlayback(v, t = 0) {\n        const volume = Math.max(MIN_VOLUME, v);\n        const time = _audioContext.currentTime + Math.max(MIN_RAMP_TIME, t);\n        this._gainNode.gain.linearRampToValueAtTime(volume, time);\n    }\n    /**\n     * Change out the source.\n     *\n     * @param path Path to the audio file.\n     */\n    async changeAudioSource(path) {\n        this._buffer = await addBufferToCache(path);\n        removeBufferFromCache(this.src);\n        this.src = path;\n    }\n    /**\n     * Called when the component is deactivated.\n     * Stops the audio playback.\n     */\n    onDeactivate() {\n        this.stop();\n    }\n    /**\n     * Called when the component is destroyed.\n     * Stops the audio playback and removes the src from cache.\n     */\n    onDestroy() {\n        this.stop();\n        this._gainNode.disconnect();\n        removeBufferFromCache(this.src);\n    }\n    _update(dt) {\n        this.object.getPositionWorld(posVec);\n        this.object.getForwardWorld(oriVec);\n        this._time = _audioContext.currentTime + dt;\n        this._pannerNode.positionX.linearRampToValueAtTime(posVec[0], this._time);\n        this._pannerNode.positionY.linearRampToValueAtTime(posVec[2], this._time);\n        this._pannerNode.positionZ.linearRampToValueAtTime(-posVec[1], this._time);\n        this._pannerNode.orientationX.linearRampToValueAtTime(oriVec[0], this._time);\n        this._pannerNode.orientationY.linearRampToValueAtTime(oriVec[2], this._time);\n        this._pannerNode.orientationZ.linearRampToValueAtTime(-oriVec[1], this._time);\n    }\n    /**\n     * @deprecated Use {@link #volume} instead\n     */\n    set maxVolume(v) {\n        this.volume = v;\n    }\n    /**\n     * @deprecated Use {@link #volume} instead\n     */\n    get maxVolume() {\n        return this.volume;\n    }\n    _updateSettings() {\n        this.object.getPositionWorld(posVec);\n        this.object.getForwardWorld(oriVec);\n        this._pannerOptions = {\n            coneInnerAngle: this.coneInnerAngle,\n            coneOuterAngle: this.coneOuterAngle,\n            coneOuterGain: this.coneOuterGain,\n            distanceModel: this._distanceModelSelector(),\n            maxDistance: this.maxDistance,\n            refDistance: this.refDistance,\n            rolloffFactor: this.rolloffFactor,\n            panningModel: this.spatial === PanningType.Hrtf ? 'HRTF' : 'equalpower',\n            positionX: posVec[0],\n            positionY: posVec[2],\n            positionZ: -posVec[1],\n            orientationX: oriVec[0],\n            orientationY: oriVec[2],\n            orientationZ: -oriVec[1],\n        };\n    }\n    _distanceModelSelector() {\n        if (distanceModels.includes(this.distanceModel)) {\n            return this.distanceModel;\n        }\n        return 'exponential';\n    }\n}\n__decorate([\n    property.string()\n], AudioSource.prototype, \"src\", void 0);\n__decorate([\n    property.float(1.0)\n], AudioSource.prototype, \"volume\", void 0);\n__decorate([\n    property.bool(false)\n], AudioSource.prototype, \"loop\", void 0);\n__decorate([\n    property.bool(false)\n], AudioSource.prototype, \"autoplay\", void 0);\n__decorate([\n    property.enum(['none', 'panning', 'hrtf'], PanningType.Regular)\n], AudioSource.prototype, \"spatial\", void 0);\n__decorate([\n    property.bool(false)\n], AudioSource.prototype, \"isStationary\", void 0);\n__decorate([\n    property.enum(['linear', 'inverse', 'exponential'], 'exponential')\n], AudioSource.prototype, \"distanceModel\", void 0);\n__decorate([\n    property.float(10000)\n], AudioSource.prototype, \"maxDistance\", void 0);\n__decorate([\n    property.float(1.0)\n], AudioSource.prototype, \"refDistance\", void 0);\n__decorate([\n    property.float(1.0)\n], AudioSource.prototype, \"rolloffFactor\", void 0);\n__decorate([\n    property.float(360)\n], AudioSource.prototype, \"coneInnerAngle\", void 0);\n__decorate([\n    property.float(0)\n], AudioSource.prototype, \"coneOuterAngle\", void 0);\n__decorate([\n    property.float(0)\n], AudioSource.prototype, \"coneOuterGain\", void 0);\n", "import { Component } from '@wonderlandengine/api';\nconst SAMPLE_RATE = 48000;\n/* 5ms for now, so it definitely takes less than one frame */\nconst FADE_DURATION = 5 / 1000;\nconst tempVec = new Float32Array(3);\nconst tempVec2 = new Float32Array(3);\n/**\n * Variables\n */\nlet _audioContext = null;\nif (window.AudioContext !== undefined) {\n    _audioContext = new AudioContext({\n        latencyHint: 'interactive',\n        sampleRate: SAMPLE_RATE,\n    });\n}\nexport { _audioContext };\n/**\n * Unlocks the WebAudio AudioContext.\n *\n * @returns a promise that fulfills when the audioContext resumes.\n * @remarks WebAudio AudioContext only resumes on user interaction.\n * @warning This is for internal use only, use at own risk!\n */\nexport async function _unlockAudioContext() {\n    return new Promise((resolve) => {\n        const unlockHandler = () => {\n            _audioContext.resume().then(() => {\n                window.removeEventListener('click', unlockHandler);\n                window.removeEventListener('touch', unlockHandler);\n                window.removeEventListener('keydown', unlockHandler);\n                window.removeEventListener('mousedown', unlockHandler);\n                resolve();\n            });\n        };\n        window.addEventListener('click', unlockHandler);\n        window.addEventListener('touch', unlockHandler);\n        window.addEventListener('keydown', unlockHandler);\n        window.addEventListener('mousedown', unlockHandler);\n    });\n}\n/**\n * Represents a Wonderland audio listener component.\n * Updates the position and orientation of a WebAudio listener instance.\n *\n * @remarks Only one listener should be active at a time.\n */\nexport class AudioListener extends Component {\n    static TypeName = 'audio-listener';\n    static Properties = {};\n    /**\n     * The WebAudio listener instance associated with this component.\n     */\n    listener = _audioContext.listener;\n    /**\n     * The time in which the last position update will be done.\n     */\n    time = 0;\n    start() {\n        /* Check if recommended functions are supported */\n        if ('positionX' in this.listener) {\n            /* supported */\n            this.update = this._updateRecommended.bind(this);\n        }\n        else {\n            /* unsupported */\n            this.update = this._updateDeprecated.bind(this);\n        }\n    }\n    _updateDeprecated() {\n        /* Set the position of the listener */\n        this.object.getPositionWorld(tempVec);\n        this.listener.setPosition(tempVec[0], tempVec[2], -tempVec[1]);\n        /* Set the orientation of the listener */\n        this.object.getForwardWorld(tempVec);\n        this.object.getUpWorld(tempVec2);\n        this.listener.setOrientation(tempVec[0], tempVec[2], -tempVec[1], tempVec2[0], tempVec2[2], -tempVec2[1]);\n    }\n    _updateRecommended() {\n        this.time = _audioContext.currentTime + FADE_DURATION;\n        /* Set the position of the listener */\n        this.object.getPositionWorld(tempVec);\n        this.listener.positionX.linearRampToValueAtTime(tempVec[0], this.time);\n        this.listener.positionY.linearRampToValueAtTime(tempVec[2], this.time);\n        this.listener.positionZ.linearRampToValueAtTime(-tempVec[1], this.time);\n        /* Set the facing direction of the listener */\n        this.object.getForwardWorld(tempVec);\n        this.listener.forwardX.linearRampToValueAtTime(tempVec[0], this.time);\n        this.listener.forwardY.linearRampToValueAtTime(tempVec[2], this.time);\n        this.listener.forwardZ.linearRampToValueAtTime(-tempVec[1], this.time);\n        /* Set the head orientation of the listener */\n        this.object.getUpWorld(tempVec);\n        this.listener.upX.linearRampToValueAtTime(tempVec[0], this.time);\n        this.listener.upY.linearRampToValueAtTime(tempVec[2], this.time);\n        this.listener.upZ.linearRampToValueAtTime(-tempVec[1], this.time);\n    }\n}\n", "import { _audioContext } from './audio-listener.js';\nimport { Emitter } from '@wonderlandengine/api';\nimport { BufferPlayer, DEF_VOL, MIN_RAMP_TIME, MIN_VOLUME } from './audio-players.js';\n/**\n * Enumerates the available channels within the AudioManager.\n * These channels can be utilized to regulate global volume.\n */\nexport var AudioChannel;\n(function (AudioChannel) {\n    /** Intended for sound effects. Connects to Master AudioChannel. */\n    AudioChannel[AudioChannel[\"Sfx\"] = 0] = \"Sfx\";\n    /** Intended for music. Connects to Master AudioChannel. */\n    AudioChannel[AudioChannel[\"Music\"] = 1] = \"Music\";\n    /** Connects directly to output. */\n    AudioChannel[AudioChannel[\"Master\"] = 2] = \"Master\";\n})(AudioChannel || (AudioChannel = {}));\n/**\n * Enumerates the possible states of playback for audio sources.\n */\nexport var PlayState;\n(function (PlayState) {\n    /** The source is ready to be played */\n    PlayState[PlayState[\"Ready\"] = 0] = \"Ready\";\n    /** The source has started playing */\n    PlayState[PlayState[\"Playing\"] = 1] = \"Playing\";\n    /** The source has stopped */\n    PlayState[PlayState[\"Stopped\"] = 2] = \"Stopped\";\n    /** The source has paused */\n    PlayState[PlayState[\"Paused\"] = 3] = \"Paused\";\n})(PlayState || (PlayState = {}));\n/**\n * Default number of internal players.\n */\nexport const DEF_PLAYER_COUNT = 32;\nconst SHIFT_AMOUNT = 16;\nconst MAX_NUMBER_OF_INSTANCES = (1 << SHIFT_AMOUNT) - 1;\nexport class AudioManager {\n    /** The emitter will notify all listeners about the PlayState of a unique ID.\n     *\n     * @remarks\n     * - READY will be emitted if all sources of a given source ID have loaded.\n     * - PLAYING / STOPPED / PAUSED are only emitted for play IDs that are returned by the play() method.\n     * - If you want to check the status for a source ID, convert the play ID of the message using the\n     *   getSourceIdFromPlayId() method.\n     *\n     * @see getSourceIdFromPlayId\n     * @example\n     * ```js\n     * const music = audioManager.play(Sounds.Music);\n     * audioManager.emitter.add((msg) => {\n     *    if (msg.id === music) {\n     *          console.log(msg.state);\n     *    }\n     * });\n     * ```\n     */\n    emitter = new Emitter();\n    /**\n     * Sets the random function the manager will use for selecting buffers.\n     *\n     * @remarks Default random function is Math.random()\n     * @param func Function that should be used for select the buffer.\n     */\n    randomBufferSelectFunction = Math.random;\n    /* Cache for decoded audio buffers */\n    _bufferCache = [];\n    /* Simple, fast cache for players */\n    _playerCache = [];\n    _playerCacheIndex = 0;\n    _amountOfFreePlayers = DEF_PLAYER_COUNT;\n    /* Counts how many times a sourceId has played. Resets to 0 after {@link MAX_NUMBER_OF_INSTANCES }. */\n    _instanceCounter = [];\n    _masterGain;\n    _musicGain;\n    _sfxGain;\n    _unlocked = false;\n    _autoplayStorage = [];\n    /**\n     * Constructs a AudioManager.\n     *\n     * Uses the default amount of players.\n     * @see DEF_PLAYER_COUNT\n     * @example\n     * ```js\n     * // AudioManager can't be constructed in a non-browser environment!\n     * export const am = window.AudioContext ? new AudioManager() : null!;\n     * ```\n     */\n    constructor() {\n        this._unlockAudioContext();\n        this._sfxGain = new GainNode(_audioContext);\n        this._masterGain = new GainNode(_audioContext);\n        this._musicGain = new GainNode(_audioContext);\n        this._sfxGain.connect(this._masterGain);\n        this._musicGain.connect(this._masterGain);\n        this._masterGain.connect(_audioContext.destination);\n        for (let i = 0; i < DEF_PLAYER_COUNT; i++) {\n            this._playerCache.push(new BufferPlayer(this));\n        }\n    }\n    async load(path, id) {\n        if (id < 0) {\n            console.error('audio-manager: Negative IDs are not valid! Skipping ${path}.');\n            return;\n        }\n        const paths = Array.isArray(path) ? path : [path];\n        if (!this._bufferCache[id]) {\n            this._bufferCache[id] = [];\n        }\n        this._instanceCounter[id] = -1;\n        for (let i = 0; i < paths.length; i++) {\n            const response = await fetch(paths[i]);\n            const arrayBuffer = await response.arrayBuffer();\n            const audioBuffer = await _audioContext.decodeAudioData(arrayBuffer);\n            this._bufferCache[id].push(audioBuffer);\n        }\n        /* Init the instanceCounter */\n        this._instanceCounter[id] = 0;\n        this.emitter.notify({ id: id, state: PlayState.Ready });\n    }\n    async loadBatch(...pair) {\n        return Promise.all(pair.map((p) => this.load(p[0], p[1])));\n    }\n    play(id, config) {\n        if (this._instanceCounter[id] == -1) {\n            console.warn(`audio-manager: Tried to play audio that is still decoding: ${id}`);\n            return -1;\n        }\n        const bufferList = this._bufferCache[id];\n        if (!bufferList) {\n            console.error(`audio-manager: No audio source is associated with identifier: ${id}`);\n            return -1;\n        }\n        if (!this._unlocked) {\n            return -1;\n        }\n        const player = this._getAvailablePlayer();\n        if (!player) {\n            console.warn(`audio-manager: All players are busy and no low priority player could be found to free up to play ${id}.`);\n            return -1;\n        }\n        const unique_id = this._generateUniqueId(id);\n        /* Decode playConfig */\n        if (config?.priority) {\n            /* Priority players get pushed to the end of the list and cant be retrieved to free up */\n            this._amountOfFreePlayers--;\n            let index = this._playerCache.indexOf(player);\n            this._playerCache.splice(index, 1);\n            this._playerCache.push(player);\n            player.priority = true;\n        }\n        else {\n            player.priority = false;\n        }\n        player.playId = unique_id;\n        player.buffer = this._selectRandomBuffer(bufferList);\n        player.looping = config?.loop ?? false;\n        player.position = config?.position;\n        player.playOffset = config?.playOffset ?? 0;\n        player.channel = config?.channel ?? AudioChannel.Sfx;\n        player.volume = config?.volume ?? DEF_VOL;\n        player.play();\n        return unique_id;\n    }\n    _playWithUniqueId(uniqueId, config) {\n        const id = this.getSourceIdFromPlayId(uniqueId);\n        const bufferList = this._bufferCache[id];\n        if (!bufferList) {\n            console.error(`audio-manager: No audio source is associated with identifier: ${id}`);\n            return;\n        }\n        const player = this._getAvailablePlayer();\n        if (!player) {\n            console.warn(`audio-manager: All players are busy and no low priority player could be found to free up.`);\n            return;\n        }\n        /* Decode playConfig */\n        if (config?.priority) {\n            /* Priority players get pushed to the end of the list and cant be retrievd to free up */\n            this._amountOfFreePlayers--;\n            let index = this._playerCache.indexOf(player);\n            this._playerCache.splice(index, 1);\n            this._playerCache.push(player);\n            player.priority = true;\n        }\n        else {\n            player.priority = false;\n        }\n        player.playId = uniqueId;\n        player.buffer = this._selectRandomBuffer(bufferList);\n        player.looping = config?.loop ?? false;\n        player.oneShot = config?.oneShot ?? false;\n        player.position = config?.position;\n        player.playOffset = config?.playOffset ?? 0;\n        player.channel = config?.channel ?? AudioChannel.Sfx;\n        player.volume = config?.volume ?? DEF_VOL;\n        player.play();\n    }\n    playOneShot(id, config) {\n        if (!config)\n            this.play(id, { oneShot: true });\n        config.loop = false;\n        config.priority = false;\n        config.oneShot = true;\n        this.play(id, config);\n    }\n    /**\n     * Advances the _playerCacheIndex and stops the player on that position.\n     *\n     * @returns A BufferPlayer with PlayState.Stopped, or undefined if no player can be stopped.\n     */\n    _getAvailablePlayer() {\n        if (this._amountOfFreePlayers < 1)\n            return;\n        /* Advance cache pointer */\n        this._playerCacheIndex = (this._playerCacheIndex + 1) % this._amountOfFreePlayers;\n        const player = this._playerCache[this._playerCacheIndex];\n        /* Make player available if unavailable */\n        player.stop();\n        return player;\n    }\n    autoplay(id, config) {\n        if (this._unlocked) {\n            return this.play(id, config);\n        }\n        const uniqueId = this._generateUniqueId(id);\n        this._autoplayStorage.push([uniqueId, config]);\n        return uniqueId;\n    }\n    stop(playId) {\n        this._playerCache.forEach((player) => {\n            if (player.playId === playId) {\n                player.stop();\n                return;\n            }\n        });\n    }\n    pause(playId) {\n        this._playerCache.forEach((player) => {\n            if (player.playId === playId) {\n                player.pause();\n                return;\n            }\n        });\n    }\n    resume(playId) {\n        this._playerCache.forEach((player) => {\n            if (player.playId === playId) {\n                player.resume();\n                return;\n            }\n        });\n    }\n    stopOneShots() {\n        this._playerCache.forEach((player) => {\n            if (player.oneShot) {\n                player.stop();\n                return;\n            }\n        });\n    }\n    resumeAll() {\n        this._playerCache.forEach((player) => {\n            player.resume();\n        });\n    }\n    pauseAll() {\n        this._playerCache.forEach((player) => {\n            player.pause();\n        });\n    }\n    stopAll() {\n        this._playerCache.forEach((player) => {\n            player.stop();\n        });\n    }\n    setGlobalVolume(channel, volume, time = 0) {\n        volume = Math.max(MIN_VOLUME, volume);\n        time = _audioContext.currentTime + Math.max(MIN_RAMP_TIME, time);\n        switch (channel) {\n            case AudioChannel.Music:\n                this._musicGain.gain.linearRampToValueAtTime(volume, time);\n                break;\n            case AudioChannel.Sfx:\n                this._sfxGain.gain.linearRampToValueAtTime(volume, time);\n                break;\n            case AudioChannel.Master:\n                this._masterGain.gain.linearRampToValueAtTime(volume, time);\n                break;\n            default:\n                return;\n        }\n    }\n    remove(id) {\n        if (id < 0)\n            return;\n        this.stop(id);\n        this._bufferCache[id] = undefined;\n        this._instanceCounter[id] = -1;\n    }\n    removeAll() {\n        this.stopAll();\n        this._bufferCache.length = 0;\n        this._instanceCounter.length = 0;\n    }\n    getSourceIdFromPlayId(playId) {\n        return playId >> SHIFT_AMOUNT;\n    }\n    get amountOfFreePlayers() {\n        return this._amountOfFreePlayers;\n    }\n    _selectRandomBuffer(bufferList) {\n        return bufferList[Math.floor(this.randomBufferSelectFunction() * bufferList.length)];\n    }\n    _generateUniqueId(id) {\n        let instanceCount = this._instanceCounter[id];\n        if (!instanceCount)\n            instanceCount = 0;\n        else if (instanceCount === -1)\n            return -1;\n        const unique_id = (id << SHIFT_AMOUNT) + instanceCount;\n        this._instanceCounter[id] = (instanceCount + 1) % MAX_NUMBER_OF_INSTANCES;\n        return unique_id;\n    }\n    /**\n     * @warning This function is for internal use only!\n     */\n    _returnPriorityPlayer(player) {\n        if (!player.priority)\n            return;\n        /* We start looking from the back, because priority players are always in the back */\n        for (let i = this._playerCache.length - 1; i >= 0; i--) {\n            if (this._playerCache[i] === player) {\n                this._playerCache.splice(i, 1);\n                this._playerCache.unshift(player);\n                this._amountOfFreePlayers++;\n                return;\n            }\n        }\n    }\n    _unlockAudioContext() {\n        const unlockHandler = () => {\n            _audioContext.resume().then(() => {\n                window.removeEventListener('click', unlockHandler);\n                window.removeEventListener('touch', unlockHandler);\n                window.removeEventListener('keydown', unlockHandler);\n                window.removeEventListener('mousedown', unlockHandler);\n                this._unlocked = true;\n                for (const audio of this._autoplayStorage) {\n                    this._playWithUniqueId(audio[0], audio[1]);\n                }\n                this._autoplayStorage.length = 0;\n            });\n        };\n        window.addEventListener('click', unlockHandler);\n        window.addEventListener('touch', unlockHandler);\n        window.addEventListener('keydown', unlockHandler);\n        window.addEventListener('mousedown', unlockHandler);\n    }\n}\nexport class EmptyAudioManager {\n    async load(path, id) { }\n    async loadBatch(...pair) { }\n    play(id, config) {\n        return -1;\n    }\n    playOneShot(id, config) { }\n    autoplay(id, config) {\n        return -1;\n    }\n    stop(playId) { }\n    pause(playId) { }\n    resume(playId) { }\n    stopOneShots() { }\n    resumeAll() { }\n    pauseAll() { }\n    stopAll() { }\n    setGlobalVolume(channel, volume, time) { }\n    remove(id) { }\n    removeAll() { }\n    getSourceIdFromPlayId(playId) {\n        return -1;\n    }\n    get amountOfFreePlayers() {\n        return -1;\n    }\n}\n/**\n * Global instance of a AudioManager.\n *\n * @remarks\n * To construct an AudioManager, the WebAudio API is needed. For non-browser environments, like during the packaging\n * step of the wonderland editor, the globalAudioManager is set to an `EmptyAudioManager`.\n * It enables the usage of `load()` and `loadBatch()` in top-level code.\n *\n * @warning\n * \u26A0\uFE0F Only load() and loadBatch() can be used in top-level code \u26A0\uFE0F\n */\nexport const globalAudioManager = window.AudioContext\n    ? new AudioManager()\n    : new EmptyAudioManager();\n", "import { _audioContext } from './audio-listener.js';\nimport { AudioChannel, PlayState } from './audio-manager.js';\n/* Ramp times of 0 cause a click, 5 ms should be sufficient */\nexport const MIN_RAMP_TIME = 5 / 1000;\n/* Needed because WebAudio ramp function doesn't accept 0 as valid volume */\nexport const MIN_VOLUME = 0.001;\nexport const DEF_VOL = 1.0;\nconst DEFAULT_PANNER_CONFIG = {\n    coneInnerAngle: 360,\n    coneOuterAngle: 0,\n    coneOuterGain: 0,\n    distanceModel: 'exponential',\n    maxDistance: 10000,\n    refDistance: 1.0,\n    rolloffFactor: 1.0,\n    panningModel: 'HRTF',\n    positionX: 0,\n    positionY: 0,\n    positionZ: 1,\n    orientationX: 0,\n    orientationY: 0,\n    orientationZ: 1,\n};\nexport class BufferPlayer {\n    playId = -1;\n    buffer = _audioContext.createBuffer(1, _audioContext.sampleRate, _audioContext.sampleRate);\n    looping = false;\n    position;\n    priority = false;\n    playOffset = 0;\n    channel = AudioChannel.Sfx;\n    volume = DEF_VOL;\n    oneShot = false;\n    _gainNode = new GainNode(_audioContext);\n    _pannerNode = new PannerNode(_audioContext, DEFAULT_PANNER_CONFIG);\n    _audioNode = new AudioBufferSourceNode(_audioContext);\n    _pannerOptions = DEFAULT_PANNER_CONFIG;\n    _playState = PlayState.Stopped;\n    _timeStamp = 0;\n    _audioManager;\n    /**\n     * Constructs a BufferPlayer.\n     *\n     * @warning This is for internal use only. BufferPlayer's should only be created and used inside the AudioManager.\n     * @param audioManager Manager that manages this player.\n     */\n    constructor(audioManager) {\n        this._audioManager = audioManager;\n    }\n    play() {\n        if (this._playState === PlayState.Playing) {\n            this.stop();\n        }\n        switch (this.channel) {\n            case AudioChannel.Music:\n                this._gainNode.connect(this._audioManager['_musicGain']);\n                break;\n            case AudioChannel.Master:\n                this._gainNode.connect(this._audioManager['_masterGain']);\n                break;\n            default:\n                this._gainNode.connect(this._audioManager['_sfxGain']);\n        }\n        this._gainNode.gain.value = this.volume;\n        this._audioNode.buffer = this.buffer;\n        this._audioNode.loop = this.looping;\n        if (this.position) {\n            this._pannerOptions.positionX = this.position[0];\n            this._pannerOptions.positionY = this.position[2];\n            this._pannerOptions.positionZ = -this.position[1];\n            /* This is a workaround! We cant re-use panner nodes because they don't update fast enough when\n             reconnecting */\n            this._pannerNode = new PannerNode(_audioContext, this._pannerOptions);\n            this._audioNode.connect(this._pannerNode).connect(this._gainNode);\n        }\n        else {\n            this._audioNode.connect(this._gainNode);\n        }\n        this._audioNode.start(0, this.playOffset);\n        this._timeStamp = _audioContext.currentTime - this.playOffset;\n        this._audioNode.onended = () => this.stop();\n        this._playState = PlayState.Playing;\n        this.emitState();\n    }\n    emitState() {\n        this._audioManager.emitter.notify({ id: this.playId, state: this._playState });\n    }\n    /**\n     * Stops current playback and sends notification on the audio managers emitter.\n     */\n    stop() {\n        if (this._playState === PlayState.Stopped)\n            return;\n        this._resetWebAudioNodes();\n        if (this.priority) {\n            this._audioManager._returnPriorityPlayer(this);\n        }\n        this._playState = PlayState.Stopped;\n        this.emitState();\n    }\n    pause() {\n        if (this._playState !== PlayState.Playing)\n            return;\n        this.playOffset =\n            (_audioContext.currentTime - this._timeStamp) % this.buffer.duration;\n        this._resetWebAudioNodes();\n        this._playState = PlayState.Paused;\n        this.emitState();\n    }\n    resume() {\n        if (this._playState !== PlayState.Paused)\n            return;\n        this.play();\n    }\n    _resetWebAudioNodes() {\n        this._audioNode.onended = null;\n        this._audioNode.stop();\n        this._audioNode.disconnect();\n        this._pannerNode.disconnect();\n        this._gainNode.disconnect();\n        this._audioNode = new AudioBufferSourceNode(_audioContext);\n    }\n}\n", "import { Component, Type } from '@wonderlandengine/api';\nimport { AudioSource } from '@wonderlandengine/spatial-audio';\n/**\n * Deprecated audio source based on [Howler.js](https://howlerjs.com/).\n * @deprecated Use AudioSource (audio-source) instead.\n */\nclass HowlerAudioSource extends AudioSource {\n    static TypeName = 'howler-audio-source';\n}\nexport { HowlerAudioSource };\n//# sourceMappingURL=howler-audio-source.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { setFirstMaterialTexture } from './utils/utils.js';\nimport { property } from '@wonderlandengine/api/decorators.js';\n/**\n * Downloads an image from URL and applies it as `diffuseTexture` or `flatTexture`\n * to an attached mesh component.\n *\n * Materials from the following shaders are supported:\n *  - \"Phong Opaque Textured\"\n *  - \"Flat Opaque Textured\"\n *  - \"Background\"\n *  - \"Physical Opaque Textured\"\n *  - \"Foliage\"\n */\nclass ImageTexture extends Component {\n    static TypeName = 'image-texture';\n    /** URL to download the image from */\n    url;\n    /** Material to apply the video texture to */\n    material;\n    /** Name of the texture property to set */\n    textureProperty;\n    texture;\n    start() {\n        this.engine.textures\n            .load(this.url, 'anonymous')\n            .then((texture) => {\n            this.texture = texture;\n            const mat = this.material;\n            if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {\n                console.error('Pipeline', mat.pipeline, 'not supported by image-texture');\n            }\n        })\n            .catch(console.error);\n    }\n    onDestroy() {\n        this.texture?.destroy();\n    }\n}\n__decorate([\n    property.string()\n], ImageTexture.prototype, \"url\", void 0);\n__decorate([\n    property.material({ required: true })\n], ImageTexture.prototype, \"material\", void 0);\n__decorate([\n    property.string('auto')\n], ImageTexture.prototype, \"textureProperty\", void 0);\nexport { ImageTexture };\n//# sourceMappingURL=image-texture.js.map", "/**\n * Set the diffuse/flat texture of known pipelines.\n *\n * @param mat Material to set the texture on\n * @param texture Texture to set\n * @param customTextureProperty Texture property to set or `'auto'` to automatically\n *      detect the right texture property based on known pipeline.\n * @returns `true` if the property was set, `false` otherwise.\n */\nexport function setFirstMaterialTexture(mat, texture, customTextureProperty) {\n    if (customTextureProperty !== 'auto') {\n        // @ts-ignore\n        mat[customTextureProperty] = texture;\n        return true;\n    }\n    const shader = mat.shader;\n    if (shader === 'Flat Opaque Textured') {\n        // @ts-ignore\n        mat.flatTexture = texture;\n        return true;\n    }\n    else if (shader === 'Phong Opaque Textured' ||\n        shader === 'Foliage' ||\n        shader === 'Phong Normalmapped' ||\n        shader === 'Phong Lightmapped') {\n        // @ts-ignore\n        mat.diffuseTexture = texture;\n        return true;\n    }\n    else if (shader === 'Particle') {\n        // @ts-ignore\n        mat.mainTexture = texture;\n        return true;\n    }\n    else if (shader === 'DistanceFieldVector') {\n        // @ts-ignore\n        mat.vectorTexture = texture;\n        return true;\n    }\n    else if (shader === 'Background' || shader === 'Sky') {\n        // @ts-ignore\n        mat.texture = texture;\n        return true;\n    }\n    else if (shader === 'Physical Opaque Textured') {\n        // @ts-ignore\n        mat.albedoTexture = texture;\n        return true;\n    }\n    return false;\n}\nexport function deg2rad(value) {\n    return value * Math.PI / 180.0;\n}\nexport function rad2deg(value) {\n    return (value * 180.0) / Math.PI;\n}\n//# sourceMappingURL=utils.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { quat } from 'gl-matrix';\nconst preventDefault = (e) => { e.preventDefault(); };\nconst TEMP_ROT = new Float32Array(4);\nconst ROT_MUL = 180 / Math.PI / 100;\n/**\n * Controls the camera orientation through mouse movement.\n *\n * Efficiently implemented to affect object orientation only\n * when the mouse moves.\n */\nclass MouseLookComponent extends Component {\n    static TypeName = 'mouse-look';\n    /** Mouse look sensitivity */\n    sensitity = 0.25;\n    /** Require a mouse button to be pressed to control view.\n     * Otherwise view will allways follow mouse movement */\n    requireMouseDown = true;\n    /** If \"moveOnClick\" is enabled, mouse button which should\n     * be held down to control view */\n    mouseButtonIndex = 0;\n    /** Enables pointer lock on \"mousedown\" event on canvas */\n    pointerLockOnClick = false;\n    currentRotationY = 0;\n    currentRotationX = 0;\n    mouseDown = false;\n    onActivate() {\n        document.addEventListener('mousemove', this.onMouseMove);\n        const canvas = this.engine.canvas;\n        if (this.pointerLockOnClick) {\n            canvas.addEventListener('mousedown', this.requestPointerLock);\n        }\n        if (this.requireMouseDown) {\n            if (this.mouseButtonIndex === 2) {\n                canvas.addEventListener('contextmenu', preventDefault, false);\n            }\n            canvas.addEventListener('mousedown', this.onMouseDown);\n            canvas.addEventListener('mouseup', this.onMouseUp);\n        }\n    }\n    onDeactivate() {\n        document.removeEventListener('mousemove', this.onMouseMove);\n        const canvas = this.engine.canvas;\n        if (this.pointerLockOnClick) {\n            canvas.removeEventListener('mousedown', this.requestPointerLock);\n        }\n        if (this.requireMouseDown) {\n            if (this.mouseButtonIndex === 2) {\n                canvas.removeEventListener('contextmenu', preventDefault, false);\n            }\n            canvas.removeEventListener('mousedown', this.onMouseDown);\n            canvas.removeEventListener('mouseup', this.onMouseUp);\n        }\n    }\n    requestPointerLock = () => {\n        const canvas = this.engine.canvas;\n        canvas.requestPointerLock =\n            canvas.requestPointerLock ||\n                canvas.mozRequestPointerLock ||\n                canvas.webkitRequestPointerLock;\n        canvas.requestPointerLock();\n    };\n    onMouseDown = (e) => {\n        if (e.button === this.mouseButtonIndex) {\n            this.mouseDown = true;\n            document.body.style.cursor = 'grabbing';\n            if (e.button === 1) {\n                e.preventDefault();\n                /* Prevent scrolling */\n                return false;\n            }\n        }\n    };\n    onMouseUp = (e) => {\n        if (e.button === this.mouseButtonIndex) {\n            this.mouseDown = false;\n            document.body.style.cursor = 'initial';\n        }\n    };\n    onMouseMove = (e) => {\n        if (this.active && (this.mouseDown || !this.requireMouseDown)) {\n            this.currentRotationX += (-this.sensitity * e.movementY) * ROT_MUL;\n            this.currentRotationY += (-this.sensitity * e.movementX) * ROT_MUL;\n            // 89 deg instead of 90 so that there are no camera glitches\n            // when looking straight down/up\n            this.currentRotationX = Math.max(-89, Math.min(89, this.currentRotationX));\n            quat.fromEuler(TEMP_ROT, this.currentRotationX, this.currentRotationY, 0);\n            this.object.setRotationLocal(TEMP_ROT);\n        }\n    };\n}\n__decorate([\n    property.float(0.25)\n], MouseLookComponent.prototype, \"sensitity\", void 0);\n__decorate([\n    property.bool(true)\n], MouseLookComponent.prototype, \"requireMouseDown\", void 0);\n__decorate([\n    property.int()\n], MouseLookComponent.prototype, \"mouseButtonIndex\", void 0);\n__decorate([\n    property.bool(false)\n], MouseLookComponent.prototype, \"pointerLockOnClick\", void 0);\nexport { MouseLookComponent };\n//# sourceMappingURL=mouse-look.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\n/**\n * Set player height for a Y-offset above the ground for\n * 'local' and 'viewer' reference spaces.\n */\nclass PlayerHeight extends Component {\n    static TypeName = 'player-height';\n    height = 1.75;\n    onSessionStartCallback;\n    onSessionEndCallback;\n    start() {\n        this.object.resetPositionRotation();\n        this.object.translateLocal([0.0, this.height, 0.0]);\n        this.onSessionStartCallback = this.onXRSessionStart.bind(this);\n        this.onSessionEndCallback = this.onXRSessionEnd.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.add(this.onSessionEndCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);\n    }\n    onXRSessionStart() {\n        const type = this.engine.xr?.currentReferenceSpaceType;\n        if (type !== 'local' && type !== 'viewer') {\n            this.object.resetPositionRotation();\n        }\n    }\n    onXRSessionEnd() {\n        const type = this.engine.xr?.currentReferenceSpaceType;\n        if (type !== 'local' && type !== 'viewer') {\n            this.object.resetPositionRotation();\n            this.object.translateLocal([0.0, this.height, 0.0]);\n        }\n    }\n}\n__decorate([\n    property.float(1.75)\n], PlayerHeight.prototype, \"height\", void 0);\nexport { PlayerHeight };\n//# sourceMappingURL=player-height.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\n/**\n * Sets the target framerate\n *\n * [Updates the target framerate](https://immersive-web.github.io/webxr/#dom-xrsession-updatetargetframerate)\n * to the closest [supported target framerate](https://immersive-web.github.io/webxr/#dom-xrsession-supportedFrameRates)\n * to the given `framerate`.\n *\n * The target framerate is used for the device's VR compositor as an indication of how often to refresh the\n * screen with new images. This means the app will be asked to produce frames in more regular intervals,\n * potentially spending less time on frames that are likely to be dropped.\n *\n * For apps with heavy load, setting a well matching target framerate can improve the apps rendering stability\n * and reduce stutter.\n *\n * Likewise, the target framerate can be used to enable 120Hz refresh rates on Oculus Quest 2 on simpler apps.\n */\nclass TargetFramerate extends Component {\n    static TypeName = 'target-framerate';\n    framerate;\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.setTargetFramerate);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.setTargetFramerate);\n    }\n    setTargetFramerate = (s) => {\n        if (s.supportedFrameRates) {\n            const a = s.supportedFrameRates;\n            a.sort((a, b) => Math.abs(a - this.framerate) - Math.abs(b - this.framerate));\n            s.updateTargetFrameRate(a[0]);\n        }\n    };\n}\n__decorate([\n    property.float(90.0)\n], TargetFramerate.prototype, \"framerate\", void 0);\nexport { TargetFramerate };\n//# sourceMappingURL=target-framerate.js.map", "import { vec3, quat2 } from 'gl-matrix';\nimport { Component, Type } from '@wonderlandengine/api';\n/**\n * Teleport VR locomotion.\n *\n * See [Teleport Example](/showcase/teleport).\n */\nclass TeleportComponent extends Component {\n    static TypeName = 'teleport';\n    static Properties = {\n        /** Object that will be placed as indiciation forwhere the player will teleport to. */\n        teleportIndicatorMeshObject: { type: Type.Object },\n        /** Root of the player, the object that will be positioned on teleportation. */\n        camRoot: { type: Type.Object },\n        /** Non-vr camera for use outside of VR */\n        cam: { type: Type.Object },\n        /** Left eye for use in VR*/\n        eyeLeft: { type: Type.Object },\n        /** Right eye for use in VR*/\n        eyeRight: { type: Type.Object },\n        /** Handedness for VR cursors to accept trigger events only from respective controller. */\n        handedness: {\n            type: Type.Enum,\n            values: ['input component', 'left', 'right', 'none'],\n            default: 'input component',\n        },\n        /** Collision group of valid \"floor\" objects that can be teleported on */\n        floorGroup: { type: Type.Int, default: 1 },\n        /** How far the thumbstick needs to be pushed to have the teleport target indicator show up */\n        thumbstickActivationThreshhold: { type: Type.Float, default: -0.7 },\n        /** How far the thumbstick needs to be released to execute the teleport */\n        thumbstickDeactivationThreshhold: { type: Type.Float, default: 0.3 },\n        /** Offset to apply to the indicator object, e.g. to avoid it from Z-fighting with the floor */\n        indicatorYOffset: { type: Type.Float, default: 0.01 },\n        /** Mode for raycasting, whether to use PhysX or simple collision components */\n        rayCastMode: {\n            type: Type.Enum,\n            values: ['collision', 'physx'],\n            default: 'collision',\n        },\n        /** Max distance for PhysX raycast */\n        maxDistance: { type: Type.Float, default: 100.0 },\n    };\n    init() {\n        this._prevThumbstickAxis = new Float32Array(2);\n        this._tempVec = new Float32Array(3);\n        this._tempVec0 = new Float32Array(3);\n        this._currentIndicatorRotation = 0;\n        this.input = this.object.getComponent('input');\n        if (!this.input) {\n            console.error(this.object.name, 'generic-teleport-component.js: input component is required on the object');\n            return;\n        }\n        if (!this.teleportIndicatorMeshObject) {\n            console.error(this.object.name, 'generic-teleport-component.js: Teleport indicator mesh is missing');\n            return;\n        }\n        if (!this.camRoot) {\n            console.error(this.object.name, 'generic-teleport-component.js: camRoot not set');\n            return;\n        }\n        this.isIndicating = false;\n        this.indicatorHidden = true;\n        this.hitSpot = new Float32Array(3);\n        this._hasHit = false;\n        this._extraRotation = 0;\n        this._currentStickAxes = new Float32Array(2);\n    }\n    start() {\n        if (this.handedness == 0) {\n            const inputComp = this.object.getComponent('input');\n            if (!inputComp) {\n                console.warn('teleport component on object', this.object.name, 'was configured with handedness \"input component\", ' +\n                    'but object has no input component.');\n            }\n            else {\n                this.handedness = inputComp.handedness;\n                this.input = inputComp;\n            }\n        }\n        else {\n            this.handedness = ['left', 'right'][this.handedness - 1];\n        }\n        this.onSessionStartCallback = this.setupVREvents.bind(this);\n        this.teleportIndicatorMeshObject.active = false;\n    }\n    onActivate() {\n        if (this.cam) {\n            this.isMouseIndicating = false;\n            canvas.addEventListener('mousedown', this.onMouseDown);\n            canvas.addEventListener('mouseup', this.onMouseUp);\n        }\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n    }\n    onDeactivate() {\n        canvas.addEventListener('mousedown', this.onMouseDown);\n        canvas.addEventListener('mouseup', this.onMouseUp);\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n    }\n    /* Get current camera Y rotation */\n    _getCamRotation() {\n        this.eyeLeft.getForward(this._tempVec);\n        this._tempVec[1] = 0;\n        vec3.normalize(this._tempVec, this._tempVec);\n        return Math.atan2(this._tempVec[0], this._tempVec[2]);\n    }\n    update() {\n        let inputLength = 0;\n        if (this.gamepad && this.gamepad.axes) {\n            this._currentStickAxes[0] = this.gamepad.axes[2];\n            this._currentStickAxes[1] = this.gamepad.axes[3];\n            inputLength =\n                Math.abs(this._currentStickAxes[0]) + Math.abs(this._currentStickAxes[1]);\n        }\n        if (!this.isIndicating &&\n            this._prevThumbstickAxis[1] >= this.thumbstickActivationThreshhold &&\n            this._currentStickAxes[1] < this.thumbstickActivationThreshhold) {\n            this.isIndicating = true;\n        }\n        else if (this.isIndicating &&\n            inputLength < this.thumbstickDeactivationThreshhold) {\n            this.isIndicating = false;\n            this.teleportIndicatorMeshObject.active = false;\n            if (this._hasHit) {\n                this._teleportPlayer(this.hitSpot, this._extraRotation);\n            }\n        }\n        if (this.isIndicating && this.teleportIndicatorMeshObject && this.input) {\n            const origin = this._tempVec0;\n            this.object.getPositionWorld(origin);\n            const direction = this.object.getForwardWorld(this._tempVec);\n            let rayHit = (this.rayHit =\n                this.rayCastMode == 0\n                    ? this.engine.scene.rayCast(origin, direction, 1 << this.floorGroup)\n                    : this.engine.physics.rayCast(origin, direction, 1 << this.floorGroup, this.maxDistance));\n            if (rayHit.hitCount > 0) {\n                this.indicatorHidden = false;\n                this._extraRotation =\n                    Math.PI +\n                        Math.atan2(this._currentStickAxes[0], this._currentStickAxes[1]);\n                this._currentIndicatorRotation =\n                    this._getCamRotation() + (this._extraRotation - Math.PI);\n                this.teleportIndicatorMeshObject.resetPositionRotation();\n                this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);\n                this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);\n                this.teleportIndicatorMeshObject.translate([\n                    0.0,\n                    this.indicatorYOffset,\n                    0.0,\n                ]);\n                this.teleportIndicatorMeshObject.active = true;\n                this.hitSpot.set(rayHit.locations[0]);\n                this._hasHit = true;\n            }\n            else {\n                if (!this.indicatorHidden) {\n                    this.teleportIndicatorMeshObject.active = false;\n                    this.indicatorHidden = true;\n                }\n                this._hasHit = false;\n            }\n        }\n        else if (this.teleportIndicatorMeshObject && this.isMouseIndicating) {\n            this.onMousePressed();\n        }\n        this._prevThumbstickAxis.set(this._currentStickAxes);\n    }\n    setupVREvents(s) {\n        /* If in VR, one-time bind the listener */\n        this.session = s;\n        s.addEventListener('end', function () {\n            /* Reset cache once the session ends to rebind select etc, in case\n             * it starts again */\n            this.gamepad = null;\n            this.session = null;\n        }.bind(this));\n        if (s.inputSources && s.inputSources.length) {\n            for (let i = 0; i < s.inputSources.length; i++) {\n                let inputSource = s.inputSources[i];\n                if (inputSource.handedness == this.handedness) {\n                    this.gamepad = inputSource.gamepad;\n                }\n            }\n        }\n        s.addEventListener('inputsourceschange', function (e) {\n            if (e.added && e.added.length) {\n                for (let i = 0; i < e.added.length; i++) {\n                    let inputSource = e.added[i];\n                    if (inputSource.handedness == this.handedness) {\n                        this.gamepad = inputSource.gamepad;\n                    }\n                }\n            }\n        }.bind(this));\n    }\n    onMouseDown = () => {\n        this.isMouseIndicating = true;\n    };\n    onMouseUp = () => {\n        this.isMouseIndicating = false;\n        this.teleportIndicatorMeshObject.active = false;\n        if (this._hasHit) {\n            this._teleportPlayer(this.hitSpot, 0.0);\n        }\n    };\n    onMousePressed() {\n        let origin = [0, 0, 0];\n        this.cam.getPositionWorld(origin);\n        const direction = this.cam.getForward(this._tempVec);\n        let rayHit = (this.rayHit =\n            this.rayCastMode == 0\n                ? this.engine.scene.rayCast(origin, direction, 1 << this.floorGroup)\n                : this.engine.physics.rayCast(origin, direction, 1 << this.floorGroup, this.maxDistance));\n        if (rayHit.hitCount > 0) {\n            this.indicatorHidden = false;\n            direction[1] = 0;\n            vec3.normalize(direction, direction);\n            this._currentIndicatorRotation =\n                -Math.sign(direction[2]) * Math.acos(direction[0]) - Math.PI * 0.5;\n            this.teleportIndicatorMeshObject.resetPositionRotation();\n            this.teleportIndicatorMeshObject.rotateAxisAngleRad([0, 1, 0], this._currentIndicatorRotation);\n            this.teleportIndicatorMeshObject.translate(rayHit.locations[0]);\n            this.teleportIndicatorMeshObject.active = true;\n            this.hitSpot = rayHit.locations[0];\n            this._hasHit = true;\n        }\n        else {\n            if (!this.indicatorHidden) {\n                this.teleportIndicatorMeshObject.active = false;\n                this.indicatorHidden = true;\n            }\n            this._hasHit = false;\n        }\n    }\n    _teleportPlayer(newPosition, rotationToAdd) {\n        this.camRoot.rotateAxisAngleRad([0, 1, 0], rotationToAdd);\n        const p = this._tempVec;\n        const p1 = this._tempVec0;\n        if (this.session) {\n            this.eyeLeft.getPositionWorld(p);\n            this.eyeRight.getPositionWorld(p1);\n            vec3.add(p, p, p1);\n            vec3.scale(p, p, 0.5);\n        }\n        else {\n            this.cam.getPositionWorld(p);\n        }\n        this.camRoot.getPositionWorld(p1);\n        vec3.sub(p, p1, p);\n        p[0] += newPosition[0];\n        p[1] = newPosition[1];\n        p[2] += newPosition[2];\n        this.camRoot.setPositionWorld(p);\n    }\n}\nexport { TeleportComponent };\n//# sourceMappingURL=teleport.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Mesh, MeshIndexType, MeshAttribute, } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { vec3 } from 'gl-matrix';\nconst direction = vec3.create();\nconst offset = vec3.create();\nconst normal = vec3.create();\nconst UP = vec3.fromValues(0, 1, 0);\n/**\n * Dynamic mesh-based trail\n *\n * This component keeps track of the world position of the object it's added to.\n * At a fixed interval the world position is stored as start and end points of the trail segments.\n *\n * The trail tapers off along its length. UV texture coordinates are setup such that the\n * U-axis covers the width of the trail and the V-axis covers the length of the trail.\n * This allows the trail's appearance to be defined using a texture.\n */\nclass Trail extends Component {\n    static TypeName = 'trail';\n    /** The material to apply to the trail mesh */\n    material = null;\n    /** The number of segments in the trail mesh */\n    segments = 50;\n    /** The time interval before recording a new point */\n    interval = 0.1;\n    /** The width of the trail (in world space) */\n    width = 1.0;\n    /** Whether or not the trail should taper off */\n    taper = true;\n    /**\n     * The maximum delta time in seconds, above which the trail resets.\n     * This prevents the trail from jumping around when updates happen\n     * infrequently (e.g. when the tab doesn't have focus).\n     */\n    resetThreshold = 0.5;\n    _currentPointIndex = 0;\n    _timeTillNext = 0;\n    _points = [];\n    _trailContainer = null;\n    _meshComp = null;\n    _mesh = null;\n    _indexData = null;\n    start() {\n        this._points = new Array(this.segments + 1);\n        for (let i = 0; i < this._points.length; ++i) {\n            this._points[i] = vec3.create();\n        }\n        /* The points array is circular, so keep track of its head */\n        this._timeTillNext = this.interval;\n        this._trailContainer = this.engine.scene.addObject();\n        this._meshComp = this._trailContainer.addComponent('mesh');\n        this._meshComp.material = this.material;\n        /* Each point will have two vertices; one on either side */\n        const vertexCount = 2 * this._points.length;\n        /* Each segment consists of two triangles */\n        this._indexData = new Uint32Array(6 * this.segments);\n        for (let i = 0, v = 0; i < vertexCount - 2; i += 2, v += 6) {\n            this._indexData\n                .subarray(v, v + 6)\n                .set([i + 1, i + 0, i + 2, i + 2, i + 3, i + 1]);\n        }\n        this._mesh = new Mesh(this.engine, {\n            vertexCount: vertexCount,\n            indexData: this._indexData,\n            indexType: MeshIndexType.UnsignedInt,\n        });\n        this._meshComp.mesh = this._mesh;\n    }\n    updateVertices() {\n        if (!this._mesh)\n            return;\n        const positions = this._mesh.attribute(MeshAttribute.Position);\n        const texCoords = this._mesh.attribute(MeshAttribute.TextureCoordinate);\n        const normals = this._mesh.attribute(MeshAttribute.Normal);\n        vec3.set(direction, 0, 0, 0);\n        for (let i = 0; i < this._points.length; ++i) {\n            const curr = this._points[(this._currentPointIndex + i + 1) % this._points.length];\n            const next = this._points[(this._currentPointIndex + i + 2) % this._points.length];\n            /* The last point has no next, so re-use the direction of the previous segment */\n            if (i !== this._points.length - 1) {\n                vec3.sub(direction, next, curr);\n            }\n            vec3.cross(offset, UP, direction);\n            vec3.normalize(offset, offset);\n            const timeFraction = 1.0 - this._timeTillNext / this.interval;\n            const fraction = (i - timeFraction) / this.segments;\n            vec3.scale(offset, offset, ((this.taper ? fraction : 1.0) * this.width) / 2.0);\n            positions.set(i * 2, [\n                curr[0] - offset[0],\n                curr[1] - offset[1],\n                curr[2] - offset[2],\n            ]);\n            positions.set(i * 2 + 1, [\n                curr[0] + offset[0],\n                curr[1] + offset[1],\n                curr[2] + offset[2],\n            ]);\n            if (normals) {\n                vec3.cross(normal, direction, offset);\n                vec3.normalize(normal, normal);\n                normals.set(i * 2, normal);\n                normals.set(i * 2 + 1, normal);\n            }\n            if (texCoords) {\n                texCoords.set(i * 2, [0, fraction]);\n                texCoords.set(i * 2 + 1, [1, fraction]);\n            }\n        }\n        /* Notify WLE that the mesh has changed */\n        this._mesh.update();\n    }\n    resetTrail() {\n        this.object.getPositionWorld(this._points[0]);\n        for (let i = 1; i < this._points.length; ++i) {\n            vec3.copy(this._points[i], this._points[0]);\n        }\n        this._currentPointIndex = 0;\n        this._timeTillNext = this.interval;\n    }\n    update(dt) {\n        this._timeTillNext -= dt;\n        if (dt > this.resetThreshold) {\n            this.resetTrail();\n        }\n        if (this._timeTillNext < 0) {\n            this._currentPointIndex = (this._currentPointIndex + 1) % this._points.length;\n            this._timeTillNext = (this._timeTillNext % this.interval) + this.interval;\n        }\n        this.object.getPositionWorld(this._points[this._currentPointIndex]);\n        this.updateVertices();\n    }\n    onActivate() {\n        this.resetTrail();\n        if (this._meshComp)\n            this._meshComp.active = true;\n    }\n    onDeactivate() {\n        if (this._meshComp)\n            this._meshComp.active = false;\n    }\n    onDestroy() {\n        if (this._trailContainer)\n            this._trailContainer.destroy();\n        if (this._mesh)\n            this._mesh.destroy();\n    }\n}\n__decorate([\n    property.material()\n], Trail.prototype, \"material\", void 0);\n__decorate([\n    property.int(50)\n], Trail.prototype, \"segments\", void 0);\n__decorate([\n    property.float(50)\n], Trail.prototype, \"interval\", void 0);\n__decorate([\n    property.float(1.0)\n], Trail.prototype, \"width\", void 0);\n__decorate([\n    property.bool(true)\n], Trail.prototype, \"taper\", void 0);\n__decorate([\n    property.float(1.0)\n], Trail.prototype, \"resetThreshold\", void 0);\nexport { Trail };\n//# sourceMappingURL=trail.js.map", "import { Component, Property } from '@wonderlandengine/api';\nimport { vec3 } from 'gl-matrix';\nfunction clamp(v, a, b) {\n    return Math.max(a, Math.min(v, b));\n}\nconst rootScaling = new Float32Array(3);\nconst tempQuat = new Float32Array(4);\n/**\n * Solve inverse kinematics for a two joint chains\n *\n * Inspired by http://theorangeduck.com/page/simple-two-joint\n */\nconst twoJointIK = (function () {\n    const ta = new Float32Array(3);\n    const ca = new Float32Array(3);\n    const ba = new Float32Array(3);\n    const ab = new Float32Array(3);\n    const cb = new Float32Array(3);\n    const axis0 = new Float32Array(3);\n    const axis1 = new Float32Array(3);\n    const temp = new Float32Array(3);\n    return function (root, middle, b, c, targetPos, eps, helper) {\n        /* a = [0, 0, 0], since everything is computed in root-space */\n        ba.set(b);\n        const lab = vec3.length(ba);\n        vec3.sub(ta, b, c);\n        const lcb = vec3.length(ta);\n        ta.set(targetPos);\n        const lat = clamp(vec3.length(ta), eps, lab + lcb - eps);\n        ca.set(c);\n        vec3.scale(ab, b, -1);\n        vec3.sub(cb, c, b);\n        vec3.normalize(ca, ca);\n        vec3.normalize(ba, ba);\n        vec3.normalize(ab, ab);\n        vec3.normalize(cb, cb);\n        vec3.normalize(ta, ta);\n        /* Supposedly numerical errors can cause the dot to go out of -1, 1 range */\n        const ac_ab_0 = Math.acos(clamp(vec3.dot(ca, ba), -1, 1));\n        const ba_bc_0 = Math.acos(clamp(vec3.dot(ab, cb), -1, 1));\n        const ac_at_0 = Math.acos(clamp(vec3.dot(ca, ta), -1, 1));\n        const ac_ab_1 = Math.acos(clamp((lcb * lcb - lab * lab - lat * lat) / (-2 * lab * lat), -1, 1));\n        const ba_bc_1 = Math.acos(clamp((lat * lat - lab * lab - lcb * lcb) / (-2 * lab * lcb), -1, 1));\n        if (helper) {\n            vec3.sub(ba, helper, b);\n            vec3.normalize(ba, ba);\n        }\n        vec3.cross(axis0, ca, ba);\n        vec3.normalize(axis0, axis0);\n        vec3.cross(axis1, c, targetPos);\n        vec3.normalize(axis1, axis1);\n        middle.transformVectorInverseLocal(temp, axis0);\n        root.rotateAxisAngleRadObject(axis1, ac_at_0);\n        root.rotateAxisAngleRadObject(axis0, ac_ab_1 - ac_ab_0);\n        middle.rotateAxisAngleRadObject(axis0, ba_bc_1 - ba_bc_0);\n    };\n})();\n/**\n * Inverse kinematics for two-joint chains (e.g. knees or elbows)\n */\nclass TwoJointIkSolver extends Component {\n    static TypeName = 'two-joint-ik-solver';\n    static Properties = {\n        /** Root bone, never moves */\n        root: Property.object(),\n        /** Bone attached to the root */\n        middle: Property.object(),\n        /** Bone attached to the middle */\n        end: Property.object(),\n        /** Target the joins should reach for */\n        target: Property.object(),\n        /** Flag for copying rotation from target to end */\n        copyTargetRotation: Property.bool(true),\n        /** Helper object to use to determine joint rotation axis */\n        helper: Property.object(),\n    };\n    time = 0;\n    middlePos = new Float32Array(3);\n    endPos = new Float32Array(3);\n    targetPos = new Float32Array(3);\n    helperPos = new Float32Array(3);\n    rootTransform = new Float32Array(8);\n    middleTransform = new Float32Array(8);\n    endTransform = new Float32Array(8);\n    start() {\n        this.root.getTransformLocal(this.rootTransform);\n        this.middle.getTransformLocal(this.middleTransform);\n        this.end.getTransformLocal(this.endTransform);\n    }\n    update(dt) {\n        this.time += dt;\n        /* Reset to original pose for stability */\n        this.root.setTransformLocal(this.rootTransform);\n        this.middle.setTransformLocal(this.middleTransform);\n        this.end.setTransformLocal(this.endTransform);\n        this.root.getScalingWorld(rootScaling);\n        /* Get joint positions in root-space */\n        this.middle.getPositionLocal(this.middlePos);\n        this.end.getPositionLocal(this.endPos);\n        this.middle.transformPointLocal(this.endPos, this.endPos);\n        if (this.helper) {\n            /* Get helper position in root space */\n            this.helper.getPositionWorld(this.helperPos);\n            this.root.transformPointInverseWorld(this.helperPos, this.helperPos);\n            vec3.div(this.helperPos, this.helperPos, rootScaling);\n        }\n        /* Get target position in root space */\n        this.target.getPositionWorld(this.targetPos);\n        this.root.transformPointInverseWorld(this.targetPos, this.targetPos);\n        vec3.div(this.targetPos, this.targetPos, rootScaling);\n        twoJointIK(this.root, this.middle, this.middlePos, this.endPos, this.targetPos, 0.01, this.helper ? this.helperPos : null, this.time);\n        if (this.copyTargetRotation) {\n            this.end.setRotationWorld(this.target.getRotationWorld(tempQuat));\n        }\n    }\n}\nexport { TwoJointIkSolver };\n//# sourceMappingURL=two-joint-ik-solver.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { setFirstMaterialTexture } from './utils/utils.js';\nimport { property } from '@wonderlandengine/api/decorators.js';\n/**\n * Downloads a video from URL and applies it as `diffuseTexture` or `flatTexture`\n * on given material.\n *\n * Video textures need to be updated regularly whenever\n * a new frame is available. This component handles the\n * detection of a new frame and updates the texture to\n * reflect the video's current frame.\n *\n * Materials from the following shaders are supported:\n *  - \"Phong Opaque Textured\"\n *  - \"Flat Opaque Textured\"\n *  - \"Background\"\n *  - \"Physical Opaque Textured\"\n *  - \"Foliage\"\n *\n * The video can be accessed through `this.video`:\n *\n * ```js\n *   let videoTexture = this.object.getComponent('video-texture');\n *   videoTexture.video.play();\n *   videoTexture.video.pause();\n * ```\n *\n * See [Video Example](/showcase/video).\n */\nclass VideoTexture extends Component {\n    static TypeName = 'video-texture';\n    /** URL to download video from */\n    url;\n    /** Material to apply the video texture to */\n    material;\n    /** Whether to loop the video */\n    loop;\n    /** Whether to automatically start playing the video */\n    autoplay;\n    /** Whether to mute sound */\n    muted;\n    /** Name of the texture property to set */\n    textureProperty;\n    loaded = false;\n    frameUpdateRequested = true;\n    video;\n    texture;\n    start() {\n        this.video = document.createElement('video');\n        this.video.src = this.url;\n        this.video.crossOrigin = 'anonymous';\n        this.video.playsInline = true;\n        this.video.loop = this.loop;\n        this.video.muted = this.muted;\n        this.video.addEventListener('playing', () => {\n            this.loaded = true;\n        });\n        if (this.autoplay) {\n            /* Muted videos are allowed to play immediately. Videos with sound\n             * need to await a user gesture. */\n            if (this.muted) {\n                this.video?.play();\n            }\n            else {\n                window.addEventListener('click', this.playAfterUserGesture);\n                window.addEventListener('touchstart', this.playAfterUserGesture);\n            }\n        }\n    }\n    onDestroy() {\n        this.video?.remove();\n        this.texture?.destroy();\n        if (this.autoplay && !this.muted) {\n            /* In case not removed yet, we remove the autoplay gestures here.\n             * If already removed, these have no effect. */\n            window.removeEventListener('click', this.playAfterUserGesture);\n            window.removeEventListener('touchstart', this.playAfterUserGesture);\n        }\n    }\n    applyTexture() {\n        const mat = this.material;\n        const pipeline = mat.pipeline;\n        const texture = (this.texture = this.engine.textures.create(this.video));\n        if (!setFirstMaterialTexture(mat, texture, this.textureProperty)) {\n            console.error('Pipeline', pipeline, 'not supported by video-texture');\n        }\n        if ('requestVideoFrameCallback' in this.video) {\n            this.video.requestVideoFrameCallback(this.updateVideo.bind(this));\n        }\n        else {\n            this.video.addEventListener('timeupdate', () => {\n                this.frameUpdateRequested = true;\n            });\n        }\n    }\n    update(dt) {\n        if (this.loaded && this.frameUpdateRequested) {\n            if (this.texture) {\n                this.texture.update();\n            }\n            else {\n                /* Apply texture on first frame update request */\n                this.applyTexture();\n            }\n            this.frameUpdateRequested = false;\n        }\n    }\n    updateVideo() {\n        this.frameUpdateRequested = true;\n        this.video.requestVideoFrameCallback(this.updateVideo.bind(this));\n    }\n    playAfterUserGesture = () => {\n        this.video?.play();\n        window.removeEventListener('click', this.playAfterUserGesture);\n        window.removeEventListener('touchstart', this.playAfterUserGesture);\n    };\n}\n__decorate([\n    property.string()\n], VideoTexture.prototype, \"url\", void 0);\n__decorate([\n    property.material({ required: true })\n], VideoTexture.prototype, \"material\", void 0);\n__decorate([\n    property.bool(true)\n], VideoTexture.prototype, \"loop\", void 0);\n__decorate([\n    property.bool(true)\n], VideoTexture.prototype, \"autoplay\", void 0);\n__decorate([\n    property.bool(true)\n], VideoTexture.prototype, \"muted\", void 0);\n__decorate([\n    property.string('auto')\n], VideoTexture.prototype, \"textureProperty\", void 0);\nexport { VideoTexture };\n//# sourceMappingURL=video-texture.js.map", "import { Component, Type } from '@wonderlandengine/api';\n/**\n * Allows switching all other components on an object to active/inactive\n * depending on whether a VR/AR session is active.\n *\n * Useful for hiding controllers until the user enters VR for example.\n */\nclass VrModeActiveSwitch extends Component {\n    static TypeName = 'vr-mode-active-switch';\n    static Properties = {\n        /** When components should be active: In VR or when not in VR */\n        activateComponents: {\n            type: Type.Enum,\n            values: ['in VR', 'in non-VR'],\n            default: 'in VR',\n        },\n        /** Whether child object's components should be affected */\n        affectChildren: { type: Type.Bool, default: true },\n    };\n    start() {\n        this.components = [];\n        this.getComponents(this.object);\n        /* Initial activation/deactivation */\n        this.onXRSessionEnd();\n        this.onSessionStartCallback = this.onXRSessionStart.bind(this);\n        this.onSessionEndCallback = this.onXRSessionEnd.bind(this);\n    }\n    onActivate() {\n        this.engine.onXRSessionStart.add(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.add(this.onSessionEndCallback);\n    }\n    onDeactivate() {\n        this.engine.onXRSessionStart.remove(this.onSessionStartCallback);\n        this.engine.onXRSessionEnd.remove(this.onSessionEndCallback);\n    }\n    getComponents(obj) {\n        const comps = obj.getComponents().filter((c) => c.type !== 'vr-mode-active-switch');\n        this.components = this.components.concat(comps);\n        if (this.affectChildren) {\n            let children = obj.children;\n            for (let i = 0; i < children.length; ++i) {\n                this.getComponents(children[i]);\n            }\n        }\n    }\n    setComponentsActive(active) {\n        const comps = this.components;\n        for (let i = 0; i < comps.length; ++i) {\n            comps[i].active = active;\n        }\n    }\n    onXRSessionStart() {\n        this.setComponentsActive(this.activateComponents == 0);\n    }\n    onXRSessionEnd() {\n        this.setComponentsActive(this.activateComponents != 0);\n    }\n}\nexport { VrModeActiveSwitch };\n//# sourceMappingURL=vr-mode-active-switch.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Collider, CollisionComponent, Component, Emitter, Mesh, MeshAttribute, MeshComponent, MeshIndexType, } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { setXRRigidTransformLocal } from './utils/webxr.js';\n// FIXME: earcut overrides default export, breaking our tests\nimport earcut from 'earcut';\nconst tempVec3 = new Float32Array(3);\n/** Compute minimum and maxium extents of given list of contour points */\nfunction extentsFromContour(out, points) {\n    if (points.length == 0)\n        return out;\n    let absMaxX = Math.abs(points[0].x);\n    let absMaxZ = Math.abs(points[0].z);\n    for (let i = 1; i < points.length; ++i) {\n        absMaxX = Math.max(absMaxX, Math.abs(points[i].x));\n        absMaxZ = Math.max(absMaxZ, Math.abs(points[i].z));\n    }\n    out[0] = absMaxX;\n    out[1] = 0;\n    out[2] = absMaxZ;\n}\n/** Check whether x lies between a and b */\nfunction within(x, a, b) {\n    if (a > b)\n        return x < a && x > b;\n    return x > a && x < b;\n}\n/**\n * Check whether given point on plane's bounding box is inside plane's polygon\n *\n * @param p 3D point in plane's local space, Y value is ignored, since it is assumed\n *     that the point was checked against the plane's bounding box.\n * @param plane XRPlane that has `XRPlane.polygon`\n * @returns `true` if the point lies on the plane\n */\nexport function isPointLocalOnXRPlanePolygon(p, plane) {\n    const points = plane.polygon;\n    if (points.length < 3)\n        return false;\n    /* Count ray intersections: even == inside, odd == outside */\n    const pX = p[0];\n    const pZ = p[2];\n    let intersections = 0;\n    for (let n = 0, l = points.length - 1; n < points.length; ++n) {\n        const aX = points[l].x;\n        const aZ = points[l].z;\n        const s = (points[n].z - aZ) / (points[n].x - aX);\n        const x = Math.abs((pZ - aZ) / s);\n        if (x >= 0.0 && x <= 1.0 && within(x + pX, aX, points[n].x))\n            ++intersections;\n        l = n;\n    }\n    return (intersections & 1) == 0;\n}\n/**\n * Check whether given point on plane's bounding box is inside plane's polygon\n *\n * @param p 3D point to test. It is assumed that the point was checked against\n *     the plane's bounding box beforehand.\n * @param plane XRPlane that has `XRPlane.polygon`\n * @returns `true` if the point lies on the plane\n */\nexport function isPointWorldOnXRPlanePolygon(object, p, plane) {\n    if (plane.polygon.length < 3)\n        return false;\n    isPointLocalOnXRPlanePolygon(object.transformPointInverseWorld(tempVec3, p), plane);\n}\n/**\n * Create a plane mesh from a list of contour points\n *\n * @param engine Engine to create the mesh with\n * @param points Contour points\n * @param meshToUpdate Optional mesh to update instead of creating a new one.\n */\nfunction planeMeshFromContour(engine, points, meshToUpdate = null) {\n    const vertexCount = points.length;\n    const vertices = new Float32Array(vertexCount * 2);\n    for (let i = 0, d = 0; i < vertexCount; ++i, d += 2) {\n        vertices[d] = points[i].x;\n        vertices[d + 1] = points[i].z;\n    }\n    const triangles = earcut(vertices);\n    const mesh = meshToUpdate ||\n        new Mesh(engine, {\n            vertexCount,\n            /* Assumption here that we will never have more than 256 points\n             * in the detected plane meshes! */\n            indexType: MeshIndexType.UnsignedByte,\n            indexData: triangles,\n        });\n    if (mesh.vertexCount !== vertexCount) {\n        console.warn('vertexCount of meshToUpdate did not match required vertexCount');\n        return mesh;\n    }\n    const positions = mesh.attribute(MeshAttribute.Position);\n    const textureCoords = mesh.attribute(MeshAttribute.TextureCoordinate);\n    const normals = mesh.attribute(MeshAttribute.Normal);\n    tempVec3[1] = 0;\n    for (let i = 0, s = 0; i < vertexCount; ++i, s += 2) {\n        tempVec3[0] = vertices[s];\n        tempVec3[2] = vertices[s + 1];\n        positions.set(i, tempVec3);\n    }\n    textureCoords?.set(0, vertices);\n    if (normals) {\n        tempVec3[0] = 0;\n        tempVec3[1] = 1;\n        tempVec3[2] = 0;\n        for (let i = 0; i < vertexCount; ++i) {\n            normals.set(i, tempVec3);\n        }\n    }\n    if (meshToUpdate)\n        mesh.update();\n    return mesh;\n}\n/**\n * Generate meshes and collisions for XRPlanes using [WebXR Device API - Plane Detection](https://immersive-web.github.io/real-world-geometry/plane-detection.html).\n */\nclass PlaneDetection extends Component {\n    static TypeName = 'plane-detection';\n    /**\n     * Material to assign to created plane meshes or `null` if meshes should not be created.\n     */\n    planeMaterial = null;\n    /**\n     * Collision mask to assign to newly created collision components or a negative value if\n     * collision components should not be created.\n     */\n    collisionMask = -1;\n    /** Map of all planes and their last updated timestamps */\n    planes = new Map();\n    /** Objects generated for each XRPlane */\n    planeObjects = new Map();\n    /** Called when a plane starts tracking */\n    onPlaneFound = new Emitter();\n    /** Called when a plane stops tracking */\n    onPlaneLost = new Emitter();\n    update() {\n        if (!this.engine.xr?.frame)\n            return;\n        // @ts-ignore\n        if (this.engine.xr.frame.detectedPlanes === undefined) {\n            console.error('plane-detection: WebXR feature not available.');\n            this.active = false;\n            return;\n        }\n        // @ts-ignore\n        const detectedPlanes = this.engine.xr.frame.detectedPlanes;\n        for (const [plane, _] of this.planes) {\n            if (!detectedPlanes.has(plane)) {\n                this.#planeLost(plane);\n            }\n        }\n        detectedPlanes.forEach((plane) => {\n            if (this.planes.has(plane)) {\n                if (plane.lastChangedTime > this.planes.get(plane)) {\n                    this.#planeUpdate(plane);\n                }\n            }\n            else {\n                this.#planeFound(plane);\n            }\n            this.#planeUpdatePose(plane);\n        });\n    }\n    #planeLost(plane) {\n        this.planes.delete(plane);\n        const o = this.planeObjects.get(plane);\n        this.onPlaneLost.notify(plane, o);\n        /* User might destroy the object */\n        if (o.objectId > 0)\n            o.destroy();\n    }\n    #planeFound(plane) {\n        this.planes.set(plane, plane.lastChangedTime);\n        const o = this.engine.scene.addObject(this.object);\n        this.planeObjects.set(plane, o);\n        if (this.planeMaterial) {\n            o.addComponent(MeshComponent, {\n                mesh: planeMeshFromContour(this.engine, plane.polygon),\n                material: this.planeMaterial,\n            });\n        }\n        if (this.collisionMask >= 0) {\n            extentsFromContour(tempVec3, plane.polygon);\n            tempVec3[1] = 0.025;\n            o.addComponent(CollisionComponent, {\n                group: this.collisionMask,\n                collider: Collider.Box,\n                extents: tempVec3,\n            });\n        }\n        this.onPlaneFound.notify(plane, o);\n    }\n    #planeUpdate(plane) {\n        this.planes.set(plane, plane.lastChangedTime);\n        const planeMesh = this.planeObjects.get(plane).getComponent(MeshComponent);\n        if (!planeMesh)\n            return;\n        planeMeshFromContour(this.engine, plane.polygon, planeMesh.mesh);\n    }\n    #planeUpdatePose(plane) {\n        const o = this.planeObjects.get(plane);\n        const pose = this.engine.xr.frame.getPose(plane.planeSpace, this.engine.xr.currentReferenceSpace);\n        if (!pose) {\n            o.active = false;\n            return;\n        }\n        setXRRigidTransformLocal(o, pose.transform);\n    }\n}\n__decorate([\n    property.material()\n], PlaneDetection.prototype, \"planeMaterial\", void 0);\n__decorate([\n    property.int()\n], PlaneDetection.prototype, \"collisionMask\", void 0);\nexport { PlaneDetection };\n//# sourceMappingURL=plane-detection.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { quat, quat2, vec3 } from 'gl-matrix';\nimport { property } from '@wonderlandengine/api/decorators.js';\nconst VRM_ROLL_AXES = {\n    X: [1.0, 0.0, 0.0],\n    Y: [0.0, 1.0, 0.0],\n    Z: [0.0, 0.0, 1.0],\n};\nconst VRM_AIM_AXES = {\n    PositiveX: [1.0, 0.0, 0.0],\n    NegativeX: [-1.0, 0.0, 0.0],\n    PositiveY: [0.0, 1.0, 0.0],\n    NegativeY: [0.0, -1.0, 0.0],\n    PositiveZ: [0.0, 0.0, 1.0],\n    NegativeZ: [0.0, 0.0, -1.0],\n};\nconst Rad2Deg = 180.0 / Math.PI;\nconst RightVector = vec3.fromValues(1, 0, 0);\nconst UpVector = vec3.fromValues(0, 1, 0);\nconst ForwardVector = vec3.fromValues(0, 0, 1);\n/**\n * Component for loading and handling VRM 1.0 models.\n *\n * Posing of the model should be done exclusively by rotating the bones. These can be\n * accessed using the `.bones` property and follow the VRM bone naming. Note that not\n * all VRM models will have all possible bones. The rest pose (T-pose) is captured in\n * the `.restPose` property. Resetting a bone to its rest pose can be done as follows:\n * ```js\n * vrmComponent.bones[vrmBoneName].rotationLocal = vrmComponent.restPose[vrmBoneName];\n * ```\n *\n * Moving the model through the world should be done by moving the object this component\n * is attached to. In other words, by moving the root of the VRM model. The bones and any\n * descendant objects should *not* be used to move the VRM model.\n *\n * The core extension `VRMC_vrm` as well as the`VRMC_springBone` and `VRMC_node_constraint`\n * extensions are supported.\n *\n * **Limitations:**\n * - No support for `VRMC_material_mtoon`\n * - Expressions aren't supported\n * - Expression based lookAt isn't supported\n * - Mesh annotation mode `auto` is not supported (first person mode)\n */\nclass Vrm extends Component {\n    static TypeName = 'vrm';\n    /** URL to a VRM file to load */\n    src;\n    /** Object the VRM is looking at */\n    lookAtTarget;\n    /** Meta information about the VRM model */\n    meta = null;\n    /** The humanoid bones of the VRM model */\n    bones = {\n        /* Torso */\n        hips: null,\n        spine: null,\n        chest: null,\n        upperChest: null,\n        neck: null,\n        /* Head */\n        head: null,\n        leftEye: null,\n        rightEye: null,\n        jaw: null,\n        /* Legs */\n        leftUpperLeg: null,\n        leftLowerLeg: null,\n        leftFoot: null,\n        leftToes: null,\n        rightUpperLeg: null,\n        rightLowerLeg: null,\n        rightFoot: null,\n        rightToes: null,\n        /* Arms */\n        leftShoulder: null,\n        leftUpperArm: null,\n        leftLowerArm: null,\n        leftHand: null,\n        rightShoulder: null,\n        rightUpperArm: null,\n        rightLowerArm: null,\n        rightHand: null,\n        /* Fingers */\n        leftThumbMetacarpal: null,\n        leftThumbProximal: null,\n        leftThumbDistal: null,\n        leftIndexProximal: null,\n        leftIndexIntermediate: null,\n        leftIndexDistal: null,\n        leftMiddleProximal: null,\n        leftMiddleIntermediate: null,\n        leftMiddleDistal: null,\n        leftRingProximal: null,\n        leftRingIntermediate: null,\n        leftRingDistal: null,\n        leftLittleProximal: null,\n        leftLittleIntermediate: null,\n        leftLittleDistal: null,\n        rightThumbMetacarpal: null,\n        rightThumbProximal: null,\n        rightThumbDistal: null,\n        rightIndexProximal: null,\n        rightIndexIntermediate: null,\n        rightIndexDistal: null,\n        rightMiddleProximal: null,\n        rightMiddleIntermediate: null,\n        rightMiddleDistal: null,\n        rightRingProximal: null,\n        rightRingIntermediate: null,\n        rightRingDistal: null,\n        rightLittleProximal: null,\n        rightLittleIntermediate: null,\n        rightLittleDistal: null,\n    };\n    /** Rotations of the bones in the rest pose (T-pose) */\n    restPose = {};\n    /* All node constraints, ordered to deal with dependencies */\n    _nodeConstraints = [];\n    /* VRMC_springBone chains */\n    _springChains = [];\n    /* Spherical colliders for spring bones */\n    _sphereColliders = [];\n    /* Capsule shaped colliders for spring bones */\n    _capsuleColliders = [];\n    /* Indicates which meshes are rendered in first/third person views */\n    _firstPersonAnnotations = [];\n    /* Contains details for (bone type) lookAt behaviour */\n    _lookAt = null;\n    /* Whether or not the VRM component has been initialized with `initializeVrm` */\n    _initialized = false;\n    _tempV3 = vec3.create();\n    _tempV3A = vec3.create();\n    _tempV3B = vec3.create();\n    _tempQuat = quat.create();\n    _tempQuatA = quat.create();\n    _tempQuatB = quat.create();\n    _tempQuat2 = quat2.create();\n    _tailToShape = vec3.create();\n    _headToTail = vec3.create();\n    _inertia = vec3.create();\n    _stiffness = vec3.create();\n    _external = vec3.create();\n    _identityQuat = quat.identity(quat.create());\n    async start() {\n        if (!this.src) {\n            console.error('vrm: src property not set');\n            return;\n        }\n        const prefab = await this.engine.loadGLTF({ url: this.src, extensions: true });\n        const { root, extensions } = this.engine.scene.instantiate(prefab);\n        root.children.forEach((child) => (child.parent = this.object));\n        this._initializeVrm(prefab.extensions, extensions?.idMapping);\n        root.destroy();\n    }\n    /**\n     * Parses the VRM glTF extensions and initializes the vrm component.\n     * @param extensions The glTF extensions for the VRM model\n     */\n    _initializeVrm(extensions, idMapping) {\n        if (this._initialized) {\n            throw new Error('VRM component has already been initialized');\n        }\n        const VRMC_vrm = extensions.root['VRMC_vrm'];\n        if (!VRMC_vrm) {\n            throw new Error('Missing VRM extensions');\n        }\n        if (VRMC_vrm.specVersion !== '1.0') {\n            throw new Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${VRMC_vrm.specVersion}'`);\n        }\n        this.meta = VRMC_vrm.meta;\n        this._parseHumanoid(VRMC_vrm.humanoid, idMapping);\n        if (VRMC_vrm.firstPerson) {\n            this._parseFirstPerson(VRMC_vrm.firstPerson, extensions);\n        }\n        if (VRMC_vrm.lookAt) {\n            this._parseLookAt(VRMC_vrm.lookAt);\n        }\n        this._findAndParseNodeConstraints(extensions, idMapping);\n        const springBone = extensions.root['VRMC_springBone'];\n        if (springBone) {\n            this._parseAndInitializeSpringBones(springBone, idMapping);\n        }\n        this._initialized = true;\n    }\n    _parseHumanoid(humanoid, idMapping) {\n        for (const boneName in humanoid.humanBones) {\n            if (!(boneName in this.bones)) {\n                console.warn(`Unrecognized bone '${boneName}'`);\n                continue;\n            }\n            const node = humanoid.humanBones[boneName].node;\n            const objectId = idMapping[node];\n            this.bones[boneName] = this.engine.scene.wrap(objectId);\n            this.restPose[boneName] = this.bones[boneName].getRotationLocal(quat.create());\n        }\n    }\n    _parseFirstPerson(firstPerson, idMapping) {\n        for (const meshAnnotation of firstPerson.meshAnnotations) {\n            const annotation = {\n                node: this.engine.scene.wrap(idMapping[meshAnnotation.node]),\n                firstPerson: true,\n                thirdPerson: true,\n            };\n            switch (meshAnnotation.type) {\n                case 'firstPersonOnly':\n                    annotation.thirdPerson = false;\n                    break;\n                case 'thirdPersonOnly':\n                    annotation.firstPerson = false;\n                    break;\n                case 'both':\n                    break;\n                case 'auto':\n                    console.warn(\"First person mesh annotation type 'auto' is not supported, treating as 'both'!\");\n                    break;\n                default:\n                    console.error(`Invalid mesh annotation type '${meshAnnotation.type}'`);\n                    break;\n            }\n            this._firstPersonAnnotations.push(annotation);\n        }\n    }\n    _parseLookAt(lookAt) {\n        if (lookAt.type !== 'bone') {\n            console.warn(`Unsupported lookAt type '${lookAt.type}', only 'bone' is supported`);\n            return;\n        }\n        const parseRangeMap = (rangeMap) => {\n            return {\n                inputMaxValue: rangeMap.inputMaxValue,\n                outputScale: rangeMap.outputScale,\n            };\n        };\n        this._lookAt = {\n            offsetFromHeadBone: lookAt.offsetFromHeadBone || [0, 0, 0],\n            horizontalInner: parseRangeMap(lookAt.rangeMapHorizontalInner),\n            horizontalOuter: parseRangeMap(lookAt.rangeMapHorizontalOuter),\n            verticalDown: parseRangeMap(lookAt.rangeMapVerticalDown),\n            verticalUp: parseRangeMap(lookAt.rangeMapVerticalUp),\n        };\n    }\n    _findAndParseNodeConstraints(extensions, idMapping) {\n        const traverse = (object) => {\n            const nodeExtensions = extensions.node[object.objectId];\n            if (nodeExtensions && 'VRMC_node_constraint' in nodeExtensions) {\n                const nodeConstraintExtension = nodeExtensions['VRMC_node_constraint'];\n                const constraint = nodeConstraintExtension.constraint;\n                let type, axis;\n                if ('roll' in constraint) {\n                    type = 'roll';\n                    axis = VRM_ROLL_AXES[constraint.roll.rollAxis];\n                }\n                else if ('aim' in constraint) {\n                    type = 'aim';\n                    axis = VRM_AIM_AXES[constraint.aim.aimAxis];\n                }\n                else if ('rotation' in constraint) {\n                    type = 'rotation';\n                }\n                if (type) {\n                    const source = this.engine.scene.wrap(idMapping[constraint[type].source]);\n                    this._nodeConstraints.push({\n                        type,\n                        source,\n                        destination: object,\n                        axis: axis,\n                        weight: constraint[type].weight,\n                        /* Rest pose */\n                        destinationRestLocalRotation: object.getRotationLocal(quat.create()),\n                        sourceRestLocalRotation: source.getRotationLocal(quat.create()),\n                        sourceRestLocalRotationInv: quat.invert(quat.create(), source.getRotationLocal(this._tempQuat)),\n                    });\n                }\n                else {\n                    console.warn('Unrecognized or invalid VRMC_node_constraint, ignoring it');\n                }\n            }\n            for (const child of object.children) {\n                traverse(child);\n            }\n        };\n        traverse(this.object);\n    }\n    _parseAndInitializeSpringBones(springBone, idMapping) {\n        const colliders = (springBone.colliders || []).map((collider, i) => {\n            const shapeType = 'capsule' in collider.shape ? 'capsule' : 'sphere';\n            return {\n                id: i,\n                object: this.engine.scene.wrap(idMapping[collider.node]),\n                shape: {\n                    isCapsule: shapeType === 'capsule',\n                    radius: collider.shape[shapeType].radius,\n                    offset: collider.shape[shapeType].offset,\n                    tail: collider.shape[shapeType].tail,\n                },\n                cache: {\n                    head: vec3.create(),\n                    tail: vec3.create(),\n                },\n            };\n        });\n        this._sphereColliders = colliders.filter((c) => !c.shape.isCapsule);\n        this._capsuleColliders = colliders.filter((c) => c.shape.isCapsule);\n        const colliderGroups = (springBone.colliderGroups || []).map((group) => ({\n            name: group.name,\n            colliders: group.colliders.map((c) => colliders[c]),\n        }));\n        for (const spring of springBone.springs) {\n            const joints = [];\n            for (const joint of spring.joints) {\n                const springJoint = {\n                    hitRadius: 0.0,\n                    stiffness: 1.0,\n                    gravityPower: 0.0,\n                    gravityDir: [0.0, -1.0, 0.0],\n                    dragForce: 0.5,\n                    node: null,\n                    state: null,\n                };\n                Object.assign(springJoint, joint);\n                springJoint.node = this.engine.scene.wrap(idMapping[joint.node]);\n                joints.push(springJoint);\n            }\n            const springChainColliders = (spring.colliderGroups || []).flatMap((cg) => colliderGroups[cg].colliders);\n            this._springChains.push({\n                name: spring.name,\n                center: spring.center\n                    ? this.engine.scene.wrap(idMapping[spring.center])\n                    : null,\n                joints,\n                sphereColliders: springChainColliders.filter((c) => !c.shape.isCapsule),\n                capsuleColliders: springChainColliders.filter((c) => c.shape.isCapsule),\n            });\n        }\n        /* Initialize spring bone joint state */\n        for (const springChain of this._springChains) {\n            for (let i = 0; i < springChain.joints.length - 1; ++i) {\n                const springBoneJoint = springChain.joints[i];\n                const childSpringBoneJoint = springChain.joints[i + 1];\n                const springBonePosition = springBoneJoint.node.getPositionWorld(vec3.create());\n                const childSpringBonePosition = childSpringBoneJoint.node.getPositionWorld(vec3.create());\n                const boneDirection = vec3.subtract(this._tempV3A, springBonePosition, childSpringBonePosition);\n                const state = {\n                    prevTail: vec3.copy(vec3.create(), childSpringBonePosition),\n                    currentTail: vec3.copy(vec3.create(), childSpringBonePosition),\n                    initialLocalRotation: springBoneJoint.node.getRotationLocal(quat.create()),\n                    initialLocalTransformInvert: quat2.invert(quat2.create(), springBoneJoint.node.getTransformLocal(this._tempQuat2)),\n                    boneAxis: vec3.normalize(vec3.create(), childSpringBoneJoint.node.getPositionLocal(this._tempV3)),\n                    /* Ensure bone length is at least 1cm to avoid jittery behaviour from zero-length bones */\n                    boneLength: Math.max(0.01, vec3.length(boneDirection)),\n                    /* Tail positions in center space, if needed */\n                    prevTailCenter: null,\n                    currentTailCenter: null,\n                };\n                if (springChain.center) {\n                    state.prevTailCenter = springChain.center.transformPointInverseWorld(vec3.create(), childSpringBonePosition);\n                    state.currentTailCenter = vec3.copy(vec3.create(), childSpringBonePosition);\n                }\n                springBoneJoint.state = state;\n            }\n        }\n    }\n    update(dt) {\n        if (!this._initialized) {\n            return;\n        }\n        /* 1. Resolve humanoid bones (performed by user) */\n        /* 2. Resolve LookAt (bone type) as the position of the head is determined */\n        this._resolveLookAt();\n        /* 3. Expression update (TODO) */\n        /* 4. Apply Expression (TODO) */\n        /* 5. Resolve constraints */\n        this._resolveConstraints();\n        /* 6. Resolve Spring Bone */\n        this._updateSpringBones(dt);\n    }\n    _rangeMap(rangeMap, input) {\n        const maxValue = rangeMap.inputMaxValue;\n        const outputScale = rangeMap.outputScale;\n        return (Math.min(input, maxValue) / maxValue) * outputScale;\n    }\n    _resolveLookAt() {\n        if (!this._lookAt || !this.lookAtTarget) {\n            return;\n        }\n        const lookAtSource = this.bones.head.transformPointWorld(this._tempV3A, this._lookAt.offsetFromHeadBone);\n        const lookAtTarget = this.lookAtTarget.getPositionWorld(this._tempV3B);\n        const lookAtDirection = vec3.sub(this._tempV3A, lookAtTarget, lookAtSource);\n        vec3.normalize(lookAtDirection, lookAtDirection);\n        /* Convert the direction into LookAt space */\n        this.bones.head.parent.transformVectorInverseWorld(lookAtDirection);\n        const z = vec3.dot(lookAtDirection, ForwardVector);\n        const x = vec3.dot(lookAtDirection, RightVector);\n        const yaw = Math.atan2(x, z) * Rad2Deg;\n        const xz = Math.sqrt(x * x + z * z);\n        const y = vec3.dot(lookAtDirection, UpVector);\n        let pitch = Math.atan2(-y, xz) * Rad2Deg;\n        /* Limit pitch */\n        if (pitch > 0) {\n            pitch = this._rangeMap(this._lookAt.verticalDown, pitch);\n        }\n        else {\n            pitch = -this._rangeMap(this._lookAt.verticalUp, -pitch);\n        }\n        /* Left eye (limit yaw) */\n        if (this.bones.leftEye) {\n            let yawLeft = yaw;\n            if (yawLeft > 0) {\n                yawLeft = this._rangeMap(this._lookAt.horizontalInner, yawLeft);\n            }\n            else {\n                yawLeft = -this._rangeMap(this._lookAt.horizontalOuter, -yawLeft);\n            }\n            const eyeRotation = quat.fromEuler(this._tempQuatA, pitch, yawLeft, 0);\n            this.bones.leftEye.setRotationLocal(quat.multiply(eyeRotation, this.restPose.leftEye, eyeRotation));\n        }\n        /* Right eye (limit yaw) */\n        if (this.bones.rightEye) {\n            let yawRight = yaw;\n            if (yawRight > 0) {\n                yawRight = this._rangeMap(this._lookAt.horizontalOuter, yawRight);\n            }\n            else {\n                yawRight = -this._rangeMap(this._lookAt.horizontalInner, -yawRight);\n            }\n            const eyeRotation = quat.fromEuler(this._tempQuatA, pitch, yawRight, 0);\n            this.bones.rightEye.setRotationLocal(quat.multiply(eyeRotation, this.restPose.rightEye, eyeRotation));\n        }\n    }\n    _resolveConstraints() {\n        for (const nodeConstraint of this._nodeConstraints) {\n            this._resolveConstraint(nodeConstraint);\n        }\n    }\n    _resolveConstraint(nodeConstraint) {\n        const dstRestQuat = nodeConstraint.destinationRestLocalRotation;\n        const srcRestQuatInv = nodeConstraint.sourceRestLocalRotationInv;\n        const targetQuat = quat.identity(this._tempQuatA);\n        switch (nodeConstraint.type) {\n            case 'roll':\n                {\n                    const deltaSrcQuat = quat.multiply(this._tempQuatA, srcRestQuatInv, nodeConstraint.source.rotationLocal);\n                    /* source to parent */\n                    const deltaSrcQuatInParent = quat.multiply(this._tempQuatA, nodeConstraint.sourceRestLocalRotation, deltaSrcQuat);\n                    quat.mul(deltaSrcQuatInParent, deltaSrcQuatInParent, srcRestQuatInv);\n                    /* parent to destination */\n                    const dstRestQuatInv = quat.invert(this._tempQuatB, dstRestQuat);\n                    const deltaSrcQuatInDst = quat.multiply(this._tempQuatB, dstRestQuatInv, deltaSrcQuatInParent);\n                    quat.multiply(deltaSrcQuatInDst, deltaSrcQuatInDst, dstRestQuat);\n                    const toVec = vec3.transformQuat(this._tempV3A, nodeConstraint.axis, deltaSrcQuatInDst);\n                    const fromToQuat = quat.rotationTo(this._tempQuatA, nodeConstraint.axis, toVec);\n                    quat.mul(targetQuat, dstRestQuat, quat.invert(this._tempQuat, fromToQuat));\n                    quat.mul(targetQuat, targetQuat, deltaSrcQuatInDst);\n                }\n                break;\n            case 'aim':\n                {\n                    const dstParentWorldQuat = nodeConstraint.destination.parent.rotationWorld;\n                    /* fromVec = aimAxis.applyQuaternion( dstParentWorldQuat * dstRestQuat ) */\n                    const fromVec = vec3.transformQuat(this._tempV3A, nodeConstraint.axis, dstRestQuat);\n                    vec3.transformQuat(fromVec, fromVec, dstParentWorldQuat);\n                    /* toVec = ( srcWorldPos - dstWorldPos ).normalized */\n                    const toVec = nodeConstraint.source.getTranslationWorld(this._tempV3B);\n                    vec3.sub(toVec, toVec, nodeConstraint.destination.getTranslationWorld(this._tempV3));\n                    vec3.normalize(toVec, toVec);\n                    /* fromToQuat = Quaternion.fromToRotation( fromVec, toVec ) */\n                    const fromToQuat = quat.rotationTo(this._tempQuatA, fromVec, toVec);\n                    quat.mul(targetQuat, quat.invert(this._tempQuat, dstParentWorldQuat), fromToQuat);\n                    quat.mul(targetQuat, targetQuat, dstParentWorldQuat);\n                    quat.mul(targetQuat, targetQuat, dstRestQuat);\n                }\n                break;\n            case 'rotation':\n                {\n                    const srcDeltaQuat = quat.mul(targetQuat, srcRestQuatInv, nodeConstraint.source.rotationLocal);\n                    quat.mul(targetQuat, dstRestQuat, srcDeltaQuat);\n                }\n                break;\n        }\n        /* Apply constraint */\n        quat.slerp(targetQuat, dstRestQuat, targetQuat, nodeConstraint.weight);\n        nodeConstraint.destination.rotationLocal = targetQuat;\n    }\n    _updateSpringBones(dt) {\n        /* Pre-compute collider positions */\n        this._sphereColliders.forEach(({ object, shape, cache }) => {\n            const offset = vec3.copy(cache.head, shape.offset);\n            object.transformVectorWorld(offset);\n            vec3.add(cache.head, object.getPositionWorld(this._tempV3), offset);\n        });\n        this._capsuleColliders.forEach(({ object, shape, cache }) => {\n            const shapeCenter = object.getPositionWorld(this._tempV3A);\n            const headOffset = vec3.copy(cache.head, shape.offset);\n            object.transformVectorWorld(headOffset);\n            vec3.add(cache.head, shapeCenter, headOffset);\n            const tailOffset = vec3.copy(cache.tail, shape.tail);\n            object.transformVectorWorld(tailOffset);\n            vec3.add(cache.tail, shapeCenter, tailOffset);\n        });\n        /* Update spring chains */\n        this._springChains.forEach((springChain) => {\n            for (let i = 0; i < springChain.joints.length - 1; ++i) {\n                const joint = springChain.joints[i];\n                if (!joint.state)\n                    continue;\n                const parentWorldRotation = joint.node.parent\n                    ? joint.node.parent.getRotationWorld(this._tempQuat)\n                    : this._identityQuat;\n                /* 1. Forces */\n                /* inertia = (currentTail - prevTail) * (1.0f - dragForce); */\n                const inertia = this._inertia;\n                if (springChain.center) {\n                    vec3.sub(inertia, joint.state.currentTailCenter, joint.state.prevTailCenter);\n                    springChain.center.transformVectorWorld(inertia);\n                }\n                else {\n                    vec3.sub(inertia, joint.state.currentTail, joint.state.prevTail);\n                }\n                vec3.scale(inertia, inertia, 1.0 - joint.dragForce);\n                /* stiffness = deltaTime * parentWorldRotation * localRotation * boneAxis * stiffnessForce; */\n                const stiffness = vec3.copy(this._stiffness, joint.state.boneAxis);\n                vec3.transformQuat(stiffness, stiffness, joint.state.initialLocalRotation);\n                vec3.transformQuat(stiffness, stiffness, parentWorldRotation);\n                vec3.scale(stiffness, stiffness, dt * joint.stiffness);\n                /* external = deltaTime * gravityDir * gravityPower; */\n                const external = vec3.scale(this._external, joint.gravityDir, dt * joint.gravityPower);\n                /* nextTail = currentTail + inertia + stiffness + external; */\n                const nextTail = vec3.copy(this._tempV3A, joint.state.currentTail);\n                vec3.add(nextTail, nextTail, inertia);\n                vec3.add(nextTail, nextTail, stiffness);\n                vec3.add(nextTail, nextTail, external);\n                /* constrain the length */\n                /* nextTail = worldPosition + (nextTail - worldPosition).normalized * boneLength; */\n                const worldPosition = joint.node.getPositionWorld(this._tempV3B);\n                vec3.sub(nextTail, nextTail, worldPosition);\n                vec3.normalize(nextTail, nextTail);\n                vec3.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);\n                /* 2. Collision with colliders */\n                /* Sphere colliders */\n                for (const { shape, cache } of springChain.sphereColliders) {\n                    let tailToShape = this._tailToShape;\n                    const sphereCenter = cache.head;\n                    tailToShape = vec3.sub(tailToShape, nextTail, sphereCenter);\n                    const radius = shape.radius + joint.hitRadius;\n                    const dist = vec3.length(tailToShape) - radius;\n                    if (dist < 0.0) {\n                        vec3.normalize(tailToShape, tailToShape);\n                        vec3.scaleAndAdd(nextTail, nextTail, tailToShape, -dist);\n                        /* constraint the length */\n                        vec3.sub(nextTail, nextTail, worldPosition);\n                        vec3.normalize(nextTail, nextTail);\n                        vec3.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);\n                    }\n                }\n                /* Capsule colliders */\n                for (const { shape, cache } of springChain.capsuleColliders) {\n                    let tailToShape = this._tailToShape;\n                    const head = cache.head;\n                    const tail = cache.tail;\n                    /* Naively start with distance to the head */\n                    tailToShape = vec3.sub(tailToShape, nextTail, head);\n                    const headToTail = vec3.sub(this._headToTail, tail, head);\n                    const dot = vec3.dot(headToTail, tailToShape);\n                    if (vec3.squaredLength(headToTail) <= dot) {\n                        /* Closest to tail */\n                        vec3.sub(tailToShape, nextTail, tail);\n                    }\n                    else if (dot > 0.0) {\n                        /* Closest to middle */\n                        vec3.scale(headToTail, headToTail, dot / vec3.squaredLength(headToTail));\n                        vec3.sub(tailToShape, tailToShape, headToTail);\n                    }\n                    const radius = shape.radius + joint.hitRadius;\n                    const dist = vec3.length(tailToShape) - radius;\n                    if (dist < 0.0) {\n                        vec3.normalize(tailToShape, tailToShape);\n                        vec3.scaleAndAdd(nextTail, nextTail, tailToShape, -dist);\n                        /* constraint the length */\n                        vec3.sub(nextTail, nextTail, worldPosition);\n                        vec3.normalize(nextTail, nextTail);\n                        vec3.scaleAndAdd(nextTail, worldPosition, nextTail, joint.state.boneLength);\n                    }\n                }\n                /* 3. Applying rotation */\n                vec3.copy(joint.state.prevTail, joint.state.currentTail);\n                vec3.copy(joint.state.currentTail, nextTail);\n                if (springChain.center) {\n                    vec3.copy(joint.state.prevTailCenter, joint.state.currentTailCenter);\n                    vec3.copy(joint.state.currentTailCenter, nextTail);\n                    springChain.center.transformPointInverseWorld(joint.state.currentTailCenter);\n                }\n                /* to = (nextTail * (node.parent.worldMatrix * initialLocalMatrix).inverse).normalized */\n                joint.node.parent.transformPointInverseWorld(nextTail);\n                const nextTailDualQuat = quat2.fromTranslation(this._tempQuat2, nextTail);\n                quat2.multiply(nextTailDualQuat, joint.state.initialLocalTransformInvert, nextTailDualQuat);\n                quat2.getTranslation(nextTail, nextTailDualQuat);\n                vec3.normalize(nextTail, nextTail);\n                /* node.rotation = initialLocalRotation * Quaternion.fromToQuaternion(boneAxis, to); */\n                const jointRotation = quat.rotationTo(this._tempQuatA, joint.state.boneAxis, nextTail);\n                joint.node.setRotationLocal(quat.mul(this._tempQuatA, joint.state.initialLocalRotation, jointRotation));\n            }\n        });\n    }\n    /**\n     * @param firstPerson Whether the model should render for first person or third person views\n     */\n    set firstPerson(firstPerson) {\n        this._firstPersonAnnotations.forEach((annotation) => {\n            const visible = firstPerson == annotation.firstPerson ||\n                firstPerson != annotation.thirdPerson;\n            annotation.node.getComponents('mesh').forEach((mesh) => {\n                mesh.active = visible;\n            });\n        });\n    }\n}\n__decorate([\n    property.string()\n], Vrm.prototype, \"src\", void 0);\n__decorate([\n    property.object()\n], Vrm.prototype, \"lookAtTarget\", void 0);\nexport { Vrm };\n//# sourceMappingURL=vrm.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { vec3 } from 'gl-matrix';\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nconst _direction = new Float32Array(3);\nconst _tempDualQuat = new Float32Array(8);\n/**\n * Basic movement with W/A/S/D keys.\n */\nclass WasdControlsComponent extends Component {\n    static TypeName = 'wasd-controls';\n    /** Movement speed in m/s. */\n    speed;\n    /** Flag for only moving the object on the global x & z planes */\n    lockY;\n    /** Object of which the orientation is used to determine forward direction */\n    headObject;\n    right = false;\n    down = false;\n    left = false;\n    up = false;\n    start() {\n        this.headObject = this.headObject || this.object;\n    }\n    onActivate() {\n        window.addEventListener('keydown', this.press);\n        window.addEventListener('keyup', this.release);\n    }\n    onDeactivate() {\n        window.removeEventListener('keydown', this.press);\n        window.removeEventListener('keyup', this.release);\n    }\n    update() {\n        vec3.zero(_direction);\n        if (this.up)\n            _direction[2] -= 1.0;\n        if (this.down)\n            _direction[2] += 1.0;\n        if (this.left)\n            _direction[0] -= 1.0;\n        if (this.right)\n            _direction[0] += 1.0;\n        vec3.normalize(_direction, _direction);\n        _direction[0] *= this.speed;\n        _direction[2] *= this.speed;\n        vec3.transformQuat(_direction, _direction, this.headObject.getTransformWorld(_tempDualQuat));\n        if (this.lockY) {\n            _direction[1] = 0;\n            vec3.normalize(_direction, _direction);\n            vec3.scale(_direction, _direction, this.speed);\n        }\n        this.object.translateLocal(_direction);\n    }\n    press = (e) => {\n        this.handleKey(e, true);\n    };\n    release = (e) => {\n        this.handleKey(e, false);\n    };\n    handleKey(e, b) {\n        if (e.code === 'ArrowUp' || e.code === 'KeyW' || e.code === 'KeyZ') {\n            this.up = b;\n        }\n        else if (e.code === 'ArrowRight' || e.code === 'KeyD') {\n            this.right = b;\n        }\n        else if (e.code === 'ArrowDown' || e.code === 'KeyS') {\n            this.down = b;\n        }\n        else if (e.code === 'ArrowLeft' || e.code === 'KeyA' || e.code === 'KeyQ') {\n            this.left = b;\n        }\n    }\n}\n__decorate([\n    property.float(0.1)\n], WasdControlsComponent.prototype, \"speed\", void 0);\n__decorate([\n    property.bool(false)\n], WasdControlsComponent.prototype, \"lockY\", void 0);\n__decorate([\n    property.object()\n], WasdControlsComponent.prototype, \"headObject\", void 0);\nexport { WasdControlsComponent };\n//# sourceMappingURL=wasd-controls.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Emitter } from '@wonderlandengine/api';\nimport { HandTracking } from './hand-tracking.js';\nimport { vec3, quat } from 'gl-matrix';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { VrModeActiveSwitch } from './vr-mode-active-switch.js';\nconst _tempVec = vec3.create();\nconst _tempQuat = quat.create();\nconst _tempRotation1 = new Float32Array(4);\nconst _tempRotation2 = new Float32Array(4);\nconst minTemp = new Float32Array(3);\nconst maxTemp = new Float32Array(3);\nconst hands = ['left', 'right'];\n/**\n * Dynamically load and map input profiles for XR controllers.\n */\nclass InputProfile extends Component {\n    static TypeName = 'input-profile';\n    /**\n     * A cache to store loaded profiles for reuse.\n     */\n    static Cache = new Map();\n    _gamepadObjects = {};\n    _controllerModel = null;\n    _defaultControllerComponents;\n    _handedness;\n    _profileJSON = null;\n    _buttons = [];\n    _axes = [];\n    /**\n     * The XR gamepad associated with the current input source.\n     */\n    gamepad;\n    /**\n     * A reference to the emitter which triggered on model lodaed event.\n     */\n    onModelLoaded = new Emitter();\n    /**\n     * Returns url of input profile json file\n     */\n    url;\n    /**\n     * A set of components to filter during component retrieval.\n     */\n    toFilter = new Set(['vr-mode-active-mode-switch']);\n    /**\n     * The index representing the handedness of the controller (0 for left, 1 for right).\n     */\n    handedness = 0;\n    /**\n     * The base path where XR input profiles are stored.\n     */\n    defaultBasePath;\n    /**\n     * An optional folder path for loading custom XR input profiles.\n     */\n    customBasePath;\n    /**\n     * The default 3D controller model used when a custom model fails to load.\n     */\n    defaultController;\n    /**\n     * The object which has HandTracking component added to it.\n     */\n    trackedHand;\n    /**\n     * If true, the input profile will be mapped to the default controller, and no dynamic 3D model of controller will be loaded.\n     */\n    mapToDefaultController;\n    /**\n     * If true, adds a VR mode switch component to the loaded controller model.\n     */\n    addVrModeSwitch;\n    onActivate() {\n        this._handedness = hands[this.handedness];\n        const defaultHandName = 'Hand' + this._handedness.charAt(0).toUpperCase() + this._handedness.slice(1);\n        this.trackedHand =\n            this.trackedHand ?? this.object.parent?.findByNameRecursive(defaultHandName)[0];\n        this.defaultController = this.defaultController || this.object.children[0];\n        this._defaultControllerComponents = this._getComponents(this.defaultController);\n        this.engine.onXRSessionStart.add(() => {\n            this.engine.xr?.session.addEventListener('inputsourceschange', this._onInputSourcesChange.bind(this));\n        });\n    }\n    onDeactivate() {\n        this.engine.xr?.session?.removeEventListener('inputsourceschange', this._onInputSourcesChange.bind(this));\n    }\n    /**\n     * Sets newly loaded controllers for the HandTracking component to proper switching.\n     * @param controllerObject The controller object.\n     * @hidden\n     */\n    _setHandTrackingControllers(controllerObject) {\n        const handtrackingComponent = this.trackedHand.getComponent(HandTracking);\n        if (!handtrackingComponent)\n            return;\n        handtrackingComponent.controllerToDeactivate = controllerObject;\n    }\n    /**\n     * Retrieves all components from the specified object and its children.\n     * @param obj The object to retrieve components from.\n     * @return An array of components.\n     * @hidden\n     */\n    _getComponents(obj) {\n        const components = [];\n        if (obj == null)\n            return components;\n        const stack = [obj];\n        while (stack.length > 0) {\n            const currentObj = stack.pop();\n            const comps = currentObj\n                .getComponents()\n                .filter((c) => !this.toFilter.has(c.type));\n            components.push(...comps);\n            const children = currentObj.children;\n            // Push children onto the stack in reverse order to maintain the correct order\n            for (let i = children.length - 1; i >= 0; --i) {\n                stack.push(children[i]);\n            }\n        }\n        return components;\n    }\n    /**\n     * Activates or deactivates components based on the specified boolean value.\n     * @param active If true, components are set to active; otherwise, they are set to inactive.\n     * @hidden\n     */\n    _setComponentsActive(active) {\n        const comps = this._defaultControllerComponents;\n        if (comps == undefined)\n            return;\n        for (let i = 0; i < comps.length; ++i) {\n            comps[i].active = active;\n        }\n    }\n    /**\n     * Event handler triggered when XR input sources change.\n     * Detects new XR input sources and initiates the loading of input profiles.\n     * @param event The XR input source change event.\n     * @hidden\n     */\n    _onInputSourcesChange(event) {\n        if (this._isModelLoaded() && !this.mapToDefaultController) {\n            this._setComponentsActive(false);\n        }\n        event.added.forEach((xrInputSource) => {\n            if (xrInputSource.hand != null)\n                return;\n            if (this._handedness != xrInputSource.handedness)\n                return;\n            this.gamepad = xrInputSource.gamepad;\n            const profile = this.customBasePath !== ''\n                ? this.customBasePath\n                : this.defaultBasePath + xrInputSource.profiles[0];\n            this.url = profile + '/profile.json';\n            this._profileJSON = InputProfile.Cache.get(this.url) ?? null;\n            if (this._profileJSON != null)\n                return;\n            fetch(this.url)\n                .then((res) => res.json())\n                .then((out) => {\n                this._profileJSON = out;\n                InputProfile.Cache.set(this.url, this._profileJSON);\n                if (!this._isModelLoaded())\n                    this._loadAndMapGamepad(profile);\n            })\n                .catch((e) => {\n                console.error(`Failed to load profile from ${this.url}. Reason:`, e);\n            });\n        });\n    }\n    /**\n     * Checks if the 3D controller model is loaded.\n     * @return True if the model is loaded; otherwise, false.\n     * @hidden\n     */\n    _isModelLoaded() {\n        return this._controllerModel !== null;\n    }\n    /**\n     * Loads the 3D controller model and caches the mapping to the gamepad.\n     * @param profile The path to the input profile.\n     * @hidden\n     */\n    async _loadAndMapGamepad(profile) {\n        const assetPath = profile + '/' + this._handedness + '.glb';\n        this._controllerModel = this.defaultController;\n        if (!this.mapToDefaultController) {\n            /** load 3d model in the runtime with profile url */\n            try {\n                this._controllerModel = (await this.engine.scene.append(assetPath));\n            }\n            catch (e) {\n                console.error(`Failed to load i-p controller model. Reason:`, e, `Continuing with ${this._handedness} default controller.`);\n                this._setComponentsActive(true);\n            }\n            this._controllerModel.parent = this.object;\n            this._controllerModel.setPositionLocal([0, 0, 0]);\n            this._setComponentsActive(false);\n            if (this.addVrModeSwitch)\n                this._controllerModel.addComponent(VrModeActiveSwitch);\n            this.onModelLoaded.notify();\n        }\n        this._cacheGamepadObjectsFromProfile(this._profileJSON, this._controllerModel);\n        this._setHandTrackingControllers(this._controllerModel);\n        this.update = () => this._mapGamepadInput();\n    }\n    /**\n     * Caches gamepad objects (buttons, axes) from the loaded input profile.\n     * @hidden\n     */\n    _cacheGamepadObjectsFromProfile(profile, obj) {\n        const components = profile.layouts[this._handedness].components;\n        if (!components)\n            return;\n        this._buttons = [];\n        this._axes = [];\n        for (const i in components) {\n            const visualResponses = components[i].visualResponses;\n            if (components[i].rootNodeName === 'menu')\n                continue;\n            for (const j in visualResponses) {\n                // update buttons with new interface of current visual response\n                const visualResponse = visualResponses[j];\n                const valueNode = visualResponse.valueNodeName;\n                const minNode = visualResponse.minNodeName;\n                const maxNode = visualResponse.maxNodeName;\n                this._gamepadObjects[valueNode] = obj.findByNameRecursive(valueNode)[0];\n                this._gamepadObjects[minNode] = obj.findByNameRecursive(minNode)[0];\n                this._gamepadObjects[maxNode] = obj.findByNameRecursive(maxNode)[0];\n                const prop = visualResponses[j].componentProperty;\n                const response = {\n                    target: this._gamepadObjects[valueNode],\n                    min: this._gamepadObjects[minNode],\n                    max: this._gamepadObjects[maxNode],\n                    id: components[i].gamepadIndices[prop], // Assign a unique ID\n                };\n                switch (prop) {\n                    case 'button':\n                        this._buttons.push(response);\n                        break;\n                    case 'xAxis':\n                    case 'yAxis':\n                        this._axes.push(response);\n                        break;\n                }\n            }\n        }\n    }\n    /**\n     * Assigns a transformed position and rotation to the target based on minimum and maximum values and a normalized input value.\n     * @param target The target object to be transformed.\n     * @param min The minimum object providing transformation limits.\n     * @param max The maximum object providing transformation limits.\n     * @param value The normalized input value.\n     * @hidden\n     */\n    _assignTransform(target, min, max, value) {\n        vec3.lerp(_tempVec, min.getPositionWorld(minTemp), max.getPositionWorld(maxTemp), value);\n        target.setPositionWorld(_tempVec);\n        quat.lerp(_tempQuat, min.getRotationWorld(_tempRotation1), max.getRotationWorld(_tempRotation2), value);\n        quat.normalize(_tempQuat, _tempQuat);\n        target.setRotationWorld(_tempQuat);\n    }\n    /**\n     * Maps input values (buttons, axes) to the 3D controller model.\n     * @hidden\n     */\n    _mapGamepadInput() {\n        for (const button of this._buttons) {\n            const buttonValue = this.gamepad.buttons[button.id].value;\n            this._assignTransform(button.target, button.min, button.max, buttonValue);\n        }\n        for (const axis of this._axes) {\n            const axisValue = this.gamepad.axes[axis.id];\n            const normalizedAxisValue = (axisValue + 1) / 2;\n            this._assignTransform(axis.target, axis.min, axis.max, normalizedAxisValue);\n        }\n    }\n}\n__decorate([\n    property.enum(hands, 0)\n], InputProfile.prototype, \"handedness\", void 0);\n__decorate([\n    property.string('https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@latest/dist/profiles/')\n], InputProfile.prototype, \"defaultBasePath\", void 0);\n__decorate([\n    property.string()\n], InputProfile.prototype, \"customBasePath\", void 0);\n__decorate([\n    property.object()\n], InputProfile.prototype, \"defaultController\", void 0);\n__decorate([\n    property.object()\n], InputProfile.prototype, \"trackedHand\", void 0);\n__decorate([\n    property.bool(false)\n], InputProfile.prototype, \"mapToDefaultController\", void 0);\n__decorate([\n    property.bool(true)\n], InputProfile.prototype, \"addVrModeSwitch\", void 0);\nexport { InputProfile };\n//# sourceMappingURL=input-profile.js.map", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@wonderlandengine/api';\nimport { property } from '@wonderlandengine/api/decorators.js';\nimport { deg2rad, rad2deg } from './utils/utils.js';\nimport { quat, vec3 } from 'gl-matrix';\nconst preventDefault = (e) => {\n    e.preventDefault();\n};\nconst tempVec = [0, 0, 0];\nconst tempquat = quat.create();\nconst tempquat2 = quat.create();\nconst tempVec3 = vec3.create();\n/**\n * OrbitalCamera component allows the user to orbit around a target point, which\n * is the position of the object itself. It rotates at the specified distance.\n *\n * @remarks\n * The component works using mouse or touch. Therefor it does not work in VR.\n */\nclass OrbitalCamera extends Component {\n    static TypeName = 'orbital-camera';\n    mouseButtonIndex = 0;\n    radial = 5;\n    minElevation = 0.0;\n    maxElevation = 89.99;\n    minZoom = 0.01;\n    maxZoom = 10.0;\n    xSensitivity = 0.5;\n    ySensitivity = 0.5;\n    zoomSensitivity = 0.02;\n    damping = 0.9;\n    _mouseDown = false;\n    _origin = [0, 0, 0];\n    _azimuth = 0;\n    _polar = 45;\n    _initialPinchDistance = 0;\n    _touchStartX = 0;\n    _touchStartY = 0;\n    _azimuthSpeed = 0;\n    _polarSpeed = 0;\n    init() {\n        this.object.getPositionWorld(this._origin);\n    }\n    start() {\n        this._polar = Math.min(this.maxElevation, Math.max(this.minElevation, this._polar));\n        this._updateCamera();\n    }\n    onActivate() {\n        const canvas = this.engine.canvas;\n        if (this.mouseButtonIndex === 2) {\n            canvas.addEventListener('contextmenu', preventDefault, { passive: false });\n        }\n        canvas.addEventListener('mousedown', this._onMouseDown);\n        canvas.addEventListener('wheel', this._onMouseScroll, { passive: false });\n        canvas.addEventListener('touchstart', this._onTouchStart, { passive: false });\n        canvas.addEventListener('touchmove', this._onTouchMove, { passive: false });\n        canvas.addEventListener('touchend', this._onTouchEnd);\n    }\n    onDeactivate() {\n        const canvas = this.engine.canvas;\n        if (this.mouseButtonIndex === 2) {\n            canvas.removeEventListener('contextmenu', preventDefault);\n        }\n        canvas.removeEventListener('mousemove', this._onMouseMove);\n        canvas.removeEventListener('mousedown', this._onMouseDown);\n        canvas.removeEventListener('wheel', this._onMouseScroll);\n        canvas.removeEventListener('touchstart', this._onTouchStart);\n        canvas.removeEventListener('touchmove', this._onTouchMove);\n        canvas.removeEventListener('touchend', this._onTouchEnd);\n        /* Reset state to make sure nothing gets stuck */\n        this._mouseDown = false;\n        this._initialPinchDistance = 0;\n        this._touchStartX = 0;\n        this._touchStartY = 0;\n        this._azimuthSpeed = 0;\n        this._polarSpeed = 0;\n    }\n    update() {\n        /* Always apply damping, because there's no event for stop moving */\n        this._azimuthSpeed *= this.damping;\n        this._polarSpeed *= this.damping;\n        /* Stop completely if the speed is very low to avoid endless tiny movements */\n        if (Math.abs(this._azimuthSpeed) < 0.01)\n            this._azimuthSpeed = 0;\n        if (Math.abs(this._polarSpeed) < 0.01)\n            this._polarSpeed = 0;\n        /* Apply the speed to the camera angles */\n        this._azimuth += this._azimuthSpeed;\n        this._polar += this._polarSpeed;\n        /* Clamp the polar angle */\n        this._polar = Math.min(this.maxElevation, Math.max(this.minElevation, this._polar));\n        /* Update the camera if there's any speed */\n        if (this._azimuthSpeed !== 0 || this._polarSpeed !== 0) {\n            this._updateCamera();\n        }\n    }\n    /**\n     * Get the closest position to the given position on the orbit sphere of the camera.\n     * This can be used to get a position and rotation to transition to.\n     *\n     * You pass this a position object. The method calculates the closest positition and updates the position parameter.\n     * It also sets the rotation parameter to reflect the rotate the camera will have when it is on the orbit sphere,\n     * pointing towards the center.\n     * @param position the position to get the closest position to\n     * @param rotation the rotation to get the closest position to\n     */\n    getClosestPosition(position, rotation) {\n        /* It's a bit hacky, but the easiest way to get the rotation of the camera is just briefly\n         change the rotation to look at the center and then get the rotation. */\n        this.object.getRotationWorld(tempquat);\n        this.object.lookAt(this._origin);\n        this.object.getRotationWorld(tempquat2);\n        if (quat.dot(tempquat, tempquat2) < 0) {\n            quat.scale(tempquat2, tempquat2, -1); /* Negate to ensure shortest path */\n        }\n        this.object.setRotationWorld(tempquat);\n        /* Calculate the direction from the center of orbit to the current camera position */\n        const directionToCamera = vec3.create();\n        vec3.subtract(directionToCamera, position, this._origin);\n        vec3.normalize(directionToCamera, directionToCamera);\n        /* Scale this direction by the radius of your orbital sphere to get the nearest point on the sphere */\n        const nearestPointOnSphere = vec3.create();\n        vec3.scale(nearestPointOnSphere, directionToCamera, this.radial);\n        vec3.add(nearestPointOnSphere, nearestPointOnSphere, this._origin);\n        vec3.copy(position, nearestPointOnSphere);\n        quat.copy(rotation, tempquat2);\n    }\n    /**\n     * Set the camera position based on the given position and calculate the rotation.\n     * @param cameraPosition the position to set the camera to\n     */\n    setPosition(cameraPosition) {\n        const centerOfOrbit = this._origin;\n        /* Compute the direction vector */\n        vec3.subtract(tempVec3, cameraPosition, centerOfOrbit);\n        vec3.normalize(tempVec3, tempVec3);\n        /* Compute the azimuth angle (in radians) */\n        const azimuth = Math.atan2(tempVec3[0], tempVec3[2]);\n        /* Compute the polar angle (in radians) */\n        const polar = Math.acos(tempVec3[1]);\n        const azimuthDeg = rad2deg(azimuth);\n        /* Polar is inverted to match the orbital camera */\n        const polarDeg = 90 - rad2deg(polar);\n        this._azimuth = azimuthDeg;\n        this._polar = polarDeg;\n    }\n    /**\n     * Update the camera position based on the current azimuth,\n     * polar and radial values\n     */\n    _updateCamera() {\n        const azimuthInRadians = deg2rad(this._azimuth);\n        const polarInRadians = deg2rad(this._polar);\n        tempVec[0] = this.radial * Math.sin(azimuthInRadians) * Math.cos(polarInRadians);\n        tempVec[1] = this.radial * Math.sin(polarInRadians);\n        tempVec[2] = this.radial * Math.cos(azimuthInRadians) * Math.cos(polarInRadians);\n        this.object.setPositionWorld(tempVec);\n        this.object.translateWorld(this._origin);\n        this.object.lookAt(this._origin);\n    }\n    /* Mouse Event Handlers */\n    _onMouseDown = (e) => {\n        window.addEventListener('mouseup', this._onMouseUp);\n        window.addEventListener('mousemove', this._onMouseMove);\n        if (e.button === this.mouseButtonIndex) {\n            this._mouseDown = true;\n            document.body.style.cursor = 'grabbing';\n            if (e.button === 1) {\n                e.preventDefault(); /* to prevent scrolling */\n                return false;\n            }\n        }\n    };\n    _onMouseUp = (e) => {\n        window.removeEventListener('mouseup', this._onMouseUp);\n        window.removeEventListener('mousemove', this._onMouseMove);\n        if (e.button === this.mouseButtonIndex) {\n            this._mouseDown = false;\n            document.body.style.cursor = 'initial';\n        }\n    };\n    _onMouseMove = (e) => {\n        if (this.active && this._mouseDown) {\n            if (this.active && this._mouseDown) {\n                this._azimuthSpeed = -(e.movementX * this.xSensitivity);\n                this._polarSpeed = e.movementY * this.ySensitivity;\n            }\n        }\n    };\n    _onMouseScroll = (e) => {\n        e.preventDefault(); /* to prevent scrolling */\n        this.radial *= 1 - e.deltaY * this.zoomSensitivity * -0.001;\n        this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));\n        this._updateCamera();\n    };\n    /* Touch event handlers */\n    _onTouchStart = (e) => {\n        if (e.touches.length === 1) {\n            /* to prevent scrolling and allow us to track touch movement */\n            e.preventDefault();\n            this._touchStartX = e.touches[0].clientX;\n            this._touchStartY = e.touches[0].clientY;\n            this._mouseDown = true; /* Treat touch like mouse down */\n        }\n        else if (e.touches.length === 2) {\n            /* Calculate initial pinch distance */\n            this._initialPinchDistance = this._getDistanceBetweenTouches(e.touches);\n            e.preventDefault(); /* Prevent default pinch actions */\n        }\n    };\n    _onTouchMove = (e) => {\n        if (!this.active || !this._mouseDown) {\n            return;\n        }\n        e.preventDefault(); /* to prevent moving the page */\n        if (e.touches.length === 1) {\n            const deltaX = e.touches[0].clientX - this._touchStartX;\n            const deltaY = e.touches[0].clientY - this._touchStartY;\n            this._azimuthSpeed = -(deltaX * this.xSensitivity);\n            this._polarSpeed = deltaY * this.ySensitivity;\n            this._touchStartX = e.touches[0].clientX;\n            this._touchStartY = e.touches[0].clientY;\n        }\n        else if (e.touches.length === 2) {\n            /* Handle pinch zoom */\n            const currentPinchDistance = this._getDistanceBetweenTouches(e.touches);\n            const pinchScale = this._initialPinchDistance / currentPinchDistance;\n            this.radial *= pinchScale;\n            this.radial = Math.min(this.maxZoom, Math.max(this.minZoom, this.radial));\n            this._updateCamera();\n            /* Update initial pinch distance for next move */\n            this._initialPinchDistance = currentPinchDistance;\n        }\n    };\n    _onTouchEnd = (e) => {\n        if (e.touches.length < 2) {\n            this._mouseDown = false; /* Treat touch end like mouse up */\n        }\n        if (e.touches.length === 1) {\n            /* Prepare for possible single touch movement */\n            this._touchStartX = e.touches[0].clientX;\n            this._touchStartY = e.touches[0].clientY;\n        }\n    };\n    /**\n     * Helper function to calculate the distance between two touch points\n     * @param touches list of touch points\n     * @returns distance between the two touch points\n     */\n    _getDistanceBetweenTouches(touches) {\n        const dx = touches[0].clientX - touches[1].clientX;\n        const dy = touches[0].clientY - touches[1].clientY;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n}\n__decorate([\n    property.int()\n], OrbitalCamera.prototype, \"mouseButtonIndex\", void 0);\n__decorate([\n    property.float(5)\n], OrbitalCamera.prototype, \"radial\", void 0);\n__decorate([\n    property.float()\n], OrbitalCamera.prototype, \"minElevation\", void 0);\n__decorate([\n    property.float(89.99)\n], OrbitalCamera.prototype, \"maxElevation\", void 0);\n__decorate([\n    property.float()\n], OrbitalCamera.prototype, \"minZoom\", void 0);\n__decorate([\n    property.float(10.0)\n], OrbitalCamera.prototype, \"maxZoom\", void 0);\n__decorate([\n    property.float(0.5)\n], OrbitalCamera.prototype, \"xSensitivity\", void 0);\n__decorate([\n    property.float(0.5)\n], OrbitalCamera.prototype, \"ySensitivity\", void 0);\n__decorate([\n    property.float(0.02)\n], OrbitalCamera.prototype, \"zoomSensitivity\", void 0);\n__decorate([\n    property.float(0.9)\n], OrbitalCamera.prototype, \"damping\", void 0);\nexport { OrbitalCamera };\n//# sourceMappingURL=orbital-camera.js.map", "import {Component, Property} from '@wonderlandengine/api';\r\nimport {AudioSource} from '@wonderlandengine/spatial-audio';\r\n\r\n/**\r\n * Ambient Audio - Extends AudioSource with fade in/out capabilities\r\n *\r\n * This component wraps the built-in AudioSource to add:\r\n * - Fade in/out methods for smooth transitions\r\n * - Global access for InteractiveObject components\r\n * - Auto-start ambient loop on app launch\r\n *\r\n * Setup:\r\n * 1. Add to an empty object in scene (e.g., \"AmbientAudio\")\r\n * 2. Set src to your ambient loop audio file\r\n * 3. Configure volume and fade durations\r\n * 4. InteractiveObject components will control this automatically\r\n */\r\nexport class AmbientAudio extends AudioSource {\r\n    static TypeName = 'ambient-audio';\r\n    static Properties = {\r\n        ...AudioSource.Properties,\r\n        fadeInDuration: Property.float(2.0),\r\n        fadeOutDuration: Property.float(1.0),\r\n        debugMode: Property.bool(true)\r\n    };\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        // State for fading\r\n        this.isFading = false;\r\n        this.fadeStartVolume = this.volume;\r\n        this.fadeTargetVolume = this.volume;\r\n        this.fadeStartTime = 0;\r\n        this.fadeDuration = 0;\r\n        this.fadeInterval = null;\r\n        this.fadeCallback = null;\r\n        this.previousVolume = this.volume;\r\n\r\n        // Make globally accessible for InteractiveObject components\r\n        window.ambientAudio = this;\r\n\r\n        console.log('[AmbientAudio] Initialized and registered at window.ambientAudio');\r\n        console.log('[AmbientAudio] Instance:', this);\r\n    }\r\n\r\n    // Easing function for smooth fade perception\r\n    easeInOutQuad(t) {\r\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n    }\r\n\r\n    async start() {\r\n        // Set spatial to None for ambient (non-directional) audio\r\n        this.spatial = 0; // PanningType.None\r\n\r\n        // Call parent start() which handles autoplay\r\n        await super.start();\r\n\r\n        if (this.debugMode) {\r\n            console.log('[AmbientAudio] Started with settings:', {\r\n                src: this.src,\r\n                volume: this.volume,\r\n                loop: this.loop,\r\n                autoplay: this.autoplay,\r\n                fadeInDuration: this.fadeInDuration,\r\n                fadeOutDuration: this.fadeOutDuration\r\n            });\r\n\r\n            // Verify methods are available\r\n            console.log('[AmbientAudio] fadeOut method available:', typeof this.fadeOut === 'function');\r\n            console.log('[AmbientAudio] fadeIn method available:', typeof this.fadeIn === 'function');\r\n\r\n            this.setupDebugControls();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fade out the audio smoothly\r\n     * @param duration Optional custom fade duration (uses fadeOutDuration by default)\r\n     * @param onComplete Optional callback when fade completes\r\n     */\r\n    fadeOut(duration = null, onComplete = null) {\r\n        const fadeDuration = duration !== null ? duration : this.fadeOutDuration;\r\n\r\n        if (this.debugMode) {\r\n            console.log(`[AmbientAudio] Starting manual fade out over ${fadeDuration}s`);\r\n            console.log('[AmbientAudio] Current volume before fade:', this.volume);\r\n        }\r\n\r\n        // Store the current volume to restore later\r\n        this.previousVolume = this.volume;\r\n        this.fadeStartVolume = this.volume;\r\n        this.fadeTargetVolume = 0.0;\r\n\r\n        // Clear any existing fade interval\r\n        if (this.fadeInterval) {\r\n            clearInterval(this.fadeInterval);\r\n        }\r\n\r\n        // Track fade state\r\n        this.isFading = true;\r\n        this.fadeStartTime = Date.now();\r\n        this.fadeDuration = fadeDuration * 1000; // Convert to ms\r\n        this.fadeCallback = onComplete;\r\n\r\n        // Start the manual fade process\r\n        const steps = 30; // Update volume 30 times per second for smooth fade\r\n        const stepDuration = 1000 / steps; // milliseconds between updates\r\n        const totalSteps = Math.floor(fadeDuration * steps);\r\n        let currentStep = 0;\r\n\r\n        this.fadeInterval = setInterval(() => {\r\n            currentStep++;\r\n            const progress = currentStep / totalSteps;\r\n\r\n            // Use easing for smoother perception\r\n            const easedProgress = this.easeInOutQuad(progress);\r\n\r\n            // Calculate current volume\r\n            const currentVolume = this.fadeStartVolume * (1 - easedProgress);\r\n\r\n            // Apply the volume change\r\n            this.setVolumeDuringPlayback(currentVolume, 0); // Instant change, we handle the smoothing\r\n\r\n            if (this.debugMode && currentStep % steps === 0) {\r\n                console.log(`[AmbientAudio] Fade progress: ${Math.round(progress * 100)}%, volume: ${currentVolume.toFixed(3)}`);\r\n            }\r\n\r\n            // Check if fade is complete\r\n            if (currentStep >= totalSteps) {\r\n                clearInterval(this.fadeInterval);\r\n                this.fadeInterval = null;\r\n                this.isFading = false;\r\n\r\n                // Ensure we're at target volume\r\n                this.setVolumeDuringPlayback(0, 0);\r\n\r\n                if (this.debugMode) {\r\n                    console.log('[AmbientAudio] Fade out complete');\r\n                }\r\n\r\n                if (this.fadeCallback) {\r\n                    this.fadeCallback();\r\n                    this.fadeCallback = null;\r\n                }\r\n            }\r\n        }, stepDuration);\r\n    }\r\n\r\n    /**\r\n     * Fade in the audio smoothly\r\n     * @param duration Optional custom fade duration (uses fadeInDuration by default)\r\n     * @param onComplete Optional callback when fade completes\r\n     */\r\n    fadeIn(duration = null, onComplete = null) {\r\n        const fadeDuration = duration !== null ? duration : this.fadeInDuration;\r\n        // Restore to previous volume or default volume\r\n        const targetVolume = this.previousVolume || this.volume;\r\n\r\n        if (this.debugMode) {\r\n            console.log(`[AmbientAudio] Starting manual fade in to ${targetVolume} over ${fadeDuration}s`);\r\n        }\r\n\r\n        // Set fade parameters\r\n        this.fadeStartVolume = 0.0;\r\n        this.fadeTargetVolume = targetVolume;\r\n\r\n        // Clear any existing fade interval\r\n        if (this.fadeInterval) {\r\n            clearInterval(this.fadeInterval);\r\n        }\r\n\r\n        // Start from silence\r\n        this.setVolumeDuringPlayback(0, 0);\r\n\r\n        // Track fade state\r\n        this.isFading = true;\r\n        this.fadeStartTime = Date.now();\r\n        this.fadeDuration = fadeDuration * 1000; // Convert to ms\r\n        this.fadeCallback = onComplete;\r\n\r\n        // Start the manual fade process\r\n        const steps = 30; // Update volume 30 times per second for smooth fade\r\n        const stepDuration = 1000 / steps; // milliseconds between updates\r\n        const totalSteps = Math.floor(fadeDuration * steps);\r\n        let currentStep = 0;\r\n\r\n        this.fadeInterval = setInterval(() => {\r\n            currentStep++;\r\n            const progress = currentStep / totalSteps;\r\n\r\n            // Use easing for smoother perception\r\n            const easedProgress = this.easeInOutQuad(progress);\r\n\r\n            // Calculate current volume\r\n            const currentVolume = targetVolume * easedProgress;\r\n\r\n            // Apply the volume change\r\n            this.setVolumeDuringPlayback(currentVolume, 0); // Instant change, we handle the smoothing\r\n\r\n            if (this.debugMode && currentStep % steps === 0) {\r\n                console.log(`[AmbientAudio] Fade progress: ${Math.round(progress * 100)}%, volume: ${currentVolume.toFixed(3)}`);\r\n            }\r\n\r\n            // Check if fade is complete\r\n            if (currentStep >= totalSteps) {\r\n                clearInterval(this.fadeInterval);\r\n                this.fadeInterval = null;\r\n                this.isFading = false;\r\n\r\n                // Ensure we're at target volume\r\n                this.setVolumeDuringPlayback(targetVolume, 0);\r\n\r\n                if (this.debugMode) {\r\n                    console.log('[AmbientAudio] Fade in complete');\r\n                }\r\n\r\n                if (this.fadeCallback) {\r\n                    this.fadeCallback();\r\n                    this.fadeCallback = null;\r\n                }\r\n            }\r\n        }, stepDuration);\r\n    }\r\n\r\n    /**\r\n     * Fade to a specific volume\r\n     * @param targetVolume Target volume (0-1)\r\n     * @param duration Fade duration in seconds\r\n     */\r\n    fadeTo(targetVolume, duration) {\r\n        targetVolume = Math.max(0, Math.min(1, targetVolume));\r\n\r\n        if (this.debugMode) {\r\n            console.log(`[AmbientAudio] Fading to ${targetVolume} over ${duration}s`);\r\n        }\r\n\r\n        this.setVolumeDuringPlayback(targetVolume, duration);\r\n\r\n        // Track fade state\r\n        this.isFading = true;\r\n        this.fadeStartTime = Date.now();\r\n        this.fadeDuration = duration * 1000;\r\n\r\n        setTimeout(() => {\r\n            this.isFading = false;\r\n        }, this.fadeDuration);\r\n    }\r\n\r\n    setupDebugControls() {\r\n        console.log('[AmbientAudio] Debug controls:');\r\n        console.log('  O - Fade out (use fadeOutDuration parameter)');\r\n        console.log('  P - Fade in (use fadeInDuration parameter)');\r\n        console.log('  L - Toggle loop');\r\n        console.log('  K - Play/Stop');\r\n        console.log(`  Current fade durations: In=${this.fadeInDuration}s, Out=${this.fadeOutDuration}s`);\r\n\r\n        this.onKeyDown = (event) => {\r\n            if (event.code === 'KeyO' && !this.isFading) {\r\n                this.fadeOut();\r\n            } else if (event.code === 'KeyP' && !this.isFading) {\r\n                this.fadeIn();\r\n            } else if (event.code === 'KeyL') {\r\n                // Toggle loop property\r\n                this.loop = !this.loop;\r\n                console.log(`[AmbientAudio] Loop toggled to: ${this.loop}`);\r\n\r\n                // Update the actual audio element if it exists\r\n                // AudioSource stores the audio buffer internally\r\n                // We need to update the loop property when replaying\r\n                if (this._audioNode) {\r\n                    this._audioNode.loop = this.loop;\r\n                    console.log('[AmbientAudio] Updated audio node loop property');\r\n                }\r\n            } else if (event.code === 'KeyK') {\r\n                if (this.isPlaying) {\r\n                    this.stop();\r\n                    console.log('[AmbientAudio] Stopped');\r\n                } else {\r\n                    this.play();\r\n                    console.log('[AmbientAudio] Playing');\r\n                }\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', this.onKeyDown);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n\r\n        // Clear any running fade interval\r\n        if (this.fadeInterval) {\r\n            clearInterval(this.fadeInterval);\r\n            this.fadeInterval = null;\r\n        }\r\n\r\n        // Clean up debug controls\r\n        if (this.onKeyDown) {\r\n            window.removeEventListener('keydown', this.onKeyDown);\r\n        }\r\n\r\n        // Remove global reference\r\n        if (window.ambientAudio === this) {\r\n            window.ambientAudio = null;\r\n        }\r\n    }\r\n}", "import { Component, Property } from '@wonderlandengine/api';\r\nimport { vec3 } from 'gl-matrix';\r\n\r\n/**\r\n * Extended WASD controls with vertical movement (Q/E for up/down)\r\n */\r\nexport class ExtendedWasdControls extends Component {\r\n    static TypeName = 'extended-wasd-controls';\r\n    static Properties = {\r\n        speed: Property.float(0.1),\r\n        verticalSpeed: Property.float(0.1),\r\n        headObject: Property.object(),\r\n        lockY: Property.bool(false)\r\n    };\r\n    \r\n    init() {\r\n        // Movement state\r\n        this.forward = false;\r\n        this.backward = false;\r\n        this.left = false;\r\n        this.right = false;\r\n        this.up = false;\r\n        this.down = false;\r\n        \r\n        // Temp vectors\r\n        this.direction = new Float32Array(3);\r\n        this.tempTransform = new Float32Array(8);\r\n    }\r\n    \r\n    start() {\r\n        this.headObject = this.headObject || this.object;\r\n        console.log('[ExtendedWasdControls] Started with vertical movement (Q/E for up/down)');\r\n    }\r\n    \r\n    onActivate() {\r\n        window.addEventListener('keydown', this.onKeyDown);\r\n        window.addEventListener('keyup', this.onKeyUp);\r\n    }\r\n    \r\n    onDeactivate() {\r\n        window.removeEventListener('keydown', this.onKeyDown);\r\n        window.removeEventListener('keyup', this.onKeyUp);\r\n    }\r\n    \r\n    onKeyDown = (e) => {\r\n        this.handleKey(e, true);\r\n    }\r\n    \r\n    onKeyUp = (e) => {\r\n        this.handleKey(e, false);\r\n    }\r\n    \r\n    handleKey(e, pressed) {\r\n        switch(e.code) {\r\n            case 'KeyW':\r\n            case 'ArrowUp':\r\n                this.forward = pressed;\r\n                break;\r\n            case 'KeyS':\r\n            case 'ArrowDown':\r\n                this.backward = pressed;\r\n                break;\r\n            case 'KeyA':\r\n            case 'ArrowLeft':\r\n                this.left = pressed;\r\n                break;\r\n            case 'KeyD':\r\n            case 'ArrowRight':\r\n                this.right = pressed;\r\n                break;\r\n            case 'KeyQ':\r\n                this.up = pressed;\r\n                break;\r\n            case 'KeyE':\r\n                this.down = pressed;\r\n                break;\r\n        }\r\n    }\r\n    \r\n    update(dt) {\r\n        vec3.zero(this.direction);\r\n        \r\n        // Forward/backward\r\n        if (this.forward) this.direction[2] -= 1.0;\r\n        if (this.backward) this.direction[2] += 1.0;\r\n        \r\n        // Left/right\r\n        if (this.left) this.direction[0] -= 1.0;\r\n        if (this.right) this.direction[0] += 1.0;\r\n        \r\n        // Only process if there's horizontal movement\r\n        if (this.direction[0] !== 0 || this.direction[2] !== 0) {\r\n            vec3.normalize(this.direction, this.direction);\r\n            vec3.scale(this.direction, this.direction, this.speed);\r\n            \r\n            // Transform by head rotation\r\n            vec3.transformQuat(\r\n                this.direction, \r\n                this.direction, \r\n                this.headObject.getTransformWorld(this.tempTransform)\r\n            );\r\n            \r\n            // Lock Y if enabled\r\n            if (this.lockY) {\r\n                this.direction[1] = 0;\r\n                vec3.normalize(this.direction, this.direction);\r\n                vec3.scale(this.direction, this.direction, this.speed);\r\n            }\r\n            \r\n            this.object.translateLocal(this.direction);\r\n        }\r\n        \r\n        // Vertical movement (not affected by head rotation)\r\n        if (!this.lockY) {\r\n            if (this.up) {\r\n                this.object.translateLocal([0, this.verticalSpeed, 0]);\r\n            }\r\n            if (this.down) {\r\n                this.object.translateLocal([0, -this.verticalSpeed, 0]);\r\n            }\r\n        }\r\n    }\r\n}", "import {Component, Property} from '@wonderlandengine/api';\r\n\r\n/**\r\n * InteractiveObject - Handles proximity-based interactions with gallery objects\r\n * When player approaches within trigger distance:\r\n * - Triggers sky transition to night\r\n * - Activates spotlight on object\r\n * - Plays associated video on room walls\r\n * - Object disappears after video ends\r\n * \r\n * Setup Instructions:\r\n * 1. Add this component to an interactive object in the scene\r\n * 2. Set playerObject to the main Player object (not EyeLeft/EyeRight)\r\n * 3. Set skyController to object with SkySphereControllerV2 component\r\n * 4. Set videoWallController to object with VideoWallTiled component\r\n * 5. Set room to 'left' or 'right' based on which room the object is in\r\n * 6. Optionally set videoUrl to override the default video for this object\r\n * \r\n * Room Configuration:\r\n * - 'left': Plays video on left room walls (materials 4,5,6)\r\n * - 'right': Plays video on right room walls (materials 7,8,9)\r\n * - 'both': Plays on both rooms (requires two VideoWallTiled components)\r\n */\r\nexport class InteractiveObject extends Component {\r\n    static TypeName = 'interactive-object';\r\n    static Properties = {\r\n        triggerDistance: Property.float(1.0),\r\n        playerObject: Property.object(),\r\n        videoWallController: Property.object(),  // Object with VideoWallTiled component\r\n        room: Property.enum(['left', 'right', 'both'], 'left'),  // Which room this object belongs to\r\n        videoUrl: Property.string(''),  // Optional: override video URL in VideoWallTiled\r\n        videoDuration: Property.float(240.0), // 4 minutes default\r\n        disappearDuration: Property.float(1.0),\r\n        spotlightObject: Property.object(),  // Object with light and light-fade-controller\r\n        lightFadeOutDuration: Property.float(2.0),\r\n        lightFadeInDuration: Property.float(2.0),\r\n        debugMode: Property.bool(true)\r\n    };\r\n    \r\n    init() {\r\n        this.isTriggered = false;\r\n        this.isPlaying = false;\r\n        this.hasBeenPlayed = false;\r\n        this.videoEndTime = 0;\r\n        this.disappearProgress = 0;\r\n\r\n        // Store original transform for animation\r\n        this.originalScale = new Float32Array(3);\r\n        this.originalPosition = new Float32Array(3);\r\n\r\n        // Player position for distance check\r\n        this.playerPos = new Float32Array(3);\r\n        this.objectPos = new Float32Array(3);\r\n\r\n        // Store reference to ambient audio component (will find it later)\r\n        this.ambientAudioComponent = null;\r\n\r\n        // Error logging flag\r\n        this.errorLogged = false;\r\n\r\n        console.log('[InteractiveObject] Initialized');\r\n    }\r\n    \r\n    start() {\r\n        // Validate required references\r\n        if (!this.playerObject) {\r\n            console.error('[InteractiveObject] Player object not assigned!');\r\n            return;\r\n        }\r\n        \r\n        // Store original transform\r\n        this.object.getScalingLocal(this.originalScale);\r\n        this.object.getPositionLocal(this.originalPosition);\r\n        \r\n        // Get video wall controller component if assigned\r\n        this.videoWallComponent = null;\r\n        if (this.videoWallController) {\r\n            this.videoWallComponent = this.videoWallController.getComponent('video-wall-tiled');\r\n            \r\n            if (!this.videoWallComponent) {\r\n                console.warn('[InteractiveObject] Video wall controller object assigned but no VideoWallTiled component found');\r\n            } else {\r\n                console.log('[InteractiveObject] VideoWallTiled component found:', this.videoWallComponent);\r\n                console.log('[InteractiveObject] Room assignment:', this.room);\r\n            }\r\n        } else {\r\n            console.warn('[InteractiveObject] No video wall controller assigned - video playback will not work');\r\n        }\r\n        \r\n        if (this.debugMode) {\r\n            console.log('[InteractiveObject] Ready for interaction', {\r\n                object: this.object.name,\r\n                triggerDistance: this.triggerDistance,\r\n                videoDuration: this.videoDuration\r\n            });\r\n        }\r\n    }\r\n    \r\n    update(dt) {\r\n        // Skip if already played\r\n        if (this.hasBeenPlayed) {\r\n            // Handle disappear animation\r\n            if (this.disappearProgress < 1.0) {\r\n                this.updateDisappearAnimation(dt);\r\n            }\r\n            return;\r\n        }\r\n        \r\n        // Check if playerObject is set\r\n        if (!this.playerObject) {\r\n            if (!this.errorLogged) {\r\n                console.error('[InteractiveObject] Player object not set! In the editor:', \r\n                    '\\n1. Select the object with this component',\r\n                    '\\n2. Find \"playerObject\" property', \r\n                    '\\n3. Click the target icon and select \"Player\" (the root player object, not EyeLeft/EyeRight/NonVrCamera)');\r\n                this.errorLogged = true;\r\n            }\r\n            return;\r\n        }\r\n        \r\n        // Check distance to player\r\n        this.playerObject.getPositionWorld(this.playerPos);\r\n        this.object.getPositionWorld(this.objectPos);\r\n        \r\n        const distance = this.calculateDistance(this.playerPos, this.objectPos);\r\n        \r\n        // Check for trigger\r\n        if (!this.isTriggered && distance <= this.triggerDistance) {\r\n            console.log(`[InteractiveObject] Distance ${distance.toFixed(2)}m <= trigger ${this.triggerDistance}m - Triggering!`);\r\n            this.onPlayerApproach();\r\n        }\r\n        \r\n        // Check if video should end\r\n        if (this.isPlaying && this.videoEndTime > 0) {\r\n            if (Date.now() >= this.videoEndTime) {\r\n                this.onVideoEnd();\r\n            }\r\n        }\r\n    }\r\n    \r\n    calculateDistance(pos1, pos2) {\r\n        const dx = pos1[0] - pos2[0];\r\n        const dy = pos1[1] - pos2[1];\r\n        const dz = pos1[2] - pos2[2];\r\n        return Math.sqrt(dx * dx + dy * dy + dz * dz);\r\n    }\r\n    \r\n    onPlayerApproach() {\r\n        if (this.isTriggered || this.hasBeenPlayed) return;\r\n\r\n        this.isTriggered = true;\r\n        this.isPlaying = true;\r\n\r\n        console.log('[InteractiveObject] Player approached - triggering interaction');\r\n\r\n        // 1. Fade out ambient audio - try multiple ways to find it\r\n        // Use cached reference if available\r\n        if (!this.ambientAudioComponent) {\r\n            // Try global reference first\r\n            this.ambientAudioComponent = window.ambientAudio;\r\n\r\n            // If not found globally, search for it in the scene\r\n            if (!this.ambientAudioComponent) {\r\n                console.log('[InteractiveObject] Searching for ambient-audio component in scene...');\r\n                // Find all objects in scene and look for ambient-audio component\r\n                const allObjects = this.engine.scene.findByName('AmbientAudio');\r\n                if (allObjects.length > 0) {\r\n                    this.ambientAudioComponent = allObjects[0].getComponent('ambient-audio');\r\n                    console.log('[InteractiveObject] Found AmbientAudio object:', this.ambientAudioComponent);\r\n                }\r\n\r\n                // If still not found, try a broader search\r\n                if (!this.ambientAudioComponent) {\r\n                    // Look for any object with ambient-audio component\r\n                    const root = this.engine.scene.root;\r\n                    this.ambientAudioComponent = root.getComponent('ambient-audio', 1); // Search recursively\r\n                }\r\n            }\r\n        }\r\n\r\n        // Start all fades in parallel\r\n        console.log('[InteractiveObject] Starting parallel fades (audio and lights)');\r\n\r\n        // 1. Fade out ambient audio\r\n        let audioFadeComplete = false;\r\n        const audioFadeDuration = this.ambientAudioComponent ?\r\n            (this.ambientAudioComponent.fadeOutDuration || 2.0) : 0;\r\n\r\n        if (this.ambientAudioComponent) {\r\n            console.log('[InteractiveObject] Starting ambient audio fade out');\r\n            this.ambientAudioComponent.fadeOut(null, () => {\r\n                audioFadeComplete = true;\r\n                console.log('[InteractiveObject] Audio fade complete');\r\n                checkAllFadesComplete();\r\n            });\r\n        } else {\r\n            audioFadeComplete = true;\r\n        }\r\n\r\n        // 2. Fade lights (in parallel with audio)\r\n        let lightsFadeComplete = false;\r\n        console.log('[InteractiveObject] Starting light fades');\r\n        this.activateSpotlight(() => {\r\n            lightsFadeComplete = true;\r\n            console.log('[InteractiveObject] Light fades complete');\r\n            checkAllFadesComplete();\r\n        });\r\n\r\n        // Function to check if all fades are complete\r\n        const checkAllFadesComplete = () => {\r\n            if (audioFadeComplete && lightsFadeComplete) {\r\n                console.log('[InteractiveObject] All fades complete, starting video');\r\n                // 3. Start video playback after all fades complete\r\n                this.startVideo();\r\n            }\r\n        };\r\n\r\n        // If no audio component, check immediately\r\n        if (!this.ambientAudioComponent) {\r\n            checkAllFadesComplete();\r\n        }\r\n        \r\n        // Set video end time\r\n        this.videoEndTime = Date.now() + (this.videoDuration * 1000);\r\n    }\r\n    \r\n    onVideoEnd() {\r\n        console.log('[InteractiveObject] Video ended');\r\n\r\n        this.isPlaying = false;\r\n        this.hasBeenPlayed = true;\r\n\r\n        // 1. Fade ambient audio back in - use cached reference\r\n        if (this.ambientAudioComponent) {\r\n            console.log('[InteractiveObject] Fading ambient audio back in');\r\n            this.ambientAudioComponent.fadeIn();\r\n        }\r\n\r\n        // 2. Stop video playback\r\n        if (this.videoWallComponent && this.videoWallComponent.video) {\r\n            this.videoWallComponent.video.pause();\r\n            this.videoWallComponent.video.currentTime = 0;\r\n            \r\n            // Restore original video URL if we changed it\r\n            if (this.originalVideoUrl) {\r\n                this.videoWallComponent.videoUrl = this.originalVideoUrl;\r\n                this.videoWallComponent.video.src = this.originalVideoUrl;\r\n                this.originalVideoUrl = null;\r\n            }\r\n            \r\n            console.log('[InteractiveObject] Video stopped and reset');\r\n        }\r\n        \r\n        // 3. Deactivate spotlight and restore lights\r\n        this.deactivateSpotlight();\r\n\r\n        // 5. Start disappear animation\r\n        this.disappearProgress = 0;\r\n    }\r\n    \r\n    updateDisappearAnimation(dt) {\r\n        this.disappearProgress += dt / this.disappearDuration;\r\n        \r\n        if (this.disappearProgress >= 1.0) {\r\n            this.disappearProgress = 1.0;\r\n            // Hide object completely\r\n            this.object.setScalingLocal([0, 0, 0]);\r\n            console.log('[InteractiveObject] Object disappeared');\r\n            \r\n            // Notify experience manager if exists\r\n            this.notifyCompletion();\r\n        } else {\r\n            // Smooth scale down\r\n            const scale = 1.0 - this.smoothstep(0, 1, this.disappearProgress);\r\n            this.object.setScalingLocal([\r\n                this.originalScale[0] * scale,\r\n                this.originalScale[1] * scale,\r\n                this.originalScale[2] * scale\r\n            ]);\r\n            \r\n            // Optional: fade or move down\r\n            const yOffset = this.disappearProgress * -0.5; // Sink slightly\r\n            this.object.setPositionLocal([\r\n                this.originalPosition[0],\r\n                this.originalPosition[1] + yOffset,\r\n                this.originalPosition[2]\r\n            ]);\r\n        }\r\n    }\r\n    \r\n    activateSpotlight(onComplete) {\r\n        console.log('[InteractiveObject] Activating spotlight and fading other lights');\r\n\r\n        // Get all light controllers\r\n        const lightControllers = window.lightControllers || [];\r\n\r\n        if (lightControllers.length === 0) {\r\n            console.warn('[InteractiveObject] No light controllers found in scene');\r\n            if (onComplete) onComplete();\r\n            return;\r\n        }\r\n\r\n        // Track fade completion for all lights\r\n        let fadesInProgress = 0;\r\n        let fadesCompleted = 0;\r\n\r\n        const checkFadesComplete = () => {\r\n            fadesCompleted++;\r\n            if (fadesCompleted >= fadesInProgress && onComplete) {\r\n                onComplete();\r\n            }\r\n        };\r\n\r\n        // Fade out all fadeable lights, activate spotlight\r\n        lightControllers.forEach(controller => {\r\n            if (controller.isSpotlightForObject(this)) {\r\n                // This is our spotlight - fade it in\r\n                console.log('[InteractiveObject] Fading in spotlight');\r\n                fadesInProgress++;\r\n                controller.fadeIn(this.lightFadeInDuration, null, checkFadesComplete);\r\n            } else if (controller.shouldFadeForObject(this)) {\r\n                // This is a fadeable light - fade it out\r\n                console.log('[InteractiveObject] Fading out fadeable light');\r\n                fadesInProgress++;\r\n                controller.fadeOut(this.lightFadeOutDuration, checkFadesComplete);\r\n            }\r\n            // Static lights are left alone\r\n        });\r\n\r\n        // If no fades were started, complete immediately\r\n        if (fadesInProgress === 0 && onComplete) {\r\n            onComplete();\r\n        }\r\n    }\r\n    \r\n    deactivateSpotlight() {\r\n        console.log('[InteractiveObject] Deactivating spotlight and restoring lights');\r\n\r\n        // Get all light controllers\r\n        const lightControllers = window.lightControllers || [];\r\n\r\n        if (lightControllers.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Restore all lights to their original state\r\n        lightControllers.forEach(controller => {\r\n            if (controller.isSpotlightForObject(this)) {\r\n                // This is our spotlight - fade it out\r\n                console.log('[InteractiveObject] Fading out spotlight');\r\n                controller.fadeOut(this.lightFadeOutDuration);\r\n            } else if (controller.shouldFadeForObject(this)) {\r\n                // This is a fadeable light - fade it back in\r\n                console.log('[InteractiveObject] Restoring fadeable light');\r\n                controller.fadeIn(this.lightFadeInDuration);\r\n            }\r\n            // Static lights are left alone\r\n        });\r\n    }\r\n    \r\n    startVideo() {\r\n        console.log('[InteractiveObject] Starting video playback');\r\n        \r\n        if (this.videoWallComponent) {\r\n            // Check if we need to override the video URL\r\n            if (this.videoUrl && this.videoUrl.length > 0) {\r\n                console.log(`[InteractiveObject] Overriding video URL to: ${this.videoUrl}`);\r\n                // Store original URL to restore later\r\n                this.originalVideoUrl = this.videoWallComponent.videoUrl;\r\n                this.videoWallComponent.videoUrl = this.videoUrl;\r\n                \r\n                // Update the video source\r\n                if (this.videoWallComponent.video) {\r\n                    this.videoWallComponent.video.src = this.videoUrl;\r\n                    this.videoWallComponent.video.load();\r\n                }\r\n            }\r\n            \r\n            // Start the video playback\r\n            if (this.videoWallComponent.video) {\r\n                // Make sure video is ready to play\r\n                const playVideo = () => {\r\n                    this.videoWallComponent.video.currentTime = 0;  // Reset to start\r\n                    this.videoWallComponent.video.play().then(() => {\r\n                        console.log(`[InteractiveObject] Video playing in ${this.room} room`);\r\n                        \r\n                        // Start update loop if not already running\r\n                        if (!this.videoWallComponent.updateLoopStarted) {\r\n                            this.videoWallComponent.startUpdateLoop();\r\n                        }\r\n                    }).catch(err => {\r\n                        console.error('[InteractiveObject] Failed to start video:', err);\r\n                    });\r\n                };\r\n                \r\n                // Check if video is already loaded\r\n                if (this.videoWallComponent.video.readyState >= 2) {\r\n                    playVideo();\r\n                } else {\r\n                    // Wait for video to be ready\r\n                    this.videoWallComponent.video.addEventListener('loadeddata', playVideo, { once: true });\r\n                }\r\n            } else {\r\n                console.error('[InteractiveObject] VideoWallTiled component has no video element');\r\n            }\r\n            \r\n            console.log('[InteractiveObject] Video controller activated', {\r\n                room: this.room,\r\n                url: this.videoUrl || 'default',\r\n                duration: this.videoDuration\r\n            });\r\n        } else {\r\n            console.warn('[InteractiveObject] No video wall component available - cannot play video');\r\n        }\r\n    }\r\n    \r\n    notifyCompletion() {\r\n        // This will be used by experience manager to track overall progress\r\n        if (window.interactiveObjectCompleted) {\r\n            window.interactiveObjectCompleted(this.object.name);\r\n        }\r\n    }\r\n    \r\n    smoothstep(edge0, edge1, x) {\r\n        const t = Math.max(0, Math.min(1, (x - edge0) / (edge1 - edge0)));\r\n        return t * t * (3 - 2 * t);\r\n    }\r\n    \r\n    // Public API\r\n    isCompleted() {\r\n        return this.hasBeenPlayed && this.disappearProgress >= 1.0;\r\n    }\r\n    \r\n    reset() {\r\n        this.isTriggered = false;\r\n        this.isPlaying = false;\r\n        this.hasBeenPlayed = false;\r\n        this.disappearProgress = 0;\r\n        this.object.setScalingLocal(this.originalScale);\r\n        this.object.setPositionLocal(this.originalPosition);\r\n    }\r\n}", "import {Component, Property} from '@wonderlandengine/api';\r\n\r\n/**\r\n * Light Fade Controller - Controls smooth fading of lights\r\n *\r\n * Features:\r\n * - Smooth fade in/out for light intensity\r\n * - Can be marked as \"fadeable\" or \"spotlight\"\r\n * - Global coordination with InteractiveObject components\r\n * - Initial fade-in on experience start\r\n *\r\n * Setup:\r\n * 1. Add to any object with a light component\r\n * 2. Set lightType to control behavior:\r\n *    - \"fadeable\": Will fade out when any interactive object triggers (default)\r\n *    - \"spotlight\": Will only activate for its assigned interactive object\r\n *    - \"static\": Never fades (always on)\r\n * 3. Configure fade durations and initial state\r\n */\r\nexport class LightFadeController extends Component {\r\n    static TypeName = 'light-fade-controller';\r\n    static Properties = {\r\n        lightType: Property.enum(['fadeable', 'spotlight', 'static'], 'fadeable'),\r\n        fadeInDuration: Property.float(3.0),\r\n        fadeOutDuration: Property.float(2.0),\r\n        initialIntensity: Property.float(1.0),\r\n        startFadedOut: Property.bool(true),  // Start with lights off\r\n        initialFadeInDelay: Property.float(1.0),  // Delay before initial fade-in\r\n        debugMode: Property.bool(true)\r\n    };\r\n\r\n    init() {\r\n        // Light component reference\r\n        this.lightComponent = null;\r\n\r\n        // Fade state\r\n        this.isFading = false;\r\n        this.currentIntensity = this.startFadedOut ? 0 : this.initialIntensity;\r\n        this.targetIntensity = this.initialIntensity;\r\n        this.fadeStartIntensity = this.currentIntensity;\r\n        this.fadeInterval = null;\r\n        this.fadeCallback = null;\r\n\r\n        // Store original intensity\r\n        this.originalIntensity = this.initialIntensity;\r\n\r\n        // Register globally for coordination\r\n        if (!window.lightControllers) {\r\n            window.lightControllers = [];\r\n        }\r\n        window.lightControllers.push(this);\r\n\r\n        console.log('[LightFadeController] Initialized');\r\n    }\r\n\r\n    start() {\r\n        // Get light component\r\n        this.lightComponent = this.object.getComponent('light');\r\n        if (!this.lightComponent) {\r\n            console.error('[LightFadeController] No light component found on object!');\r\n            return;\r\n        }\r\n\r\n        // Store the original intensity from the light component itself\r\n        // This respects what was set in the editor\r\n        this.editorIntensity = this.lightComponent.intensity;\r\n\r\n        // For spotlights, use editor intensity as the target, otherwise use initialIntensity\r\n        if (this.lightType === 1) { // 'spotlight'\r\n            this.originalIntensity = this.editorIntensity > 0 ? this.editorIntensity : this.initialIntensity;\r\n        } else {\r\n            this.originalIntensity = this.initialIntensity;\r\n        }\r\n\r\n        // Set initial intensity based on type\r\n        if (this.lightType === 1) { // 'spotlight' - always start off\r\n            this.lightComponent.intensity = 0;\r\n            this.currentIntensity = 0;\r\n            console.log('[LightFadeController] Spotlight starting OFF, will fade to:', this.originalIntensity);\r\n        } else if (this.lightType === 2) { // 'static' - always on, never fades\r\n            // Static lights should always be on at their set intensity\r\n            this.lightComponent.intensity = this.originalIntensity;\r\n            this.currentIntensity = this.originalIntensity;\r\n            console.log('[LightFadeController] Static light always ON at:', this.originalIntensity);\r\n        } else if (this.lightType === 0) { // 'fadeable'\r\n            if (this.startFadedOut) {\r\n                // Fadeable lights that start faded out\r\n                this.lightComponent.intensity = 0;\r\n                this.currentIntensity = 0;\r\n\r\n                // Schedule initial fade-in\r\n                setTimeout(() => {\r\n                    console.log('[LightFadeController] Starting initial fade-in for fadeable light');\r\n                    this.fadeIn();\r\n                }, this.initialFadeInDelay * 1000);\r\n            } else {\r\n                // Fadeable lights that don't start faded out\r\n                this.lightComponent.intensity = this.originalIntensity;\r\n                this.currentIntensity = this.originalIntensity;\r\n            }\r\n        }\r\n\r\n        if (this.debugMode) {\r\n            console.log('[LightFadeController] Started:', {\r\n                type: ['fadeable', 'spotlight', 'static'][this.lightType],\r\n                editorIntensity: this.editorIntensity,\r\n                targetIntensity: this.originalIntensity,\r\n                currentIntensity: this.currentIntensity,\r\n                startFadedOut: this.startFadedOut,\r\n                object: this.object.name\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fade out the light smoothly\r\n     * @param duration Optional custom fade duration\r\n     * @param onComplete Optional callback when fade completes\r\n     */\r\n    fadeOut(duration = null, onComplete = null) {\r\n        // Static lights don't fade\r\n        if (this.lightType === 2) return; // 'static'\r\n\r\n        const fadeDuration = duration !== null ? duration : this.fadeOutDuration;\r\n\r\n        if (this.debugMode) {\r\n            console.log(`[LightFadeController] Fading out over ${fadeDuration}s`);\r\n        }\r\n\r\n        this.startFade(0, fadeDuration, onComplete);\r\n    }\r\n\r\n    /**\r\n     * Fade in the light smoothly\r\n     * @param duration Optional custom fade duration\r\n     * @param targetIntensity Optional target intensity (uses original by default)\r\n     * @param onComplete Optional callback when fade completes\r\n     */\r\n    fadeIn(duration = null, targetIntensity = null, onComplete = null) {\r\n        const fadeDuration = duration !== null ? duration : this.fadeInDuration;\r\n        const target = targetIntensity !== null ? targetIntensity : this.originalIntensity;\r\n\r\n        if (this.debugMode) {\r\n            console.log(`[LightFadeController] fadeIn called:`, {\r\n                currentIntensity: this.currentIntensity,\r\n                targetIntensity: target,\r\n                originalIntensity: this.originalIntensity,\r\n                editorIntensity: this.editorIntensity,\r\n                duration: fadeDuration,\r\n                lightType: ['fadeable', 'spotlight', 'static'][this.lightType],\r\n                objectName: this.object.name\r\n            });\r\n        }\r\n\r\n        this.startFade(target, fadeDuration, onComplete);\r\n    }\r\n\r\n    /**\r\n     * Fade to a specific intensity\r\n     * @param targetIntensity Target intensity\r\n     * @param duration Fade duration in seconds\r\n     * @param onComplete Optional callback when fade completes\r\n     */\r\n    fadeTo(targetIntensity, duration, onComplete = null) {\r\n        if (this.debugMode) {\r\n            console.log(`[LightFadeController] Fading to ${targetIntensity} over ${duration}s`);\r\n        }\r\n\r\n        this.startFade(targetIntensity, duration, onComplete);\r\n    }\r\n\r\n    startFade(targetIntensity, duration, onComplete) {\r\n        // Clear any existing fade\r\n        if (this.fadeInterval) {\r\n            clearInterval(this.fadeInterval);\r\n        }\r\n\r\n        // Set fade parameters\r\n        this.fadeStartIntensity = this.currentIntensity;\r\n        this.targetIntensity = targetIntensity;\r\n        this.fadeCallback = onComplete;\r\n        this.isFading = true;\r\n\r\n        // Calculate fade steps\r\n        const steps = 30; // 30 updates per second\r\n        const stepDuration = 1000 / steps;\r\n        const totalSteps = Math.floor(duration * steps);\r\n        let currentStep = 0;\r\n\r\n        this.fadeInterval = setInterval(() => {\r\n            currentStep++;\r\n            const progress = currentStep / totalSteps;\r\n\r\n            // Use easing for smooth perception\r\n            const easedProgress = this.easeInOutQuad(progress);\r\n\r\n            // Calculate current intensity\r\n            this.currentIntensity = this.fadeStartIntensity +\r\n                (this.targetIntensity - this.fadeStartIntensity) * easedProgress;\r\n\r\n            // Apply to light component\r\n            if (this.lightComponent) {\r\n                this.lightComponent.intensity = this.currentIntensity;\r\n            }\r\n\r\n            if (this.debugMode && currentStep % steps === 0) {\r\n                console.log(`[LightFadeController] Fade progress: ${Math.round(progress * 100)}%, intensity: ${this.currentIntensity.toFixed(3)}`);\r\n            }\r\n\r\n            // Check if fade is complete\r\n            if (currentStep >= totalSteps) {\r\n                clearInterval(this.fadeInterval);\r\n                this.fadeInterval = null;\r\n                this.isFading = false;\r\n\r\n                // Ensure we're at target intensity\r\n                this.currentIntensity = this.targetIntensity;\r\n                if (this.lightComponent) {\r\n                    this.lightComponent.intensity = this.targetIntensity;\r\n                }\r\n\r\n                if (this.debugMode) {\r\n                    console.log('[LightFadeController] Fade complete');\r\n                }\r\n\r\n                if (this.fadeCallback) {\r\n                    this.fadeCallback();\r\n                    this.fadeCallback = null;\r\n                }\r\n            }\r\n        }, stepDuration);\r\n    }\r\n\r\n    /**\r\n     * Stop any ongoing fade\r\n     */\r\n    stopFade() {\r\n        if (this.fadeInterval) {\r\n            clearInterval(this.fadeInterval);\r\n            this.fadeInterval = null;\r\n            this.isFading = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set intensity immediately without fade\r\n     * @param intensity New intensity value\r\n     */\r\n    setIntensityImmediate(intensity) {\r\n        this.currentIntensity = intensity;\r\n        this.targetIntensity = intensity;\r\n        if (this.lightComponent) {\r\n            this.lightComponent.intensity = intensity;\r\n        }\r\n        this.stopFade();\r\n    }\r\n\r\n    // Easing function for smooth perception\r\n    easeInOutQuad(t) {\r\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n    }\r\n\r\n    onDestroy() {\r\n        // Clear any running fade\r\n        if (this.fadeInterval) {\r\n            clearInterval(this.fadeInterval);\r\n        }\r\n\r\n        // Remove from global registry\r\n        if (window.lightControllers) {\r\n            const index = window.lightControllers.indexOf(this);\r\n            if (index > -1) {\r\n                window.lightControllers.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Public API for InteractiveObject coordination\r\n\r\n    /**\r\n     * Check if this light should fade for a given interactive object\r\n     */\r\n    shouldFadeForObject(interactiveObject) {\r\n        // Fadeable lights always fade\r\n        if (this.lightType === 0) return true; // 'fadeable'\r\n\r\n        // Static lights never fade\r\n        if (this.lightType === 2) return false; // 'static'\r\n\r\n        // Spotlight only stays on for its assigned object\r\n        // This requires InteractiveObject to have a spotlight property\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Check if this is a spotlight for a given interactive object\r\n     */\r\n    isSpotlightForObject(interactiveObject) {\r\n        if (this.lightType !== 1) {\r\n            return false; // Not a spotlight\r\n        }\r\n\r\n        // Check if interactive object has a spotlight assigned\r\n        const hasSpotlight = interactiveObject.spotlightObject !== null &&\r\n                            interactiveObject.spotlightObject !== undefined;\r\n\r\n        if (!hasSpotlight) {\r\n            if (this.debugMode) {\r\n                console.log('[LightFadeController] Interactive object has NO spotlight assigned');\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // Compare the objects\r\n        const areEqual = interactiveObject.spotlightObject === this.object;\r\n\r\n        // Debug logging to understand the comparison\r\n        if (this.debugMode) {\r\n            console.log('[LightFadeController] Spotlight check:', {\r\n                thisLightName: this.object.name,\r\n                assignedSpotlightName: interactiveObject.spotlightObject.name,\r\n                areTheSameObject: areEqual,\r\n                thisObjectId: this.object.id,\r\n                spotlightObjectId: interactiveObject.spotlightObject.id\r\n            });\r\n        }\r\n\r\n        return areEqual;\r\n    }\r\n}", "import {Component, Property} from '@wonderlandengine/api';\r\n\r\n/**\r\n * OpacityController - Simple, reusable component for smooth opacity transitions\r\n * \r\n * Usage:\r\n * - Attach to any object with a mesh component\r\n * - Call fadeIn() or fadeOut() to trigger transitions\r\n * - Can be used for sky spheres, objects, UI elements, etc.\r\n */\r\nexport class OpacityController extends Component {\r\n    static TypeName = 'opacity-controller';\r\n    static Properties = {\r\n        initialOpacity: Property.float(1.0),\r\n        fadeInDuration: Property.float(2.0),\r\n        fadeOutDuration: Property.float(2.0),\r\n        autoStart: Property.bool(false),\r\n        autoStartDirection: Property.enum(['fade-in', 'fade-out'], 'fade-in'),\r\n        debugMode: Property.bool(false)\r\n    };\r\n    \r\n    init() {\r\n        this.currentOpacity = this.initialOpacity;\r\n        this.targetOpacity = this.initialOpacity;\r\n        this.isTransitioning = false;\r\n        this.transitionProgress = 0;\r\n        this.transitionDuration = 0;\r\n        \r\n        // Store reference to mesh and material\r\n        this.meshComponent = null;\r\n        this.material = null;\r\n        this.originalMaterial = null;\r\n        this.materialClone = null;\r\n    }\r\n    \r\n    start() {\r\n        // Get mesh component\r\n        this.meshComponent = this.object.getComponent('mesh');\r\n        if (!this.meshComponent) {\r\n            console.error('[OpacityController] No mesh component found on object!');\r\n            return;\r\n        }\r\n        \r\n        // Store original material and create a clone for opacity control\r\n        this.originalMaterial = this.meshComponent.material;\r\n        if (!this.originalMaterial) {\r\n            console.error('[OpacityController] No material found on mesh!');\r\n            return;\r\n        }\r\n        \r\n        // Clone material for independent opacity control\r\n        this.materialClone = this.originalMaterial.clone();\r\n        this.meshComponent.material = this.materialClone;\r\n        \r\n        // Set initial opacity\r\n        this.setOpacity(this.initialOpacity);\r\n        \r\n        if (this.debugMode) {\r\n            console.log('[OpacityController] Initialized with opacity:', this.initialOpacity);\r\n            console.log('[OpacityController] Fade in duration:', this.fadeInDuration);\r\n            console.log('[OpacityController] Fade out duration:', this.fadeOutDuration);\r\n            \r\n            // Setup debug controls for testing\r\n            this.setupDebugControls();\r\n        }\r\n        \r\n        // Auto-start if enabled\r\n        if (this.autoStart) {\r\n            if (this.autoStartDirection === 0) { // fade-in\r\n                this.fadeIn();\r\n            } else { // fade-out\r\n                this.fadeOut();\r\n            }\r\n        }\r\n    }\r\n    \r\n    update(dt) {\r\n        if (!this.isTransitioning) return;\r\n        \r\n        // Update transition progress\r\n        this.transitionProgress += dt / this.transitionDuration;\r\n        \r\n        if (this.transitionProgress >= 1.0) {\r\n            // Complete transition\r\n            this.currentOpacity = this.targetOpacity;\r\n            this.setOpacity(this.currentOpacity);\r\n            this.isTransitioning = false;\r\n            this.transitionProgress = 1.0;\r\n            \r\n            if (this.debugMode) {\r\n                console.log('[OpacityController] Transition complete. Opacity:', this.currentOpacity);\r\n            }\r\n            \r\n            // Trigger completion callback if set\r\n            if (this.onComplete) {\r\n                this.onComplete();\r\n                this.onComplete = null;\r\n            }\r\n            return;\r\n        }\r\n        \r\n        // Calculate smooth transition using easing\r\n        const t = this.smoothstep(0, 1, this.transitionProgress);\r\n        \r\n        // Interpolate opacity\r\n        const startOpacity = this.targetOpacity > this.currentOpacity ? \r\n            this.currentOpacity : this.currentOpacity;\r\n        const endOpacity = this.targetOpacity;\r\n        const currentOpacity = startOpacity + (endOpacity - startOpacity) * t;\r\n        \r\n        // Apply opacity\r\n        this.setOpacity(currentOpacity);\r\n        \r\n        if (this.debugMode && Math.floor(t * 10) !== Math.floor((t - dt / this.transitionDuration) * 10)) {\r\n            console.log(`[OpacityController] Progress: ${Math.round(t * 100)}%, Opacity: ${currentOpacity.toFixed(2)}`);\r\n        }\r\n    }\r\n    \r\n    setOpacity(opacity) {\r\n        if (!this.materialClone) return;\r\n        \r\n        // Clamp opacity between 0 and 1\r\n        opacity = Math.max(0, Math.min(1, opacity));\r\n        \r\n        // Apply opacity based on material type\r\n        if (this.materialClone.getDiffuseColor) {\r\n            // Phong materials - use diffuse color alpha\r\n            const color = this.materialClone.getDiffuseColor();\r\n            this.materialClone.setDiffuseColor([color[0], color[1], color[2], opacity]);\r\n            \r\n            // For emissive materials (like sky), modulate RGB not alpha!\r\n            // This makes it fade to black instead of transparent\r\n            if (this.materialClone.setEmissiveColor) {\r\n                // Modulate emissive intensity, not alpha\r\n                this.materialClone.setEmissiveColor([opacity, opacity, opacity, 1.0]);\r\n            }\r\n        } else if (this.materialClone.getFlatColor) {\r\n            // Flat materials\r\n            const color = this.materialClone.getFlatColor();\r\n            this.materialClone.setFlatColor([color[0], color[1], color[2], opacity]);\r\n        }\r\n        \r\n        this.currentOpacity = opacity;\r\n    }\r\n    \r\n    // Easing function - using inverse square for perceptually linear fade\r\n    // (Human perception of brightness is non-linear, this compensates)\r\n    smoothstep(edge0, edge1, x) {\r\n        const t = Math.max(0, Math.min(1, (x - edge0) / (edge1 - edge0)));\r\n        \r\n        // Use the same curve for both directions - inverse square\r\n        // This starts slow and accelerates, making it appear more linear\r\n        return 1 - Math.pow(1 - t, 2);\r\n        \r\n        // Alternative: just use linear (uncomment if you prefer)\r\n        // return t;\r\n        \r\n        // Alternative: even more aggressive curve for very linear appearance\r\n        // return 1 - Math.pow(1 - t, 3);\r\n    }\r\n    \r\n    // Public API\r\n    \r\n    /**\r\n     * Fade in to full opacity\r\n     * @param {Function} onComplete - Optional callback when complete\r\n     */\r\n    fadeIn(onComplete = null) {\r\n        if (this.debugMode) {\r\n            console.log('[OpacityController] Starting fade in');\r\n        }\r\n        \r\n        this.startOpacity = this.currentOpacity;\r\n        this.targetOpacity = 1.0;\r\n        this.transitionDuration = this.fadeInDuration;\r\n        this.transitionProgress = 0;\r\n        this.isTransitioning = true;\r\n        this.onComplete = onComplete;\r\n    }\r\n    \r\n    /**\r\n     * Fade out to zero opacity\r\n     * @param {Function} onComplete - Optional callback when complete\r\n     */\r\n    fadeOut(onComplete = null) {\r\n        if (this.debugMode) {\r\n            console.log('[OpacityController] Starting fade out');\r\n        }\r\n        \r\n        this.startOpacity = this.currentOpacity;\r\n        this.targetOpacity = 0.0;\r\n        this.transitionDuration = this.fadeOutDuration;\r\n        this.transitionProgress = 0;\r\n        this.isTransitioning = true;\r\n        this.onComplete = onComplete;\r\n    }\r\n    \r\n    /**\r\n     * Fade to specific opacity\r\n     * @param {number} targetOpacity - Target opacity (0-1)\r\n     * @param {number} duration - Transition duration in seconds\r\n     * @param {Function} onComplete - Optional callback when complete\r\n     */\r\n    fadeTo(targetOpacity, duration, onComplete = null) {\r\n        if (this.debugMode) {\r\n            console.log(`[OpacityController] Fading to ${targetOpacity} over ${duration}s`);\r\n        }\r\n        \r\n        this.startOpacity = this.currentOpacity;\r\n        this.targetOpacity = Math.max(0, Math.min(1, targetOpacity));\r\n        this.transitionDuration = duration;\r\n        this.transitionProgress = 0;\r\n        this.isTransitioning = true;\r\n        this.onComplete = onComplete;\r\n    }\r\n    \r\n    /**\r\n     * Stop current transition\r\n     */\r\n    stop() {\r\n        this.isTransitioning = false;\r\n        this.onComplete = null;\r\n        \r\n        if (this.debugMode) {\r\n            console.log('[OpacityController] Transition stopped at opacity:', this.currentOpacity);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Set opacity immediately without transition\r\n     * @param {number} opacity - Opacity value (0-1)\r\n     */\r\n    setOpacityImmediate(opacity) {\r\n        this.currentOpacity = opacity;\r\n        this.targetOpacity = opacity;\r\n        this.isTransitioning = false;\r\n        this.setOpacity(opacity);\r\n        \r\n        if (this.debugMode) {\r\n            console.log('[OpacityController] Opacity set immediately to:', opacity);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Get current opacity\r\n     * @returns {number} Current opacity (0-1)\r\n     */\r\n    getOpacity() {\r\n        return this.currentOpacity;\r\n    }\r\n    \r\n    /**\r\n     * Check if currently transitioning\r\n     * @returns {boolean}\r\n     */\r\n    isInTransition() {\r\n        return this.isTransitioning;\r\n    }\r\n    \r\n    /**\r\n     * Setup debug keyboard controls (N = fade out, M = fade in)\r\n     */\r\n    setupDebugControls() {\r\n        console.log('[OpacityController] Debug controls: N = fade out (night), M = fade in (day)');\r\n        \r\n        this.onKeyDown = (event) => {\r\n            if (event.code === 'KeyN' && !this.isTransitioning) {\r\n                console.log('[OpacityController] Debug: Fading out (revealing night)');\r\n                this.fadeOut();\r\n            } else if (event.code === 'KeyM' && !this.isTransitioning) {\r\n                console.log('[OpacityController] Debug: Fading in (showing day)');\r\n                this.fadeIn();\r\n            }\r\n        };\r\n        \r\n        window.addEventListener('keydown', this.onKeyDown);\r\n    }\r\n    \r\n    onDestroy() {\r\n        if (this.onKeyDown) {\r\n            window.removeEventListener('keydown', this.onKeyDown);\r\n        }\r\n    }\r\n}", "import {Component, Property, MeshComponent} from '@wonderlandengine/api';\r\n\r\n/**\r\n * Video Wall Tiled - Complete solution for displaying ultra-wide videos\r\n * Splits video into tiles and maps them to wall segments\r\n * \r\n * Material Mapping:\r\n * - material1: First third of video (0-2400px) \u2192 First wall segment\r\n * - material2: Second third of video (2400-4800px) \u2192 Second wall segment  \r\n * - material3: Third third of video (4800-7200px) \u2192 Third wall segment\r\n * \r\n * For mesh with tiled walls:\r\n * - Left wall: Use materials 4, 5, 6 in mesh\r\n * - Right wall: Use materials 7, 8, 9 in mesh (rotated to avoid gap)\r\n */\r\nexport class VideoWallTiled extends Component {\r\n    static TypeName = 'video-wall-tiled';\r\n    static Properties = {\r\n        videoUrl: Property.string('/static/video-7200.mp4'),\r\n        material1: Property.material(),  // First tile (0-2400px)\r\n        material2: Property.material(),  // Second tile (2400-4800px)\r\n        material3: Property.material(),  // Third tile (4800-7200px)\r\n        tileWidth: Property.int(2400),\r\n        videoWidth: Property.int(7200),\r\n        videoHeight: Property.int(720),\r\n        textureProperty: Property.string('diffuseTexture'),\r\n        autoplay: Property.bool(true),\r\n        muted: Property.bool(false),  // Whether to mute sound (false = audio enabled)\r\n        loop: Property.bool(true),\r\n        debugMode: Property.bool(true)\r\n    };\r\n\r\n    init() {\r\n        this.video = null;\r\n        this.tiles = [];\r\n        this.updateCount = 0;\r\n        this.materials = [];  // Will be populated in start()\r\n        this.updateLoopStarted = false;  // Prevent multiple update loops\r\n        \r\n        // Audio handling - bind context for event handlers\r\n        this.playAfterUserGesture = this.playAfterUserGesture.bind(this);\r\n    }\r\n\r\n    start() {\r\n        console.log('[VideoWallTiled] Starting tiled video wall system');\r\n        \r\n        // Collect materials into array\r\n        this.materials = [this.material1, this.material2, this.material3].filter(m => m !== null);\r\n        \r\n        console.log('[VideoWallTiled] Material configuration:', {\r\n            material1: this.material1 ? 'assigned' : 'missing',\r\n            material2: this.material2 ? 'assigned' : 'missing',\r\n            material3: this.material3 ? 'assigned' : 'missing',\r\n            totalMaterials: this.materials.length\r\n        });\r\n        \r\n        // Calculate number of tiles needed\r\n        this.tileCount = Math.ceil(this.videoWidth / this.tileWidth);\r\n        console.log(`[VideoWallTiled] Will create ${this.tileCount} tiles of ${this.tileWidth}px each`);\r\n        \r\n        // Validate materials\r\n        if (this.materials.length === 0) {\r\n            console.error('[VideoWallTiled] No materials assigned');\r\n            console.log('[VideoWallTiled] Please assign material1, material2, and material3 for each tile segment');\r\n            return;\r\n        }\r\n        \r\n        if (this.materials.length < this.tileCount) {\r\n            console.warn(`[VideoWallTiled] Only ${this.materials.length} materials assigned, need ${this.tileCount}`);\r\n            console.warn('[VideoWallTiled] Some tiles will not display video');\r\n        }\r\n        \r\n        // Initialize system\r\n        this.createVideoSource();\r\n        this.createTiles();\r\n    }\r\n    \r\n    createVideoSource() {\r\n        console.log('[VideoWallTiled] Creating video source');\r\n        \r\n        this.video = document.createElement('video');\r\n        this.video.src = this.videoUrl;\r\n        this.video.crossOrigin = 'anonymous';\r\n        this.video.loop = this.loop;\r\n        this.video.muted = this.muted;  // Now controlled by property\r\n        this.video.playsInline = true;\r\n        this.video.style.display = 'none';\r\n        document.body.appendChild(this.video);\r\n        \r\n        this.video.addEventListener('loadedmetadata', () => {\r\n            console.log(`[VideoWallTiled] Video loaded: ${this.video.videoWidth}x${this.video.videoHeight}`);\r\n            \r\n            // Verify dimensions\r\n            if (this.video.videoWidth !== this.videoWidth || this.video.videoHeight !== this.videoHeight) {\r\n                console.warn('[VideoWallTiled] Video dimensions differ from expected:');\r\n                console.warn(`  Expected: ${this.videoWidth}x${this.videoHeight}`);\r\n                console.warn(`  Actual: ${this.video.videoWidth}x${this.video.videoHeight}`);\r\n                \r\n                // Update to actual dimensions\r\n                this.videoWidth = this.video.videoWidth;\r\n                this.videoHeight = this.video.videoHeight;\r\n                this.tileCount = Math.ceil(this.videoWidth / this.tileWidth);\r\n            }\r\n            \r\n            this.onVideoReady();\r\n        });\r\n        \r\n        this.video.addEventListener('error', (e) => {\r\n            console.error('[VideoWallTiled] Video error:', this.video.error);\r\n        });\r\n        \r\n        this.video.load();\r\n    }\r\n    \r\n    createTiles() {\r\n        console.log('[VideoWallTiled] Creating tile system');\r\n        \r\n        for (let i = 0; i < this.tileCount; i++) {\r\n            // Calculate tile dimensions\r\n            const sourceX = i * this.tileWidth;\r\n            const sourceWidth = Math.min(this.tileWidth, this.videoWidth - sourceX);\r\n            \r\n            // Create canvas for this tile\r\n            const canvas = document.createElement('canvas');\r\n            canvas.width = sourceWidth;\r\n            canvas.height = this.videoHeight;\r\n            canvas.style.display = 'none';\r\n            document.body.appendChild(canvas);\r\n            \r\n            const ctx = canvas.getContext('2d', {\r\n                alpha: false,\r\n                desynchronized: true\r\n            });\r\n            \r\n            // Create tile object\r\n            const tile = {\r\n                index: i,\r\n                canvas: canvas,\r\n                ctx: ctx,\r\n                texture: null,\r\n                material: this.materials[i] || null,\r\n                sourceX: sourceX,\r\n                sourceWidth: sourceWidth,\r\n                updateSuccessful: false\r\n            };\r\n            \r\n            this.tiles.push(tile);\r\n            \r\n            const materialName = i === 0 ? 'material1' : i === 1 ? 'material2' : 'material3';\r\n            console.log(`[VideoWallTiled] Tile ${i} (${materialName}):`, {\r\n                sourceX: sourceX,\r\n                sourceWidth: sourceWidth,\r\n                canvasSize: `${canvas.width}x${canvas.height}`,\r\n                hasMaterial: !!tile.material,\r\n                materialAssigned: tile.material ? `Yes (${materialName})` : 'No - tile will not display'\r\n            });\r\n        }\r\n    }\r\n    \r\n    onVideoReady() {\r\n        console.log('[VideoWallTiled] Video ready, initializing textures');\r\n        \r\n        // Create and apply textures\r\n        this.tiles.forEach((tile, index) => {\r\n            if (!tile.material) {\r\n                console.warn(`[VideoWallTiled] No material for tile ${index}, skipping`);\r\n                return;\r\n            }\r\n            \r\n            // Draw initial frame to canvas\r\n            tile.ctx.fillStyle = '#000';\r\n            tile.ctx.fillRect(0, 0, tile.canvas.width, tile.canvas.height);\r\n            \r\n            try {\r\n                // Create texture from canvas\r\n                console.log(`[VideoWallTiled] Creating texture for tile ${index}`);\r\n                const texture = this.engine.textures.create(tile.canvas);\r\n                \r\n                if (texture) {\r\n                    tile.texture = texture;\r\n                    \r\n                    // Apply to material\r\n                    if (tile.material[this.textureProperty] !== undefined) {\r\n                        tile.material[this.textureProperty] = texture;\r\n                        console.log(`[VideoWallTiled] Texture applied to material ${index}`);\r\n                    } else {\r\n                        // Try alternative property names\r\n                        const altProps = ['diffuseTexture', 'flatTexture', 'texture'];\r\n                        for (const prop of altProps) {\r\n                            if (tile.material[prop] !== undefined) {\r\n                                tile.material[prop] = texture;\r\n                                console.log(`[VideoWallTiled] Texture applied to material ${index} using ${prop}`);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    console.error(`[VideoWallTiled] Failed to create texture for tile ${index}`);\r\n                }\r\n            } catch (e) {\r\n                console.error(`[VideoWallTiled] Error creating texture for tile ${index}:`, e);\r\n            }\r\n        });\r\n        \r\n        // Start playback\r\n        this.startPlayback();\r\n    }\r\n    \r\n    startPlayback() {\r\n        console.log('[VideoWallTiled] Starting video playback');\r\n        console.log(`[VideoWallTiled] Audio settings: muted=${this.muted}, autoplay=${this.autoplay}`);\r\n        \r\n        if (this.autoplay) {\r\n            /* Muted videos are allowed to play immediately. Videos with sound\r\n             * need to await a user gesture per browser autoplay policies */\r\n            if (this.muted) {\r\n                // Muted videos can play immediately\r\n                this.video.play().then(() => {\r\n                    console.log('[VideoWallTiled] Muted video playing automatically');\r\n                    this.startUpdateLoop();\r\n                }).catch(e => {\r\n                    console.warn('[VideoWallTiled] Failed to autoplay muted video:', e);\r\n                    // Fallback to user gesture even for muted videos\r\n                    this.setupUserGestureHandlers();\r\n                });\r\n            } else {\r\n                // Videos with audio need user interaction\r\n                console.log('[VideoWallTiled] Video has audio - waiting for user interaction');\r\n                this.setupUserGestureHandlers();\r\n            }\r\n        } else {\r\n            console.log('[VideoWallTiled] Autoplay disabled - waiting for manual start');\r\n            // Don't start automatically, wait for manual trigger\r\n        }\r\n    }\r\n    \r\n    setupUserGestureHandlers() {\r\n        console.log('[VideoWallTiled] Setting up user gesture handlers for audio playback');\r\n        window.addEventListener('click', this.playAfterUserGesture);\r\n        window.addEventListener('touchstart', this.playAfterUserGesture);\r\n    }\r\n    \r\n    playAfterUserGesture() {\r\n        console.log('[VideoWallTiled] User gesture detected - starting video with audio');\r\n        this.video?.play().then(() => {\r\n            console.log('[VideoWallTiled] Video started after user gesture');\r\n            this.startUpdateLoop();\r\n        }).catch(e => {\r\n            console.error('[VideoWallTiled] Failed to start video after user gesture:', e);\r\n        });\r\n        \r\n        // Remove event listeners after successful start\r\n        window.removeEventListener('click', this.playAfterUserGesture);\r\n        window.removeEventListener('touchstart', this.playAfterUserGesture);\r\n    }\r\n    \r\n    startUpdateLoop() {\r\n        // Prevent multiple update loops\r\n        if (this.updateLoopStarted) {\r\n            console.log('[VideoWallTiled] Update loop already running');\r\n            return;\r\n        }\r\n        this.updateLoopStarted = true;\r\n        console.log('[VideoWallTiled] Starting update loop');\r\n        \r\n        let lastUpdate = 0;\r\n        let lastDebugLog = Date.now();\r\n        \r\n        const update = (timestamp) => {\r\n            // Throttle to 30fps\r\n            if (timestamp - lastUpdate < 33) {\r\n                requestAnimationFrame(update);\r\n                return;\r\n            }\r\n            lastUpdate = timestamp;\r\n            \r\n            if (this.video && !this.video.paused && !this.video.ended) {\r\n                // Update each tile\r\n                this.tiles.forEach((tile) => {\r\n                    if (!tile.texture) return;\r\n                    \r\n                    // Draw video section to tile canvas\r\n                    try {\r\n                        tile.ctx.drawImage(\r\n                            this.video,\r\n                            tile.sourceX, 0, tile.sourceWidth, this.videoHeight,  // Source rectangle\r\n                            0, 0, tile.canvas.width, tile.canvas.height           // Destination\r\n                        );\r\n                        \r\n                        // Update texture with canvas content\r\n                        if (tile.texture.update) {\r\n                            tile.texture.update(tile.canvas);\r\n                            tile.updateSuccessful = true;\r\n                        } else if (tile.texture.upload) {\r\n                            tile.texture.upload(tile.canvas);\r\n                            tile.updateSuccessful = true;\r\n                        } else {\r\n                            // Try WebGL direct update as fallback\r\n                            this.updateTextureDirectly(tile);\r\n                        }\r\n                    } catch (e) {\r\n                        if (!tile.updateSuccessful && this.updateCount === 0) {\r\n                            console.error(`[VideoWallTiled] Update error for tile ${tile.index}:`, e);\r\n                        }\r\n                    }\r\n                });\r\n                \r\n                this.updateCount++;\r\n                \r\n                // Debug logging\r\n                if (this.debugMode) {\r\n                    const now = Date.now();\r\n                    if (now - lastDebugLog > 3000) {\r\n                        const successfulTiles = this.tiles.filter(t => t.updateSuccessful).length;\r\n                        console.log(`[VideoWallTiled] Updates: ${this.updateCount}, Time: ${this.video.currentTime.toFixed(1)}s, Active tiles: ${successfulTiles}/${this.tiles.length}`);\r\n                        lastDebugLog = now;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            requestAnimationFrame(update);\r\n        };\r\n        \r\n        requestAnimationFrame(update);\r\n    }\r\n    \r\n    updateTextureDirectly(tile) {\r\n        // Fallback: Try to update WebGL texture directly\r\n        const canvas = document.querySelector('canvas');\r\n        const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');\r\n        \r\n        if (gl && tile.texture) {\r\n            try {\r\n                // Bind and update texture\r\n                gl.bindTexture(gl.TEXTURE_2D, tile.texture);\r\n                gl.texSubImage2D(\r\n                    gl.TEXTURE_2D, 0, 0, 0,\r\n                    gl.RGBA, gl.UNSIGNED_BYTE, tile.canvas\r\n                );\r\n                tile.updateSuccessful = true;\r\n            } catch (e) {\r\n                // Silent fail after first attempt\r\n            }\r\n        }\r\n    }\r\n    \r\n    onDestroy() {\r\n        // Clean up audio event listeners\r\n        window.removeEventListener('click', this.playAfterUserGesture);\r\n        window.removeEventListener('touchstart', this.playAfterUserGesture);\r\n        \r\n        // Clean up video element\r\n        if (this.video) {\r\n            this.video.pause();\r\n            this.video.remove();\r\n        }\r\n        \r\n        // Clean up tile canvases\r\n        this.tiles.forEach(tile => {\r\n            if (tile.canvas) {\r\n                tile.canvas.remove();\r\n            }\r\n        });\r\n    }\r\n}", "import { Component, Property } from '@wonderlandengine/api';\r\n\r\n/**\r\n * Wrapper for teleport component that only enables it in VR mode\r\n * This prevents errors when running in desktop/browser mode\r\n */\r\nexport class VrTeleportWrapper extends Component {\r\n    static TypeName = 'vr-teleport-wrapper';\r\n    static Properties = {\r\n        teleportComponent: Property.object()\r\n    };\r\n    \r\n    init() {\r\n        this.isVrMode = false;\r\n        this.teleportComp = null;\r\n    }\r\n    \r\n    start() {\r\n        // Get the teleport component\r\n        if (this.teleportComponent) {\r\n            this.teleportComp = this.teleportComponent.getComponent('teleport');\r\n            if (!this.teleportComp) {\r\n                console.warn('[VrTeleportWrapper] No teleport component found on specified object');\r\n                return;\r\n            }\r\n        } else {\r\n            // Try to get it from the same object\r\n            this.teleportComp = this.object.getComponent('teleport');\r\n        }\r\n        \r\n        if (this.teleportComp) {\r\n            // Initially disable teleport until VR is entered\r\n            this.teleportComp.active = false;\r\n            console.log('[VrTeleportWrapper] Teleport component found and disabled for desktop mode');\r\n        }\r\n        \r\n        // Listen for VR session changes\r\n        this.onXRSessionStart = () => {\r\n            console.log('[VrTeleportWrapper] VR session started - enabling teleport');\r\n            this.isVrMode = true;\r\n            if (this.teleportComp) {\r\n                this.teleportComp.active = true;\r\n            }\r\n        };\r\n        \r\n        this.onXRSessionEnd = () => {\r\n            console.log('[VrTeleportWrapper] VR session ended - disabling teleport');\r\n            this.isVrMode = false;\r\n            if (this.teleportComp) {\r\n                this.teleportComp.active = false;\r\n            }\r\n        };\r\n        \r\n        // Register XR session listeners\r\n        if (this.engine.xr) {\r\n            this.engine.onXRSessionStart.add(this.onXRSessionStart);\r\n            this.engine.onXRSessionEnd.add(this.onXRSessionEnd);\r\n        }\r\n    }\r\n    \r\n    onDestroy() {\r\n        // Clean up listeners\r\n        if (this.engine.xr) {\r\n            this.engine.onXRSessionStart.remove(this.onXRSessionStart);\r\n            this.engine.onXRSessionEnd.remove(this.onXRSessionEnd);\r\n        }\r\n    }\r\n}", "import {Component, Property} from '@wonderlandengine/api';\r\n\r\n/**\r\n * SkySphereControllerV2 - Simplified and fixed version\r\n * Works with a mesh sphere that has negative scale (-20, -20, -20) set in editor\r\n * \r\n * For smooth transitions, create TWO sphere objects:\r\n * 1. Main sphere with this component\r\n * 2. Secondary sphere (child or sibling) for crossfade\r\n */\r\nexport class SkySphereControllerV2 extends Component {\r\n    static TypeName = 'sky-sphere-controller-v2';\r\n    static Properties = {\r\n        dayMaterial: Property.material(),\r\n        nightMaterial: Property.material(),\r\n        secondarySphere: Property.object(),  // Optional: second sphere for smooth crossfade\r\n        transitionDuration: Property.float(2.0),\r\n        transitionType: Property.enum(['instant', 'fade-black', 'crossfade'], 'fade-black'),\r\n        debugMode: Property.bool(false)\r\n    };\r\n    \r\n    init() {\r\n        this.currentState = 'day';\r\n        this.targetState = 'day';\r\n        this.isTransitioning = false;\r\n        this.transitionProgress = 0;\r\n        \r\n        // Store materials for smooth blending\r\n        this.meshComponent = null;\r\n        this.dayMaterialClone = null;  // Cloned materials for alpha animation\r\n        this.nightMaterialClone = null;\r\n        \r\n        console.log('[SkySphereV2] Initialized');\r\n    }\r\n    \r\n    start() {\r\n        // Validate materials\r\n        if (!this.dayMaterial || !this.nightMaterial) {\r\n            console.error('[SkySphereV2] Both day and night materials must be assigned!');\r\n            return;\r\n        }\r\n        \r\n        // Get mesh component\r\n        this.meshComponent = this.object.getComponent('mesh');\r\n        if (!this.meshComponent) {\r\n            console.error('[SkySphereV2] No mesh component found!');\r\n            return;\r\n        }\r\n        \r\n        // Clone materials for unique alpha control\r\n        // We need separate clones for each sphere to control alpha independently!\r\n        this.dayMaterialClone = this.dayMaterial.clone();\r\n        this.nightMaterialClone = this.nightMaterial.clone();\r\n        \r\n        // For crossfade mode, we need separate material instances for each sphere\r\n        this.dayMaterialClone2 = null;\r\n        this.nightMaterialClone2 = null;\r\n        if (this.secondarySphere && this.transitionType === 2) {\r\n            this.dayMaterialClone2 = this.dayMaterial.clone();\r\n            this.nightMaterialClone2 = this.nightMaterial.clone();\r\n        }\r\n        \r\n        // IMPORTANT: Initialize diffuseColor to ensure alpha channel exists\r\n        // Set white color with full opacity for primary materials\r\n        this.dayMaterialClone.setDiffuseColor([1.0, 1.0, 1.0, 1.0]);\r\n        this.nightMaterialClone.setDiffuseColor([1.0, 1.0, 1.0, 1.0]);\r\n        \r\n        // Initialize secondary materials if they exist\r\n        if (this.dayMaterialClone2) {\r\n            this.dayMaterialClone2.setDiffuseColor([1.0, 1.0, 1.0, 1.0]);\r\n            this.nightMaterialClone2.setDiffuseColor([1.0, 1.0, 1.0, 1.0]);\r\n        }\r\n        \r\n        // Set initial material (day with full opacity)\r\n        this.meshComponent.material = this.dayMaterialClone;\r\n        this.setMaterialAlpha(this.dayMaterialClone, 1.0);\r\n        \r\n        console.log('[SkySphereV2] Configuration:', {\r\n            transitionType: this.transitionType,\r\n            transitionDuration: this.transitionDuration,\r\n            hasSecondary: !!this.secondarySphere,\r\n            debugMode: this.debugMode\r\n        });\r\n        \r\n        // Setup secondary sphere for crossfade if available\r\n        this.secondaryMesh = null;\r\n        if (this.secondarySphere && (this.transitionType === 2 || this.transitionType === 1)) { // crossfade or fade-black\r\n            this.secondaryMesh = this.secondarySphere.getComponent('mesh');\r\n            if (this.secondaryMesh) {\r\n                // IMPORTANT: Make secondary sphere slightly smaller to ensure it's inside\r\n                // This prevents z-fighting and ensures proper render order\r\n                const secondaryScale = new Float32Array(3);\r\n                this.secondarySphere.getScalingLocal(secondaryScale);\r\n                // Make it 99% of the size to be just inside the primary sphere\r\n                this.secondarySphere.setScalingLocal([\r\n                    secondaryScale[0] * 0.99,\r\n                    secondaryScale[1] * 0.99,\r\n                    secondaryScale[2] * 0.99\r\n                ]);\r\n                \r\n                // Use separate material clones for secondary sphere\r\n                if (this.transitionType === 2 && this.dayMaterialClone2) {\r\n                    // For crossfade, use secondary material clones\r\n                    this.secondaryMesh.material = this.dayMaterialClone2;\r\n                    // Start with secondary at FULL opacity (will be hidden by primary)\r\n                    this.setMaterialAlpha(this.dayMaterialClone2, 1.0);\r\n                } else {\r\n                    // For fade-black, can share materials since we don't overlap\r\n                    this.secondaryMesh.material = this.nightMaterialClone;\r\n                    this.setMaterialAlpha(this.nightMaterialClone, 0.0);\r\n                }\r\n                console.log('[SkySphereV2] Secondary sphere setup for transitions (scaled to 99%)');\r\n            } else {\r\n                console.warn('[SkySphereV2] Secondary sphere has no mesh component, falling back to instant');\r\n                this.transitionType = 0; // Set to instant\r\n            }\r\n        }\r\n        \r\n        // Store original scales (but we won't modify them for alpha transitions)\r\n        this.originalScale = new Float32Array(3);\r\n        this.object.getScalingLocal(this.originalScale);\r\n        \r\n        // Don't touch the scale - it's set correctly in editor (-20, -20, -20)\r\n        console.log('[SkySphereV2] Using editor-set scale, transition type:', this.transitionType);\r\n        \r\n        // Setup controls\r\n        if (this.debugMode) {\r\n            this.setupDebugControls();\r\n        }\r\n        \r\n        console.log('[SkySphereV2] Ready');\r\n    }\r\n    \r\n    setupDebugControls() {\r\n        console.log('[SkySphereV2] Debug Controls:');\r\n        console.log('  N - Transition to night');\r\n        console.log('  M - Transition to day');\r\n        console.log('  + - Increase transition speed');\r\n        console.log('  - - Decrease transition speed');\r\n        console.log(`  Current duration: ${this.transitionDuration}s`);\r\n        \r\n        this.onKeyDown = (event) => {\r\n            if (event.code === 'KeyN' && this.currentState !== 'night' && !this.isTransitioning) {\r\n                this.startTransition('night');\r\n            } else if (event.code === 'KeyM' && this.currentState !== 'day' && !this.isTransitioning) {\r\n                this.startTransition('day');\r\n            } else if (event.code === 'Equal' || event.code === 'NumpadAdd') {\r\n                // Increase speed (decrease duration)\r\n                this.transitionDuration = Math.max(0.5, this.transitionDuration - 0.5);\r\n                console.log(`[SkySphereV2] Transition duration: ${this.transitionDuration}s`);\r\n            } else if (event.code === 'Minus' || event.code === 'NumpadSubtract') {\r\n                // Decrease speed (increase duration)\r\n                this.transitionDuration = Math.min(10, this.transitionDuration + 0.5);\r\n                console.log(`[SkySphereV2] Transition duration: ${this.transitionDuration}s`);\r\n            }\r\n        };\r\n        \r\n        window.addEventListener('keydown', this.onKeyDown);\r\n    }\r\n    \r\n    startTransition(target) {\r\n        if (this.isTransitioning || this.currentState === target) return;\r\n        \r\n        // Convert enum index to string\r\n        const transitionTypes = ['instant', 'fade-black', 'crossfade'];\r\n        const transitionTypeString = transitionTypes[this.transitionType] || 'instant';\r\n        \r\n        console.log(`[SkySphereV2] Starting ${transitionTypeString} transition to ${target} (enum value: ${this.transitionType})`);\r\n        \r\n        // Check if materials are properly assigned\r\n        if (!this.meshComponent) {\r\n            console.error('[SkySphereV2] ERROR: No mesh component!');\r\n            return;\r\n        }\r\n        \r\n        const targetMat = target === 'night' ? this.nightMaterial : this.dayMaterial;\r\n        if (!targetMat) {\r\n            console.error(`[SkySphereV2] ERROR: ${target} material not assigned in editor!`);\r\n            return;\r\n        }\r\n        \r\n        this.targetState = target;\r\n        this.transitionProgress = 0;\r\n        \r\n        // Handle different transition types using the index\r\n        switch (this.transitionType) {\r\n            case 2: // 'crossfade'\r\n                if (this.secondaryMesh && this.secondarySphere) {\r\n                    // Setup materials on spheres for crossfade using separate clones\r\n                    if (target === 'night') {\r\n                        // Day to night: primary has day (fade out), secondary has night (always visible)\r\n                        this.meshComponent.material = this.dayMaterialClone;\r\n                        this.secondaryMesh.material = this.nightMaterialClone2 || this.nightMaterialClone;\r\n                        // Primary starts opaque, secondary is fully visible behind it\r\n                        this.setMaterialAlpha(this.dayMaterialClone, 1.0);\r\n                        // Secondary at full opacity - it's behind so will be revealed as primary fades\r\n                        this.setMaterialAlpha(this.nightMaterialClone2 || this.nightMaterialClone, 1.0);\r\n                    } else {\r\n                        // Night to day: primary has night (fade out), secondary has day (always visible)\r\n                        this.meshComponent.material = this.nightMaterialClone;\r\n                        this.secondaryMesh.material = this.dayMaterialClone2 || this.dayMaterialClone;\r\n                        // Primary starts opaque, secondary is fully visible behind it\r\n                        this.setMaterialAlpha(this.nightMaterialClone, 1.0);\r\n                        // Secondary at full opacity - it's behind so will be revealed as primary fades\r\n                        this.setMaterialAlpha(this.dayMaterialClone2 || this.dayMaterialClone, 1.0);\r\n                    }\r\n                    this.isTransitioning = true;\r\n                    // Performance monitoring\r\n                    this.transitionStartTime = performance.now();\r\n                    this.frameCount = 0;\r\n                    this.lastFrameTime = performance.now();\r\n                    console.log(`[SkySphereV2] Starting alpha crossfade transition to ${target}`);\r\n                    console.log(`[SkySphereV2] Primary: ${this.currentState}, Secondary: ${target}`);\r\n                } else {\r\n                    // Fallback to instant\r\n                    const mat = target === 'night' ? this.nightMaterialClone : this.dayMaterialClone;\r\n                    this.meshComponent.material = mat;\r\n                    this.setMaterialAlpha(mat, 1.0);\r\n                    this.currentState = target;\r\n                    this.isTransitioning = false;\r\n                }\r\n                break;\r\n                \r\n            case 1: // 'fade-black'\r\n                // Start fade to black transition using alpha\r\n                this.isTransitioning = true;\r\n                this.fadeDirection = 'out';  // First fade out, then fade in\r\n                console.log('[SkySphereV2] Starting fade-through-black transition (alpha-based)');\r\n                break;\r\n                \r\n            case 0: // 'instant'\r\n            default:\r\n                // Immediate switch with cloned materials\r\n                const instantMat = target === 'night' ? this.nightMaterialClone : this.dayMaterialClone;\r\n                this.meshComponent.material = instantMat;\r\n                this.setMaterialAlpha(instantMat, 1.0);\r\n                this.currentState = target;\r\n                this.isTransitioning = false;\r\n                this.transitionProgress = 1.0;\r\n                console.log('[SkySphereV2] Instant transition complete');\r\n                break;\r\n        }\r\n    }\r\n    \r\n    update(dt) {\r\n        if (!this.isTransitioning || !this.meshComponent) {\r\n            return;\r\n        }\r\n        \r\n        // Performance monitoring\r\n        if (this.transitionStartTime) {\r\n            this.frameCount++;\r\n            const now = performance.now();\r\n            const frameDelta = now - this.lastFrameTime;\r\n            this.lastFrameTime = now;\r\n            \r\n            // Log performance issues\r\n            if (frameDelta > 33) { // More than 33ms indicates < 30fps\r\n                console.warn(`[SkySphereV2] Frame took ${frameDelta.toFixed(1)}ms (target: 16.67ms)`);\r\n            }\r\n            \r\n            // Log every 10 frames in debug mode\r\n            if (this.debugMode && this.frameCount % 10 === 0) {\r\n                const elapsed = (now - this.transitionStartTime) / 1000;\r\n                const avgFPS = this.frameCount / elapsed;\r\n                console.log(`[SkySphereV2] Progress: ${Math.round(this.transitionProgress * 100)}%, FPS: ${avgFPS.toFixed(1)}, dt: ${dt.toFixed(3)}`);\r\n            }\r\n        }\r\n        \r\n        // Update transition progress\r\n        this.transitionProgress += dt / this.transitionDuration;\r\n        \r\n        if (this.transitionProgress >= 1.0) {\r\n            // Complete transition\r\n            this.completeTransition();\r\n            return;\r\n        }\r\n        \r\n        // Calculate smooth transition value\r\n        const t = this.smoothstep(0, 1, this.transitionProgress);\r\n        \r\n        // Handle different transition types (using numeric values)\r\n        switch (this.transitionType) {\r\n            case 2: // 'crossfade'\r\n                // Alpha crossfade between two spheres\r\n                if (this.secondaryMesh && this.secondarySphere) {\r\n                    // New approach: Secondary is always at full opacity (behind primary)\r\n                    // We only fade out the primary sphere to reveal secondary\r\n                    \r\n                    let primaryMat;\r\n                    \r\n                    if (this.targetState === 'night') {\r\n                        // Day to night: fade out day material\r\n                        primaryMat = this.dayMaterialClone;\r\n                    } else {\r\n                        // Night to day: fade out night material\r\n                        primaryMat = this.nightMaterialClone;\r\n                    }\r\n                    \r\n                    // Only fade out primary sphere (1 to 0)\r\n                    // Secondary stays at 1.0 (set during startTransition)\r\n                    this.setMaterialAlpha(primaryMat, 1.0 - t);\r\n                    \r\n                    if (this.debugMode && Math.floor(t * 10) !== Math.floor((t - dt / this.transitionDuration) * 10)) {\r\n                        console.log(`[SkySphereV2] Alpha crossfade: ${Math.round(t * 100)}%`);\r\n                    }\r\n                }\r\n                break;\r\n                \r\n            case 1: // 'fade-black'\r\n                // Fade through black transition using alpha\r\n                if (this.fadeDirection === 'out') {\r\n                    // First half: fade out to black\r\n                    const fadeOut = 1.0 - (t * 2);  // 1 to 0 in first half\r\n                    \r\n                    // Fade current material alpha to 0\r\n                    const currentMat = this.currentState === 'day' ? this.dayMaterialClone : this.nightMaterialClone;\r\n                    this.setMaterialAlpha(currentMat, fadeOut);\r\n                    \r\n                    // Switch material at midpoint\r\n                    if (t >= 0.5) {\r\n                        // Switch to target material at alpha 0\r\n                        const targetMat = this.targetState === 'night' ? this.nightMaterialClone : this.dayMaterialClone;\r\n                        this.meshComponent.material = targetMat;\r\n                        this.fadeDirection = 'in';\r\n                        console.log(`[SkySphereV2] Switched to ${this.targetState} material`);\r\n                    }\r\n                } else {\r\n                    // Second half: fade in from black\r\n                    const fadeIn = (t - 0.5) * 2;  // 0 to 1 in second half\r\n                    \r\n                    // Fade new material alpha from 0 to 1\r\n                    const targetMat = this.targetState === 'night' ? this.nightMaterialClone : this.dayMaterialClone;\r\n                    this.setMaterialAlpha(targetMat, fadeIn);\r\n                }\r\n                \r\n                if (this.debugMode && Math.floor(t * 10) !== Math.floor((t - dt / this.transitionDuration) * 10)) {\r\n                    console.log(`[SkySphereV2] Alpha fade-black: ${Math.round(t * 100)}%`);\r\n                }\r\n                break;\r\n                \r\n            default:\r\n                // Should not reach here for instant transitions\r\n                break;\r\n        }\r\n    }\r\n    \r\n    completeTransition() {\r\n        this.isTransitioning = false;\r\n        this.currentState = this.targetState;\r\n        this.transitionProgress = 1.0;\r\n        \r\n        // Ensure final material is set\r\n        const finalMaterial = this.getTargetMaterial();\r\n        if (this.meshComponent.material !== finalMaterial) {\r\n            this.meshComponent.material = finalMaterial;\r\n        }\r\n        this.currentMaterial = finalMaterial;\r\n        \r\n        // Reset alpha values based on transition type\r\n        switch (this.transitionType) {\r\n            case 2: // 'crossfade'\r\n                // After crossfade, swap materials so primary has the new sky\r\n                const targetMat = this.targetState === 'night' ? this.nightMaterialClone : this.dayMaterialClone;\r\n                const targetMat2 = this.targetState === 'night' ? \r\n                    (this.nightMaterialClone2 || this.nightMaterialClone) : \r\n                    (this.dayMaterialClone2 || this.dayMaterialClone);\r\n                \r\n                // Set primary sphere to show target material at full opacity\r\n                this.meshComponent.material = targetMat;\r\n                this.setMaterialAlpha(targetMat, 1.0);\r\n                \r\n                // Keep secondary ready but behind (will be set up fresh next transition)\r\n                if (this.secondaryMesh) {\r\n                    // Secondary stays at full opacity but behind primary\r\n                    this.setMaterialAlpha(targetMat2, 1.0);\r\n                }\r\n                break;\r\n                \r\n            case 1: // 'fade-black'\r\n                // Ensure final material is at full opacity\r\n                const finalMat = this.targetState === 'night' ? this.nightMaterialClone : this.dayMaterialClone;\r\n                this.meshComponent.material = finalMat;\r\n                this.setMaterialAlpha(finalMat, 1.0);\r\n                break;\r\n        }\r\n        \r\n        console.log(`[SkySphereV2] Transition complete: ${this.currentState}`);\r\n    }\r\n    \r\n    getTargetMaterial() {\r\n        return this.targetState === 'night' ? this.nightMaterial : this.dayMaterial;\r\n    }\r\n    \r\n    smoothstep(edge0, edge1, x) {\r\n        const t = Math.max(0, Math.min(1, (x - edge0) / (edge1 - edge0)));\r\n        return t * t * (3 - 2 * t);\r\n    }\r\n    \r\n    setMaterialAlpha(material, alpha) {\r\n        // For Phong materials - use diffuseColor with alpha channel\r\n        // The alpha works with Phong Opaque Textured materials!\r\n        if (material.getDiffuseColor) {\r\n            const color = material.getDiffuseColor();\r\n            material.setDiffuseColor([color[0], color[1], color[2], alpha]);\r\n            \r\n            // ALSO set emissive color to help with blending\r\n            // This might help if the issue is with how emissive textures blend\r\n            if (material.setEmissiveColor) {\r\n                // Set emissive intensity based on alpha for smoother blending\r\n                material.setEmissiveColor([alpha, alpha, alpha, 1.0]);\r\n            }\r\n            \r\n            // Log exact alpha values to detect quantization\r\n            if (this.debugMode && material.diffuseTexture) {\r\n                // Get back the actual set value to see if it's being quantized\r\n                const newColor = material.getDiffuseColor();\r\n                const actualAlpha = newColor[3];\r\n                \r\n                // Check if alpha is being quantized\r\n                if (Math.abs(actualAlpha - alpha) > 0.01) {\r\n                    console.warn(`[SkySphereV2] Alpha quantization detected! Requested: ${alpha.toFixed(4)}, Got: ${actualAlpha.toFixed(4)}`);\r\n                }\r\n                \r\n                // Log at specific thresholds that might cause jumps\r\n                const thresholds = [0.0, 0.25, 0.5, 0.75, 1.0];\r\n                for (let threshold of thresholds) {\r\n                    if (Math.abs(alpha - threshold) < 0.02) {\r\n                        console.log(`[SkySphereV2] Near threshold ${threshold}: alpha = ${alpha.toFixed(4)}`);\r\n                    }\r\n                }\r\n            }\r\n        } else if (material.getFlatColor) {\r\n            // Fallback for Flat materials (won't blend but included for completeness)\r\n            const color = material.getFlatColor();\r\n            material.setFlatColor([color[0], color[1], color[2], alpha]);\r\n        }\r\n    }\r\n    \r\n    onDestroy() {\r\n        if (this.onKeyDown) {\r\n            window.removeEventListener('keydown', this.onKeyDown);\r\n        }\r\n    }\r\n    \r\n    // Public API\r\n    transitionToNight() {\r\n        console.log('[SkySphereV2] transitionToNight() called');\r\n        this.startTransition('night');\r\n    }\r\n    \r\n    transitionToDay() {\r\n        console.log('[SkySphereV2] transitionToDay() called');\r\n        this.startTransition('day');\r\n    }\r\n    \r\n    getCurrentState() {\r\n        return this.currentState;\r\n    }\r\n    \r\n    isInTransition() {\r\n        return this.isTransitioning;\r\n    }\r\n}", "/**\n * /!\\ This file is auto-generated.\n *\n * This is the entry point of your standalone application.\n *\n * There are multiple tags used by the editor to inject code automatically:\n *     - `wle:auto-imports:start` and `wle:auto-imports:end`: The list of import statements\n *     - `wle:auto-register:start` and `wle:auto-register:end`: The list of component to register\n */\n\n/* wle:auto-imports:start */\nimport {AudioListener} from '@wonderlandengine/components';\nimport {Cursor} from '@wonderlandengine/components';\nimport {FingerCursor} from '@wonderlandengine/components';\nimport {HandTracking} from '@wonderlandengine/components';\nimport {MouseLookComponent} from '@wonderlandengine/components';\nimport {PlayerHeight} from '@wonderlandengine/components';\nimport {TeleportComponent} from '@wonderlandengine/components';\nimport {VrModeActiveSwitch} from '@wonderlandengine/components';\nimport {AmbientAudio} from './ambient-audio.js';\nimport {ExtendedWasdControls} from './extended-wasd-controls.js';\nimport {InteractiveObject} from './interactive-object.js';\nimport {LightFadeController} from './light-fade-controller.js';\nimport {OpacityController} from './opacity-controller.js';\nimport {VideoWallTiled} from './video-wall-tiled.js';\nimport {VrTeleportWrapper} from './vr-teleport-wrapper.js';\n/* wle:auto-imports:end */\n\n// Manual import that editor keeps removing\nimport {SkySphereControllerV2} from './sky-sphere-controller-v2.js';\nimport {AudioListener as SpatialAudioListener} from '@wonderlandengine/spatial-audio';\n\nexport default function(engine) {\n/* wle:auto-register:start */\nengine.registerComponent(AudioListener);\nengine.registerComponent(Cursor);\nengine.registerComponent(FingerCursor);\nengine.registerComponent(HandTracking);\nengine.registerComponent(MouseLookComponent);\nengine.registerComponent(PlayerHeight);\nengine.registerComponent(TeleportComponent);\nengine.registerComponent(VrModeActiveSwitch);\nengine.registerComponent(AmbientAudio);\nengine.registerComponent(ExtendedWasdControls);\nengine.registerComponent(InteractiveObject);\nengine.registerComponent(LightFadeController);\nengine.registerComponent(OpacityController);\nengine.registerComponent(VideoWallTiled);\nengine.registerComponent(VrTeleportWrapper);\n/* wle:auto-register:end */\n\n// Manual registration that editor keeps removing\nengine.registerComponent(SkySphereControllerV2);\nengine.registerComponent(SpatialAudioListener);\n}\n"],
  "mappings": "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K,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC;AAAA,IACF,KAAK;AACH,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC;AAAA,IACF,KAAK;AACH,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC;AAAA,IACF,KAAK;AACH,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC;AAAA,IACF,KAAK;AACH,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC;AAAA,IACF,KAAK;AACH,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC,UAAI,CAAC,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK;AAClC;AAAA,IACF;AACE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",
  "names": ["earcut", "equals", "len", "Component", "property", "__decorate", "tempQuat", "Component", "property", "Component", "Emitter", "Component", "Emitter", "Component", "Emitter", "property", "create", "create", "len", "scale", "add", "clone", "copy", "create", "dot", "equals", "exactEquals", "fromValues", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "random", "rotateX", "rotateY", "rotateZ", "scale", "set", "slerp", "sqrLen", "squaredLength", "str", "add", "clone", "copy", "create", "equals", "exactEquals", "fromValues", "mul", "multiply", "rotateX", "rotateY", "rotateZ", "round", "scale", "set", "str", "sub", "subtract", "create", "clone", "fromValues", "copy", "set", "add", "subtract", "multiply", "round", "scale", "len", "angle", "rotateX", "rotateY", "rotateZ", "str", "exactEquals", "equals", "sub", "mul", "offset", "create", "clone", "fromValues", "copy", "set", "add", "scale", "length", "squaredLength", "normalize", "len", "dot", "lerp", "exactEquals", "forEach", "create", "offset", "create", "identity", "dot", "multiply", "rotateX", "rotateY", "rotateZ", "scale", "slerp", "random", "invert", "str", "clone", "fromValues", "copy", "set", "add", "mul", "lerp", "length", "len", "squaredLength", "sqrLen", "normalize", "exactEquals", "equals", "add", "clone", "conjugate", "copy", "create", "dot", "equals", "exactEquals", "fromRotation", "fromRotationTranslation", "fromTranslation", "fromValues", "getTranslation", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "rotateX", "rotateY", "rotateZ", "scale", "set", "sqrLen", "squaredLength", "str", "translate", "create", "clone", "fromValues", "fromRotationTranslation", "fromTranslation", "fromRotation", "copy", "identity", "set", "getTranslation", "translate", "rotateX", "rotateY", "rotateZ", "add", "multiply", "mul", "scale", "dot", "lerp", "invert", "squaredLength", "conjugate", "length", "len", "sqrLen", "normalize", "str", "exactEquals", "equals", "Component", "Emitter", "property", "__decorate", "Component", "Emitter", "property", "__decorate", "tempVec", "Emitter", "Component", "canvas", "dist", "property", "Component", "property", "__decorate", "Component", "property", "Component", "Component", "Component", "Component", "property", "__decorate", "Component", "property", "Component", "property", "__decorate", "Component", "property", "Component", "Component", "Emitter", "property", "Component", "tempVec", "tempVec2", "Component", "tempVec", "tempVec2", "Emitter", "AudioChannel", "PlayState", "Emitter", "__decorate", "PanningType", "Component", "Emitter", "property", "Component", "Type", "Component", "property", "__decorate", "Component", "property", "Component", "property", "__decorate", "Component", "canvas", "property", "Component", "property", "__decorate", "Component", "property", "Component", "property", "__decorate", "Component", "a", "property", "Component", "Type", "Component", "direction", "Type", "Component", "property", "__decorate", "Component", "property", "Component", "tempQuat", "Component", "Component", "property", "__decorate", "Component", "property", "Component", "Type", "Component", "Type", "CollisionComponent", "Component", "Emitter", "Mesh", "MeshAttribute", "MeshComponent", "MeshIndexType", "property", "__decorate", "tempVec3", "earcut", "Mesh", "MeshIndexType", "MeshAttribute", "tempVec3", "Component", "Emitter", "MeshComponent", "CollisionComponent", "__decorate", "property", "Component", "property", "__decorate", "Component", "lookAt", "offset", "dist", "dot", "property", "Component", "property", "__decorate", "Component", "property", "Component", "Emitter", "property", "__decorate", "Component", "Emitter", "min", "max", "property", "Component", "property", "__decorate", "preventDefault", "tempVec", "tempVec3", "Component", "canvas", "property", "Component", "Property", "Property", "Component", "Property", "Component", "Property", "Component", "Property", "Component", "distance", "scale", "Property", "Component", "Property", "Component", "Property", "Component", "Property", "Component", "Property", "Component", "Property", "MeshComponent", "Component", "canvas", "Property", "Component", "Property", "Component", "Property", "Component", "Property", "Component", "Property"]
}
